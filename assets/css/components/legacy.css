/* تطبيق الثيم على html لمنع الوميض */
/* Using Tailwind Slate color palette */
/* WhatsApp Bug Report Theme */
.whatsapp-btn {
    background: linear-gradient(135deg, var(--color-val-hex-25d366) 0%, var(--color-val-hex-128c7e) 100%) !important;
    border: none !important;
    box-shadow: 0 4px 15px var(--color-val-rgba-37-211-102-0-3) !important;
}

.whatsapp-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px var(--color-val-rgba-37-211-102-0-4) !important;
}

.preview-box {
    background: var(--color-val-hex-e5ddd5) url('https://user-images.githubusercontent.com/15075759/28719144-86dc0f70-73b1-11e7-911d-60d70fcded21.png');
    background-blend-mode: overlay;
    border-radius: 12px;
    padding: 20px;
    margin: 15px 0;
    font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
    color: var(--color-val-hex-000);
    max-height: 300px;
    overflow-y: auto;
    border: 1px solid var(--color-val-hex-d1d7db);
}

.chat-bubble {
    background: var(--color-val-hex-fff);
    border-radius: 8px;
    padding: 12px;
    box-shadow: 0 1px 1px var(--color-val-rgba-0-0-0-0-1);
    position: relative;
    font-size: 14px;
    line-height: 1.5;
    white-space: pre-wrap;
}

.chat-bubble::before {
    content: '';
    position: absolute;
    left: -8px;
    top: 8px;
    width: 0;
    height: 0;
    border-style: solid;
    border-width: 8px 12px 8px 0;
    border-color: transparent var(--color-val-hex-fff) transparent transparent;
}

/* Dark Mode Support for Preview */
html[data-theme="dark"] body .preview-box {
    background-color: var(--color-val-hex-0b141a);
    border-color: var(--color-val-hex-2a2f32);
}

html[data-theme="dark"] body .chat-bubble {
    background: var(--color-val-hex-202c33);
    color: var(--color-val-hex-e9edef);
}

html[data-theme="dark"] body .chat-bubble::before {
    border-color: transparent var(--color-val-hex-202c33) transparent transparent;
}

/* منع السكرول الأفقي في body أيضاً */
/* منع أي عنصر من التسبب في السكرول الأفقي */
/* قاعدة عامة لجميع الأقسام */
/* إضافة مسافة بين الأيقونات والنصوص */
/* إخفاء صفوف التعزيز الإضافية */
/* ═══════════════════════════════════════════════════════════════════════════
   Tailwind CSS / Flowbite Color System - Light Theme
   All colors are mapped to Tailwind color palette for consistency
   ═══════════════════════════════════════════════════════════════════════════ */


/* تحسين الجداول في الوضع الفاتح */
html[data-theme="light"] body .summary-table-container {
    background-color: transparent;
    box-shadow: none;
    border: 1px solid var(--primary-color) !important;
}

html[data-theme="light"] body .summary-table-container:hover {
    box-shadow: none;
}

html[data-theme="light"] body .summary-table {
    border: none;
}

html[data-theme="light"] body .summary-table th {
    background-color: var(--color-val-hex-fafbfc);
    color: var(--color-val-hex-64748b);
    border-bottom: 1px solid var(--color-val-hex-eff2f5);
    font-weight: 600;
}

html[data-theme="light"] body .summary-table td {
    border-bottom: 1px solid var(--color-val-hex-eff2f5);
    color: var(--color-val-hex-1e293b);
}

html[data-theme="light"] body .summary-table tbody tr {
    background-color: var(--color-val-hex-ffffff);
}

html[data-theme="light"] body .summary-table tbody tr:nth-child(even) {
    background-color: var(--color-val-hex-fafbfc);
}

html[data-theme="light"] body .summary-table tbody tr:hover {
    background-color: var(--color-val-hex-f8fafc) !important;
}

/* تحسين البطاقات في الوضع الفاتح */
html[data-theme="light"] body .section {
    background: var(--color-val-hex-ffffff);
    border: 1px solid var(--primary-color);
    box-shadow: 0 2px 8px var(--color-val-rgba-0-0-0-0-08);
}

html[data-theme="light"] body .section:hover {
    box-shadow: 0 4px 16px var(--color-val-rgba-0-153-255-0-3);
    border-color: var(--primary-color);
}

/* تحسين الأزرار في الوضع الفاتح */
html[data-theme="light"] body .controls-bar button.btn-primary {
    background-color: var(--color-val-rgba-255-71-87-0-08);
    border-color: var(--color-val-rgba-255-71-87-0-15);
    color: var(--color-val-hex-dc3545);
    box-shadow: none;
}

html[data-theme="light"] body .controls-bar button.btn-primary:hover:not(:disabled) {
    background-color: var(--color-val-rgba-255-71-87-0-15);
    border-color: var(--color-val-rgba-255-71-87-0-3);
    color: var(--color-val-hex-c82333);
    box-shadow: 0 2px 8px var(--color-val-rgba-255-71-87-0-12);
}

html[data-theme="light"] body .controls-bar button.btn-success {
    background-color: var(--color-val-rgba-40-167-69-0-08);
    border-color: var(--color-val-rgba-40-167-69-0-15);
    color: var(--color-val-hex-28a745);
    box-shadow: none;
}

html[data-theme="light"] body .controls-bar button.btn-success:hover:not(:disabled) {
    background-color: var(--color-val-rgba-40-167-69-0-15);
    border-color: var(--color-val-rgba-40-167-69-0-3);
    color: var(--color-val-hex-218838);
    box-shadow: 0 2px 8px var(--color-val-rgba-40-167-69-0-12);
}

html[data-theme="light"] body .controls-bar button.btn-danger {
    background-color: var(--color-val-rgba-220-53-69-0-08);
    border-color: var(--color-val-rgba-220-53-69-0-15);
    color: var(--color-val-hex-dc3545);
    box-shadow: none;
}

html[data-theme="light"] body .controls-bar button.btn-danger:hover:not(:disabled) {
    background-color: var(--color-val-rgba-220-53-69-0-15);
    border-color: var(--color-val-rgba-220-53-69-0-3);
    color: var(--color-val-hex-c82333);
    box-shadow: 0 2px 8px var(--color-val-rgba-220-53-69-0-12);
}

/* تحسين حاوية الحالة في الوضع الفاتح */
html[data-theme="light"] body #apiStatus {
    background-color: var(--color-val-hex-f0f9ff) !important;
    color: var(--color-val-hex-0c4a6e) !important;
    border-color: var(--color-val-hex-bae6fd) !important;
    box-shadow: 0 2px 5px var(--color-val-rgba-0-0-0-0-05);
}

/* تحسين حقول الإدخال في الوضع الفاتح */
html[data-theme="light"] body input[type="text"],
html[data-theme="light"] body input[type="number"],
html[data-theme="light"] body select {
    background-color: var(--color-val-hex-ffffff);
    border: 1px solid var(--primary-color);
    color: var(--color-val-hex-212529);
}

html[data-theme="light"] body input[type="text"]:focus,
html[data-theme="light"] body input[type="number"]:focus,
html[data-theme="light"] body select:focus {
    border-color: var(--color-val-hex-3b9eff);
    box-shadow: 0 0 0 0.2rem var(--color-val-rgba-0-153-255-0-35);
}

/* تحسين العناوين في الوضع الفاتح */
html[data-theme="light"] body h1 {
    color: var(--color-val-hex-3b9eff);
    text-shadow: 0 2px 8px var(--color-val-rgba-0-153-255-0-3);
}

html[data-theme="light"] body h2 {
    color: var(--color-val-hex-212529);
    border-bottom-color: var(--color-val-hex-3b9eff);
}

html[data-theme="light"] body h3 {
    color: var(--color-val-hex-495057);
}

/* تحسين حالة الأرباح والخسائر في الوضع الفاتح */
html[data-theme="light"] body .pnl-positive {
    color: var(--color-val-hex-28a745);
}

html[data-theme="light"] body .pnl-negative {
    color: var(--color-val-hex-dc3545);
}

/* إصلاح حدود الجداول في الوضع الفاتح */
html[data-theme="light"] body .summary-table-container,
html[data-theme="light"] body .repurchase-table-wrapper {
    border: 1px solid var(--primary-color) !important;
    box-shadow: 0 2px 4px var(--color-val-rgba-0-0-0-0-05) !important;
}

html[data-theme="light"] body .summary-table th,
html[data-theme="light"] body .summary-table td,
html[data-theme="light"] body .repurchase-table th,
html[data-theme="light"] body .repurchase-table td {
    border-bottom: 1px solid var(--primary-color) !important;
    border-top: none !important;
    border-left: none !important;
    border-right: none !important;
}

html[data-theme="light"] body .summary-table th,
html[data-theme="light"] body .repurchase-table th {
    background-color: var(--color-val-hex-f1f5f9);
    color: var(--color-val-hex-475569);
}

html[data-theme="light"] body .pnl-neutral {
    color: var(--color-val-hex-6c757d);
}

/* تحسين قسم أداء المحفظة في الوضع الفاتح */
html[data-theme="light"] body .performance-area {
    background: var(--color-val-hex-ffffff);
    box-shadow: 0 2px 8px var(--color-val-rgba-0-0-0-0-08);
}

html[data-theme="light"] body .distribution-area {
    background: var(--color-val-hex-f8f9fa);
    box-shadow: 0 2px 8px var(--color-val-rgba-0-0-0-0-08);
    border: 1px solid var(--primary-color);
}

html[data-theme="light"] body .performance-item {
    background: var(--color-val-hex-e9ecef);
    border: 1px solid var(--primary-color);
    box-shadow: 0 2px 4px var(--color-val-rgba-0-0-0-0-08);
}

html[data-theme="light"] body .performance-item:hover {
    background: var(--color-val-hex-f8f9fa);
    border-color: var(--color-val-hex-3b9eff);
    box-shadow: 0 3px 10px var(--color-val-rgba-0-153-255-0-3);
    transform: translateY(-2px);
}

/* تحسين الإحصائيات في الوضع الفاتح */
html[data-theme="light"] body .overall-summary-section {
    background: var(--color-val-hex-ffffff);
    border: 1px solid var(--color-val-hex-dee2e6);
    box-shadow: 0 2px 8px var(--color-val-rgba-0-0-0-0-08);
}

/* تحسين عناصر Legend في الوضع الفاتح */
html[data-theme="light"] body .legend-item {
    background: var(--color-val-hex-d6dade);
    border: 1px solid var(--color-val-hex-adb5bd);
    box-shadow: 0 2px 6px var(--color-val-rgba-0-0-0-0-12);
}

html[data-theme="light"] body .legend-item:hover {
    background: var(--color-val-hex-e9ecef);
    border-color: var(--color-val-hex-3b9eff);
    box-shadow: 0 4px 12px var(--color-val-rgba-0-153-255-0-35);
    transform: translateY(-2px);
}

html[data-theme="light"] body .legend-item::before {
    background: linear-gradient(135deg, var(--color-val-rgba-0-153-255-0-3) 0%, transparent 100%);
}

html[data-theme="light"] body .legend-name {
    color: var(--color-val-hex-1a1d20);
    font-weight: 700;
}

html[data-theme="light"] body .legend-percent {
    color: var(--color-val-hex-3b9eff);
    font-weight: 700;
    text-shadow: 0 1px 2px var(--color-val-rgba-0-153-255-0-3);
}

/* تحسين Chart Container في الوضع الفاتح */
html[data-theme="light"] body .chart-container {
    background: transparent;
}

html[data-theme="light"] body .chart-center-title {
    color: var(--color-val-hex-6c757d);
}

/* تحسين حاوية التفاصيل في الوضع الفاتح */
html[data-theme="light"] body .details-content-wrapper {
    background: transparent;
}

html[data-theme="light"] body .coin-info-section,
html[data-theme="light"] body .repurchase-section,
html[data-theme="light"] body .actions-section {
    background: var(--color-val-hex-ffffff);
    border: 1px solid var(--color-val-hex-dee2e6);
    box-shadow: 0 2px 8px var(--color-val-rgba-0-0-0-0-08);
}

html[data-theme="light"] body .coin-info-section:hover,
html[data-theme="light"] body .repurchase-section:hover,
html[data-theme="light"] body .actions-section:hover {
    box-shadow: 0 4px 12px var(--color-val-rgba-255-140-0-0-12);
    border-color: var(--color-val-hex-3b9eff);
}

/* تحسين شريط التحكم في الوضع الفاتح */
html[data-theme="light"] body .controls-bar {
    background: var(--color-val-hex-ffffff);
    border: 1px solid var(--color-val-hex-dee2e6);
    box-shadow: 0 2px 8px var(--color-val-rgba-0-0-0-0-08);
}

/* تحسين حالة API في الوضع الفاتح */
html[data-theme="light"] body #apiStatus {
    color: var(--color-val-hex-6c757d);
}

/* تحسين حقول الإخراج في الوضع الفاتح */
html[data-theme="light"] body .output-field,
html[data-theme="light"] body .input-field-read-only {
    background-color: var(--color-val-hex-e9ecef);
    color: var(--color-val-hex-212529);
    border-color: var(--color-val-hex-ced4da);
    box-shadow: inset 0 1px 2px var(--color-val-rgba-0-0-0-0-05);
}

html[data-theme="light"] body .output-field:hover,
html[data-theme="light"] body .input-field-read-only:hover {
    border-color: var(--color-val-hex-3b9eff);
    background-color: var(--color-val-hex-f8f9fa);
    box-shadow: 0 2px 6px var(--color-val-rgba-0-153-255-0-3);
}

html[data-theme="light"] body #marketPriceDisplay {
    color: var(--color-val-hex-3b9eff);
    font-weight: 700;
}

html[data-theme="light"] body .sl-output {
    background-color: var(--color-val-hex-f8d7da) !important;
    color: var(--color-val-hex-721c24) !important;
    border-color: var(--color-val-hex-f5c6cb) !important;
}

/* تحسين جدول التعزيز في الوضع الفاتح */
html[data-theme="light"] body .repurchase-table {
    border: 1px solid var(--color-val-hex-dee2e6);
}

html[data-theme="light"] body .repurchase-table th {
    background-color: var(--color-val-rgba-59-130-246-0-04);
    color: var(--color-val-hex-1e293b);
    border-color: var(--color-val-rgba-59-130-246-0-1);
}

html[data-theme="light"] body .repurchase-table th:hover {
    background-color: var(--color-val-rgba-59-130-246-0-08);
    border-color: var(--color-val-rgba-59-130-246-0-18);
    color: var(--color-val-hex-3b82f6);
}

html[data-theme="light"] body .repurchase-table td {
    border-bottom: 1px solid var(--color-val-hex-e9ecef);
    color: var(--color-val-hex-212529);
}

html[data-theme="light"] body .repurchase-table tbody tr:hover {
    background-color: var(--color-val-hex-f8f9fa);
}

/* تحسين نسب الانخفاض في الوضع الفاتح - ألوان هادئة */
html[data-theme="light"] body .down-percent.positive {
    color: var(--color-val-hex-059669);
    background-color: var(--color-val-rgba-5-150-105-0-12);
}

html[data-theme="light"] body .down-percent.negative {
    color: var(--color-val-hex-dc2626);
    background-color: var(--color-val-rgba-220-38-38-0-12);
}

/* تحسين ألوان الربح والخسارة في جدول DCA للوضع الفاتح */
html[data-theme="light"] body .repurchase-table .repurchase-pnl.pnl-positive,
html[data-theme="light"] body .repurchase-table .repurchase-pnl-percent.pnl-positive {
    color: var(--color-val-hex-059669) !important;
    background-color: var(--color-val-rgba-5-150-105-0-12) !important;
}

html[data-theme="light"] body .repurchase-table .repurchase-pnl.pnl-negative,
html[data-theme="light"] body .repurchase-table .repurchase-pnl-percent.pnl-negative {
    color: var(--color-val-hex-dc2626) !important;
    background-color: var(--color-val-rgba-220-38-38-0-12) !important;
}

/* تحسين أيقونات الحذف في الوضع الفاتح */
html[data-theme="light"] body .delete-repurchase-btn {
    color: var(--color-val-hex-dc3545);
}

html[data-theme="light"] body .delete-repurchase-btn:hover {
    color: var(--color-val-hex-c82333);
    background-color: var(--color-val-hex-f8d7da);
}

/* تحسين الملخص العام في الوضع الفاتح */
html[data-theme="light"] body .summary-grid {
    background: transparent;
}

html[data-theme="light"] body .summary-item {
    background: var(--color-val-hex-ffffff);
    border: 1px solid var(--color-val-hex-e2e8f0);
    border-left: 4px solid var(--color-val-hex-3b9eff);
    box-shadow: 0 2px 8px var(--color-val-rgba-0-0-0-0-06);
}

html[data-theme="light"] body .summary-item:hover {
    background: var(--color-val-hex-fafbfc);
    border-left-color: var(--color-val-hex-3b9eff);
    box-shadow: 0 4px 12px var(--color-val-rgba-0-153-255-0-3);
    transform: translateY(-2px);
}

html[data-theme="light"] body .summary-item label {
    color: var(--color-val-hex-64748b);
}

html[data-theme="light"] body .summary-item .value {
    color: var(--color-val-hex-1e293b);
}

/* تحسين شبكة الأهداف في الوضع الفاتح */
html[data-theme="light"] body .targets-grid {
    background: transparent;
}

html[data-theme="light"] body .targets-grid .form-group label {
    color: var(--color-val-hex-6c757d);
}

/* تحسين مجموعة SL في الوضع الفاتح */
html[data-theme="light"] body .sl-group {
    border-top-color: var(--color-val-hex-dee2e6);
}

html[data-theme="light"] body .sl-input input {
    background-color: var(--color-val-hex-fff5f5);
    border-color: var(--color-val-hex-dc3545);
}

html[data-theme="light"] body .sl-input input:focus {
    border-color: var(--color-val-hex-dc3545);
    box-shadow: 0 0 0 0.2rem var(--color-val-rgba-220-53-69-0-25);
}

/* تحسين Labels في الوضع الفاتح */
html[data-theme="light"] body label {
    color: var(--color-val-hex-495057);
}

html[data-theme="light"] body .form-group label {
    color: var(--color-val-hex-495057);
}

/* تحسين Checkbox في الوضع الفاتح */
html[data-theme="light"] body input[type="checkbox"] {
    border-color: var(--color-val-hex-ced4da);
}

html[data-theme="light"] body input[type="checkbox"]:checked {
    background-color: var(--color-val-hex-3b9eff);
    border-color: var(--color-val-hex-3b9eff);
}

/* تحسين الأيقونات في الوضع الفاتح */
html[data-theme="light"] body .fas,
html[data-theme="light"] body .fab {
    color: inherit;
}

html[data-theme="light"] body h2 .fas,
html[data-theme="light"] body h3 .fas {
    color: var(--color-val-hex-3b9eff);
}

/* تحسين الروابط في الوضع الفاتح */
html[data-theme="light"] body a {
    color: var(--color-val-hex-3b9eff);
}

html[data-theme="light"] body a:hover {
    color: var(--color-val-hex-e67e00);
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: var(--bg-color);
    color: var(--text-color);
    line-height: 1.6;
    margin: 0;
    padding: 0;
    font-size: 14px;
    min-height: 100vh;
    transition: background-color 0.3s ease, color 0.3s ease;
    background-image: none;
    background-attachment: fixed;
    /* تحسين الأداء على الهواتف */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: var(--color-val-rgba-0-0-0-0);
    touch-action: manipulation;
}

/* Custom Scrollbar - Extej Style */
::-webkit-scrollbar {
    width: 12px;
    height: 12px;
}

::-webkit-scrollbar-track {
    background: var(--bg-color);
    border-radius: 10px;
}

::-webkit-scrollbar-thumb {
    background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
    border-radius: 10px;
    border: 2px solid var(--bg-color);
}

::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(135deg, var(--secondary-color) 0%, var(--color-val-hex-ffb733) 100%);
}

/* Firefox Scrollbar */
* {
    scrollbar-width: thin;
    scrollbar-color: var(--primary-color) rgb(0 0 0 / 0.1);
}

/* Scrollbar في الوضع الفاتح */
html[data-theme="light"] body ::-webkit-scrollbar-track {
    background: var(--color-val-hex-f8f9fa);
}

html[data-theme="light"] body ::-webkit-scrollbar-thumb {
    background: linear-gradient(135deg, var(--color-val-hex-3b9eff) 0%, var(--color-val-hex-3b9eff) 100%);
    border: 2px solid var(--color-val-hex-f8f9fa);
}

html[data-theme="light"] body ::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(135deg, var(--color-val-hex-e67e00) 0%, var(--color-val-hex-ff9500) 100%);
}



.page-header {
    text-align: center;
    padding: 15px 20px;
    background: linear-gradient(135deg, var(--dark-header-bg) 0%, var(--color-val-rgba-59-130-246-0-05) 100%);
    color: var(--text-light);
    font-size: 1em;
    border-bottom: 3px solid var(--secondary-color);
    box-shadow: 0 2px 6px var(--color-val-rgba-0-0-0-0-15);
}

.page-header strong {
    font-weight: var(--font-weight-semibold);
}

.page-header a {
    color: var(--header-link-color);
    text-decoration: none;
    font-weight: var(--font-weight-normal);
    margin: 0 5px;
    transition: all 0.2s ease;
}

.page-header a:hover {
    text-decoration: underline;
    color: var(--header-link-hover-color);
    text-shadow: 0 0 8px var(--color-val-rgba-59-130-246-0-3);
}

.page-header a.telegram-link {
    color: var(--telegram-link-color) !important;
    font-weight: var(--font-weight-bold) !important;
}

.page-header a.telegram-link:hover {
    text-decoration: underline;
    filter: brightness(1.2);
    text-shadow: 0 0 8px var(--color-val-rgba-59-130-246-0-5);
}

.container {
    max-width: 100%;
    width: 100%;
    margin: 12px auto 0 auto;
    padding: 20px 15px 28px 15px;
    overflow-x: hidden;
}

h1 {
    text-align: center;
    color: var(--color-val-hex-3b9eff);
    margin-top: 15px;
    margin-bottom: 35px;
    font-weight: var(--font-weight-bold);
    font-size: 2.5em;
    transition: all 0.3s ease;
    text-shadow: none;
    letter-spacing: 1.5px;
}

h2 {
    margin-top: 10px;
    color: var(--text-light);
    font-size: 1.5em;
    border-bottom: 3px solid var(--primary-color);
    padding-bottom: 12px;
    margin-bottom: 30px;
    font-weight: var(--font-weight-semibold);
    transition: all 0.3s ease;
}

h3 {
    font-size: 1.3em;
    color: var(--primary-color);
    margin-bottom: 20px;
    margin-top: 0;
    font-weight: var(--font-weight-semibold);
    transition: all 0.3s ease;
    letter-spacing: 0.8px;
}

.overall-summary-section {
    background: linear-gradient(145deg, var(--color-val-rgba-30-41-59-0-7) 0%, var(--color-val-rgba-15-23-42-0-4) 100%);
    backdrop-filter: blur(20px);
    padding: 30px;
    margin-bottom: 0;
    border-radius: 20px;
    box-shadow: 0 20px 50px var(--color-val-rgba-0-0-0-0-3);
    border: 1px solid var(--color-val-rgba-255-255-255-0-05);
    transition: all 0.3s ease;
}

.overall-summary-section:hover {
    box-shadow: 0 6px 28px var(--color-val-rgba-59-158-255-0-2);
    border-color: var(--primary-color);
    transform: translateY(-3px);
}

.summary-table-container {
    border: 1px solid var(--color-val-rgba-255-255-255-0-1);
    border-radius: 12px;
    margin-bottom: var(--layout-section-gap);
    background-color: transparent;
    transition: all 0.25s ease;
    overflow-x: auto;
    box-shadow: none;
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
    position: relative;
    max-width: 100%;
    /* ضمان عدم تجاوز عرض الشاشة */
}

.summary-table-container:hover {
    box-shadow: none;
    border-color: transparent;
}

.summary-table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    font-size: 0.95em;
    table-layout: auto;
}

.summary-table th,
.summary-table td {
    border-bottom: 1px solid var(--border-color);
    padding: 12px 15px;
    text-align: center;
    vertical-align: middle;
    transition: all 0.2s ease;
    white-space: nowrap;
    /* Improved Typography for Comfortable Numbers */
    font-family: inherit;
    /* Match Header/Body Font */
    font-feature-settings: "tnum" on, "lnum" on;
    /* Tabular & Lining Numbers */
    letter-spacing: 0.5px;
    font-weight: 600;
}

/* Remove vertical borders */
.summary-table th,
.summary-table td {
    border-right: none;
    border-left: none;
}

.summary-table th {
    padding: 14px 15px;
    background: var(--color-val-rgba-0-0-0-0-2);
    vertical-align: middle;
    position: sticky;
    top: 0;
    z-index: 10;
    backdrop-filter: blur(8px);
    /* Modern frosted effect */
    border-bottom: 1px solid var(--color-val-rgba-255-255-255-0-05);
    text-transform: uppercase;
    font-size: 0.8em;
    letter-spacing: 0.5px;
    color: var(--text-muted);
    font-weight: 600;
}

/* Sticky First Column (Coin Name) */
.summary-table th:first-child,
.summary-table td:first-child {
    position: sticky;
    right: 0;
    /* RTL Native */
    z-index: 20;
    /* Comfortable Blue Highlight for Dark Mode */
    background-color: var(--color-val-rgba-59-158-255-0-05) !important;
    backdrop-filter: blur(5px);
    border-left: 1px solid var(--border-color);
    text-align: left;
    box-shadow: 2px 0 5px var(--color-val-rgba-0-0-0-0-05);
    direction: ltr;
}

.summary-table th:first-child {
    z-index: 30;
    /* Higher than normal headers */
    background-color: var(--color-val-rgba-0-0-0-0-2);
    backdrop-filter: blur(10px);
}

.summary-table td.coin-symbol {
    width: 160px;
    min-width: 160px;
    font-weight: bold;
    display: table-cell;
    text-align: left;
    direction: ltr;
    padding-left: 25px;
    padding-right: 5px;
    /* Restore table-cell */
}

/* Allow content inside coin-symbol to align properly */
.summary-table td.coin-symbol .coin-name-wrapper {
    display: flex;
    align-items: center;
    gap: 10px;
}

.summary-table td.coin-symbol .coin-name-wrapper img {
    width: 28px !important;
    /* Slightly larger icon forced */
    height: 28px !important;
    object-fit: contain;
    transition: transform 0.2s ease;
}

.summary-table td.coin-symbol .coin-name-wrapper img:hover {
    transform: scale(1.2);
}

/* Column Hover Effect (Row Highlight is already typically handled, but we enhance it) */
.summary-table tbody tr:hover td {
    background-color: var(--color-val-rgba-59-130-246-0-05);
}

.summary-table tbody tr:hover td:first-child {
    background-color: var(--section-bg);
    /* Keep sticky bg or slightly darken? Let's use specific color */
    background-color: var(--color-val-rgba-59-130-246-0-08);
    /* Highlight matches but needs to be opaque-ish if we want to hide scroll? 
             Actually for sticky columns, transparency is tricky. Let's use a solid mixed color or just accept transparency if bg is solid.
             The parent tr has bg, td inherits? No.
             Let's force solid bg on hover for sticky col to prevent text bleed.
             */
    background-color: var(--hover-bg);
}

html[data-theme="light"] body .summary-table tbody tr:hover td:first-child {
    background-color: var(--color-val-hex-e0f2fe) !important;
    /* Comfortable Light Blue Hover */
}

/* Comfortable Highlight for Light Mode Sticky Column */
html[data-theme="light"] body .summary-table th:first-child,
html[data-theme="light"] body .summary-table td:first-child {
    background-color: var(--color-val-hex-f0f9ff) !important;
    /* Very Light Blue */
    color: var(--color-val-hex-0c4a6e);
}

.header-item {
    background-color: transparent;
    border: none;
    padding: 0;
    margin: 0;
    width: 100%;
    color: inherit;
    font-weight: inherit;
    font-size: inherit;
    text-align: inherit;
    white-space: nowrap;
    display: inline-flex;
    /* Changed from flex to center properly */
    align-items: center;
    justify-content: center;
    /* Center content in th */
    gap: 6px;
    box-shadow: none;
    cursor: default;
}

.header-item:hover {
    background-color: transparent;
    border-color: transparent;
    color: var(--primary-color);
}

.header-item i {
    margin-left: 0 !important;
    font-size: 1.1em;
    color: var(--primary-color);
}

/* Floating Row Card Style - بدون transitions */
/* Standard Table Rows - No Floating Cards */
.summary-table tbody tr {
    background-color: transparent;
    box-shadow: none;
    border-radius: 0;
}

.summary-table tbody tr td {
    background-color: transparent;
    box-shadow: none;
}

/* Zebra Striping - Subtle */
.summary-table tbody tr:nth-child(even) {
    background-color: transparent;
}

/* Light mode specific overrides */
html[data-theme="light"] body .summary-table tbody tr {
    background-color: transparent;
    box-shadow: none;
    border: none;
}

html[data-theme="light"] body .summary-table tbody tr td {
    background-color: transparent;
    box-shadow: none;
}

html[data-theme="light"] body .summary-table tbody tr:nth-child(even) {
    background-color: var(--color-val-hex-fafbfc);
}



/* Hover effect - ثابت بدون إعادة حساب التخطيط */
/* Blue glow effect on entire row hover */
.summary-table tbody tr:hover {
    box-shadow: 0 4px 12px var(--color-val-rgba-0-0-0-0-08);
    /* Row glow only */
    background-color: var(--color-val-rgba-59-158-255-0-05);
    z-index: 10;
    position: relative;
}

.summary-table tbody tr:hover td {
    background-color: transparent;
    /* Top and Bottom borders for all cells */
    box-shadow:
        inset 0 1px 0 0 var(--color-val-rgba-59-158-255-0-5),
        inset 0 -1px 0 0 var(--color-val-rgba-59-158-255-0-5);
}

/* Fixed: Apply specific hover style to sticky column to maintain opacity + effect */
/* Fixed: Apply specific hover style to sticky column to maintain opacity + effect */
/* Fixed: Apply specific hover style to sticky column (RTL Start/Right) */
.summary-table tbody tr:hover td:first-child {
    background-color: var(--section-bg) !important;
    box-shadow:
        inset 0 1px 0 0 var(--color-val-rgba-59-158-255-0-5),
        /* Top */
        inset 0 -1px 0 0 var(--color-val-rgba-59-158-255-0-5),
        /* Bottom */
        inset -1px 0 0 0 var(--color-val-rgba-59-158-255-0-5),
        /* Right Edge */
        inset 0 0 15px var(--color-val-rgba-59-158-255-0-1),
        /* Glow */
        inset 0 0 0 1000px var(--color-val-rgba-59-158-255-0-05) !important;
    /* Tint */
    z-index: 20;
    border-left: none !important;
}

/* Add Left Border to the very last cell (RTL End/Left) to close the box */
.summary-table tbody tr:hover td:last-child {
    box-shadow:
        inset 0 1px 0 0 var(--color-val-rgba-59-158-255-0-5),
        inset 0 -1px 0 0 var(--color-val-rgba-59-158-255-0-5),
        inset 1px 0 0 0 var(--color-val-rgba-59-158-255-0-5);
    /* Left Edge */
}

html[data-theme="light"] body .summary-table tbody tr:hover {
    background-color: var(--color-val-hex-ffffff) !important;
    box-shadow: 0 4px 12px var(--color-val-rgba-0-0-0-0-08);
    /* Glow only */
}

html[data-theme="light"] body .summary-table tbody tr:hover td {
    background-color: transparent;
    box-shadow:
        inset 0 1px 0 0 var(--color-val-rgba-59-130-246-0-5),
        inset 0 -1px 0 0 var(--color-val-rgba-59-130-246-0-5);
}

html[data-theme="light"] body .summary-table tbody tr:hover td:first-child {
    background-color: var(--color-val-hex-ffffff) !important;
    box-shadow:
        inset 0 1px 0 0 var(--color-val-rgba-59-130-246-0-5),
        inset 0 -1px 0 0 var(--color-val-rgba-59-130-246-0-5),
        inset -1px 0 0 0 var(--color-val-rgba-59-130-246-0-5),
        inset 0 0 15px var(--color-val-rgba-59-130-246-0-1),
        inset 0 0 0 1000px var(--color-val-rgba-59-130-246-0-05) !important;
    border-left: none !important;
}

html[data-theme="light"] body .summary-table tbody tr:hover td:last-child {
    box-shadow:
        inset 0 1px 0 0 var(--color-val-rgba-59-130-246-0-5),
        inset 0 -1px 0 0 var(--color-val-rgba-59-130-246-0-5),
        inset 1px 0 0 0 var(--color-val-rgba-59-130-246-0-5);
}



.summary-table tbody td {
    font-weight: 500;
    color: var(--text-color);
}

.summary-table .coin-symbol {
    text-align: left;
    padding-right: 15px;
    font-weight: 600;
    white-space: nowrap;
    overflow: visible;
    text-overflow: clip;
    direction: ltr;
}

.summary-table .number-col {
    font-family: 'Roboto Mono', 'SF Mono', 'Menlo', 'Monaco', 'Consolas', monospace;
    direction: ltr;
    /* Force LTR for numbers */
    text-align: center;
    /* Center align numbers */
    font-weight: 500;
    letter-spacing: -0.5px;
}

.summary-table .pnl-positive,
.totals-positive {
    color: var(--positive-color) !important;
    font-weight: 600;
}

/* Pill Shape Styles */
.pnl-pill {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    padding: 4px 10px;
    border-radius: 20px;
    font-size: 0.9em;
    font-weight: 600;
    min-width: 80px;
    transition: all 0.2s ease;
}

.pnl-pill i {
    font-size: 0.8em;
}

.pnl-pill.positive {
    background-color: var(--color-val-rgba-22-199-132-0-15);
    /* Light Green Background */
    color: var(--positive-color) !important;
}

.pnl-pill.negative {
    background-color: var(--color-val-rgba-234-57-67-0-15);
    /* Light Red Background */
    color: var(--negative-color) !important;
}

.pnl-pill.neutral {
    background-color: var(--color-val-rgba-100-116-139-0-1);
    color: var(--text-color) !important;
}

/* Light Mode Adjustments for Pills */
html[data-theme="light"] body .pnl-pill.positive {
    background-color: var(--color-val-rgba-22-199-132-0-12);
}

html[data-theme="light"] body .pnl-pill.negative {
    background-color: var(--color-val-rgba-234-57-67-0-12);
}

html[data-theme="light"] body .pnl-pill.neutral {
    background-color: var(--color-val-rgba-100-116-139-0-08);
}

.summary-table .pnl-negative,
.totals-negative {
    color: var(--negative-color) !important;
    font-weight: 600;
}

.summary-table .error {
    color: var(--negative-color);
    font-style: italic;
    font-size: 0.9em;
    font-weight: var(--font-weight-normal);
}

/* تنسيق السعر الحالي */
.summary-table td:nth-child(5) {
    color: var(--text-color);
    font-weight: 600;
}

.summary-coin-clickable {
    cursor: pointer;
    transition: all 0.2s ease;
    border-radius: 4px;
}

.summary-coin-clickable:hover {
    background-color: var(--hover-bg);
    color: var(--primary-color);
    font-weight: var(--font-weight-bold);
    box-shadow: inset 0 0 0 2px var(--primary-color);
}

/* أيقونة العملة */
.coin-icon {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    object-fit: contain;
    flex-shrink: 0;
    background: transparent;
    border: none;
    margin-left: 8px;
    vertical-align: middle;
    transition: transform 0.2s ease;
    padding: 2px;
}

.coin-icon:hover {
    transform: scale(1.1);
}

/* إذا كانت الصورة PNG/JPG نضيف خلفية وحدود */
.coin-icon[src*=".png"],
.coin-icon[src*=".jpg"] {
    background: var(--hover-bg);
    border: 1px solid var(--border-color);
}

.coin-icon-small {
    width: 20px;
    height: 20px;
}

/* Pair icon (Base + Quote) */
.coin-icon-pair {
    position: relative;
    display: inline-block;
    width: 34px;
    height: 34px;
    flex-shrink: 0;
    margin-left: 8px;
    overflow: visible;
    transition: transform 0.18s ease;
}

.coin-icon-pair .coin-icon-base-wrap {
    position: absolute;
    left: 0;
    top: 0;
    width: 28px;
    height: 28px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

.coin-icon-pair .coin-icon-quote-wrap {
    position: absolute;
    right: 0;
    bottom: 0;
    width: 18px;
    height: 18px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    background: var(--section-bg);
    border: 1px solid var(--section-bg);
    box-shadow: 0 0 0 1px var(--border-color);
    z-index: 2;
}

.coin-icon-pair .coin-icon-base-wrap>.coin-icon,
.coin-icon-pair .coin-icon-base-wrap>.coin-icon-fallback {
    width: 100% !important;
    height: 100% !important;
    margin-left: 0 !important;
    padding: 1px !important;
}

.coin-icon-pair .coin-icon-quote-wrap>.coin-icon,
.coin-icon-pair .coin-icon-quote-wrap>.coin-icon-fallback {
    width: 100% !important;
    height: 100% !important;
    margin-left: 0 !important;
    padding: 0 !important;
}

.coin-icon-pair:hover {
    transform: scale(1.06);
}

/* Prevent child icon hover scale from clipping; scale the pair wrapper instead */
.coin-icon-pair .coin-icon:hover,
.coin-icon-pair .coin-icon-fallback:hover {
    transform: none !important;
}

.summary-table td.coin-symbol .coin-name-wrapper .coin-icon-pair {
    width: 34px;
    height: 34px;
}

.summary-table td.coin-symbol .coin-name-wrapper .coin-icon-pair .coin-icon-base-wrap {
    width: 28px;
    height: 28px;
}

.summary-table td.coin-symbol .coin-name-wrapper .coin-icon-pair .coin-icon-quote-wrap {
    width: 18px;
    height: 18px;
}

.summary-table td.coin-symbol .coin-name-wrapper .coin-icon-pair .coin-icon-base-wrap>.coin-icon,
.summary-table td.coin-symbol .coin-name-wrapper .coin-icon-pair .coin-icon-base-wrap>.coin-icon-fallback,
.summary-table td.coin-symbol .coin-name-wrapper .coin-icon-pair .coin-icon-quote-wrap>.coin-icon,
.summary-table td.coin-symbol .coin-name-wrapper .coin-icon-pair .coin-icon-quote-wrap>.coin-icon-fallback {
    width: 100% !important;
    height: 100% !important;
    margin-left: 0 !important;
}

.summary-table td.coin-symbol .coin-name-wrapper .coin-icon-pair .coin-icon-quote-wrap>.coin-icon-fallback {
    font-size: 9px !important;
    border-width: 1px;
}

.summary-table td.coin-symbol .coin-name-wrapper {
    overflow: visible;
    justify-content: flex-start !important;
    direction: rtl;
}

.summary-table td.coin-symbol .coin-name-wrapper > .coin-label {
    min-width: 0;
    flex: 1;
    direction: ltr;
    text-align: left;
}

/* حاوية اسم العملة مع الأيقونة */
.coin-name-wrapper {
    display: flex;
    width: 100%;
    justify-content: flex-start;
    align-items: center;
    gap: 8px;
    white-space: nowrap;
    overflow: hidden;
}

.coin-name-wrapper > .coin-label {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    order: 0;
}

/* أيقونة العملة الافتراضية */
.coin-icon-fallback {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: 700;
    font-size: 12px;
    flex-shrink: 0;
    margin-left: 8px;
    vertical-align: middle;
    box-shadow: 0 2px 8px var(--color-val-rgba-0-0-0-0-2);
    border: 2px solid var(--color-val-rgba-255-255-255-0-3);
    transition: transform 0.2s ease;
    text-shadow: 0 1px 2px var(--color-val-rgba-0-0-0-0-3);
}

.coin-icon-fallback:hover {
    transform: scale(1.1);
}

/* في الوضع الفاتح */
html[data-theme="light"] body .coin-icon {
    border-color: var(--color-val-rgba-0-0-0-0-1);
    background: var(--color-val-rgba-255-255-255-0-5);
}

html[data-theme="light"] body .coin-icon-pair .coin-icon-quote-wrap {
    background: var(--color-val-hex-ffffff);
    border-color: var(--color-val-hex-ffffff);
}

html[data-theme="light"] body .coin-icon-fallback {
    border-color: var(--color-val-rgba-255-255-255-0-5);
    box-shadow: 0 2px 8px var(--color-val-rgba-0-0-0-0-15);
}

.coin-selected {
    position: relative;
    background: linear-gradient(135deg, var(--color-val-rgba-239-68-68-0-28), var(--color-val-rgba-220-38-38-0-18)) !important;
    color: var(--color-val-hex-fff) !important;
    font-weight: var(--font-weight-bold);
    border: 1px solid var(--color-val-rgba-239-68-68-0-5);
    box-shadow:
        0 8px 18px var(--color-val-rgba-239-68-68-0-25),
        inset 0 0 0 1px var(--color-val-rgba-255-255-255-0-18);
    text-shadow: 0 1px 6px var(--color-val-rgba-0-0-0-0-35);
    border-radius: 10px;
    overflow: hidden;
}

.coin-selected::after {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(circle at 20% 20%, var(--color-val-rgba-255-255-255-0-18), transparent 60%);
    opacity: 0.6;
    pointer-events: none;
}

.coin-selected .coin-icon,
.coin-selected .coin-icon-fallback {
    border-color: var(--color-val-rgba-255-255-255-0-6) !important;
    box-shadow: 0 0 12px var(--color-val-rgba-239-68-68-0-35) !important;
}

.select-mode-active {
    background-color: var(--secondary-color) !important;
}


.summary-totals {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px;
    background: linear-gradient(135deg, var(--color-val-rgba-59-130-246-0-03) 0%, var(--color-val-rgba-6-182-212-0-02) 100%);
    padding: 18px 20px;
    border-radius: 10px;
    margin-top: 20px;
    border: 1px solid var(--border-color);
    font-weight: var(--font-weight-bold);
    text-align: center;
}

.summary-totals:hover {
    border-color: var(--secondary-color);
    box-shadow: 0 2px 6px var(--color-val-rgba-6-182-212-0-08);
}

.summary-totals div {
    display: flex;
    flex-direction: column;
    flex-basis: auto;
    flex-grow: auto;
    padding: 14px 12px;
    border-radius: 8px;
    transition: all 0.3s ease;
    background-color: var(--color-val-rgba-59-130-246-0-02);
    border: 1px solid var(--color-val-rgba-59-130-246-0-08);
}

.summary-totals div:hover {
    background-color: var(--color-val-rgba-59-130-246-0-08);
    border-color: var(--primary-color);
    box-shadow: 0 3px 10px var(--color-val-rgba-0-153-255-0-3);
    transform: translateY(-2px);
}

.summary-totals label {
    font-size: 0.95em;
    color: var(--text-muted);
    margin-bottom: 8px;
    font-weight: var(--font-weight-semibold);
    transition: color 0.3s ease;
}

.summary-totals span {
    font-size: 1.4em;
    font-family: 'Roboto Mono', 'Consolas', 'Monaco', monospace;
    font-weight: var(--font-weight-bold);
    transition: color 0.3s ease;
}

.controls-bar {
    display: flex;
    gap: 15px;
    margin-bottom: 0;
    background: linear-gradient(145deg, var(--color-val-rgba-30-41-59-0-7) 0%, var(--color-val-rgba-15-23-42-0-4) 100%);
    backdrop-filter: blur(20px);
    padding: 20px 25px;
    border-radius: 20px;
    box-shadow: 0 20px 50px var(--color-val-rgba-0-0-0-0-3);
    border: 1px solid var(--color-val-rgba-255-255-255-0-05);
    align-items: center;
    justify-content: center;
    /* Center everything */
    flex-wrap: wrap;
    transition: all 0.3s ease;
}

.controls-bar:hover {
    box-shadow: 0 3px 8px var(--color-val-rgba-59-130-246-0-08);
    border-color: var(--primary-color);
}

/* أقسام التحكم */
.controls-left {
    display: flex;
    gap: 12px;
    align-items: center;
    flex: 0 0 auto;
    justify-content: center;
    /* Center inputs if wrapped */
}

.controls-center {
    display: none;
    /* Hide if unused */
}

.controls-right {
    display: flex;
    gap: 8px;
    align-items: center;
    flex: 0 0 auto;
    flex-wrap: wrap;
    justify-content: center;
    /* Center buttons */
}

.controls-bar:has(button#cancelSelectBtn:not([style*="display: none"])) {
    background: linear-gradient(135deg, var(--color-val-rgba-6-182-212-0-03) 0%, var(--color-val-rgba-59-130-246-0-02) 100%);
    border-color: var(--secondary-color);
    box-shadow: 0 2px 8px var(--color-val-rgba-6-182-212-0-1);
}

/* صفوف التحكم */
.controls-row {
    display: flex;
    gap: 12px;
    align-items: center;
    flex-wrap: wrap;
    width: 100%;
    justify-content: center;
    /* Center row content */
}

/* مجموعات الإدخال */
.input-group {
    display: flex;
    gap: 8px;
    align-items: center;
}

.input-group label {
    font-weight: var(--font-weight-semibold);
    color: var(--primary-color);
    white-space: nowrap;
    font-size: 0.9em;
}

.input-group select,
.input-group input[type="text"] {
    padding: 10px 12px;
    border: 1px solid var(--input-border);
    border-radius: 6px;
    font-size: 0.9em;
    background-color: var(--input-bg);
    color: var(--text-color);
    min-width: 140px;
}

.input-group button {
    padding: 10px 14px;
    height: 40px;
    min-width: 45px;
}

/* مجموعة الحالة */
.status-group {
    display: flex;
    gap: 15px;
    align-items: center;
    margin-left: auto;
    padding: 0 10px;
}

.pro-search {
    position: relative;
    flex-grow: 1;
    max-width: 450px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.compact-chart-btn {
    height: 36px !important;
    min-width: auto !important;
    padding: 0 16px !important;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    background: var(--color-val-rgba-59-158-255-0-1);
    color: var(--primary-color);
    border: 1px solid var(--color-val-rgba-59-158-255-0-2);
    transition: all 0.2s ease;
    margin-right: auto;
    font-weight: 600;
    font-size: 0.9em;
}

.toolbar-controls {
    display: flex;
    align-items: center;
    width: 100%;
}

.compact-chart-btn:hover:not(:disabled) {
    background: var(--color-val-rgba-59-158-255-0-2);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px var(--color-val-rgba-59-158-255-0-15);
}

.compact-chart-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    background: var(--color-val-rgba-255-255-255-0-05);
    color: var(--text-muted);
    border-color: transparent;
}

#apiStatus {
    font-size: 0.9em;
    color: var(--text-light);
    /* Brighter text */
    white-space: normal;
    overflow-wrap: anywhere;
    word-break: break-word;
    /* Beautiful Container Style */
    background-color: var(--color-val-rgba-59-158-255-0-1) !important;
    border: 1px solid var(--color-val-rgba-59-158-255-0-2) !important;
    padding: 8px 16px !important;
    border-radius: 50px !important;
    /* Pill shape */
    backdrop-filter: blur(5px);
    box-shadow: 0 2px 10px var(--color-val-rgba-0-0-0-0-1);
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    line-height: 1.4;
    max-width: 100%;
    min-width: 0;
    /* Ensure it respects padding/borders */
}

#apiStatus:hover {
    background-color: var(--color-val-rgba-59-158-255-0-15) !important;
    border-color: var(--color-val-rgba-59-158-255-0-3) !important;
    transform: translateY(-1px);
}

/* زر التحديث */
.refresh-btn {
    padding: 10px 14px !important;
    height: 40px !important;
    min-width: 45px !important;
}

/* السطر الأول - الـ inputs */
.controls-bar label:first-of-type,
.controls-bar select,
.controls-bar label:nth-of-type(2),
.controls-bar input[type="text"] {
    grid-row: 1;
}

/* السطر الثاني - الأزرار والحالة */
.controls-bar button,
.controls-bar #apiStatus,
.controls-bar #coinStatus {
    grid-row: 2;
}

/* جعل الأزرار والحالة في سطر واحد */
.controls-bar>button:nth-of-type(n+3),
.controls-bar>#apiStatus,
.controls-bar>#coinStatus {
    grid-column: auto;
}

.controls-bar label {
    font-weight: var(--font-weight-semibold);
    margin-left: 5px;
    color: var(--primary-color);
    flex-shrink: 0;
    font-size: 0.8em;
    white-space: nowrap;
    grid-row: 1;
}

.controls-bar select,
.controls-bar input[type="text"] {
    padding: 7px 10px;
    border: 1px solid var(--input-border);
    border-radius: 5px;
    font-size: 0.85em;
    min-width: 110px;
    background-color: var(--input-bg);
    color: var(--text-color);
    box-shadow: inset 0 1px 2px var(--color-val-rgba-0-0-0-0-05);
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.2s ease, box-shadow 0.2s ease;
    grid-row: 1;
}

.controls-bar select:focus,
.controls-bar input[type="text"]:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 2px var(--color-val-rgba-59-130-246-0-1), inset 0 1px 2px var(--color-val-rgba-0-0-0-0-05);
}

/* الأزرار الأولى في السطر الثاني */
.controls-bar>button:nth-of-type(1),
.controls-bar>button:nth-of-type(2) {
    grid-row: 2;
}

/* مجموعات الأزرار */
.button-group {
    display: flex;
    gap: 8px;
    align-items: center;
    flex-wrap: wrap;
}

/* Unified Button System - Neon Glassmorphism */
button,
.btn {
    font-family: inherit;
    border: none;
    outline: none;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 10px 20px;
    border-radius: 12px;
    font-weight: 600;
    font-size: 0.9em;
    position: relative;
    overflow: hidden;
    /* Glass Effect Base */
    background: var(--color-val-rgba-255-255-255-0-03);
    border: 1px solid var(--color-val-rgba-255-255-255-0-05);
    color: var(--text-light);
    backdrop-filter: blur(5px);
    box-shadow: 0 4px 6px var(--color-val-rgba-0-0-0-0-1);
    /* Mobile Optimization */
    min-height: 42px;
    -webkit-tap-highlight-color: transparent;
    user-select: none;
}

/* Button Variants */

/* Primary - Blue Neon */
.btn-primary,
button.btn-primary {
    background: linear-gradient(135deg, var(--color-val-rgba-59-158-255-0-1) 0%, var(--color-val-rgba-59-158-255-0-05) 100%);
    border-color: var(--color-val-rgba-59-158-255-0-3);
    color: var(--color-val-hex-3b9eff);
    box-shadow: 0 0 15px var(--color-val-rgba-59-158-255-0-1), inset 0 0 10px var(--color-val-rgba-59-158-255-0-05);
}

.btn-primary:hover:not(:disabled),
button.btn-primary:hover:not(:disabled) {
    background: linear-gradient(135deg, var(--color-val-rgba-59-158-255-0-2) 0%, var(--color-val-rgba-59-158-255-0-1) 100%);
    border-color: var(--color-val-hex-3b9eff);
    color: var(--color-val-hex-ffffff);
    box-shadow: 0 0 25px var(--color-val-rgba-59-158-255-0-4), inset 0 0 15px var(--color-val-rgba-59-158-255-0-2);
    transform: translateY(-2px) scale(1.02);
    text-shadow: 0 0 8px var(--color-val-rgba-59-158-255-0-8);
}

/* Success - Green Neon */
.btn-success,
button.btn-success {
    background: linear-gradient(135deg, var(--color-val-rgba-0-212-170-0-1) 0%, var(--color-val-rgba-0-212-170-0-05) 100%);
    border-color: var(--color-val-rgba-0-212-170-0-3);
    color: var(--color-val-hex-00d4aa);
    box-shadow: 0 0 15px var(--color-val-rgba-0-212-170-0-1), inset 0 0 10px var(--color-val-rgba-0-212-170-0-05);
}

.btn-success:hover:not(:disabled),
button.btn-success:hover:not(:disabled) {
    background: linear-gradient(135deg, var(--color-val-rgba-0-212-170-0-2) 0%, var(--color-val-rgba-0-212-170-0-1) 100%);
    border-color: var(--color-val-hex-00d4aa);
    color: var(--color-val-hex-ffffff);
    box-shadow: 0 0 25px var(--color-val-rgba-0-212-170-0-4), inset 0 0 15px var(--color-val-rgba-0-212-170-0-2);
    transform: translateY(-2px) scale(1.02);
    text-shadow: 0 0 8px var(--color-val-rgba-0-212-170-0-8);
}

/* Danger - Red Neon */
.btn-danger,
button.btn-danger {
    background: linear-gradient(135deg, var(--color-val-rgba-255-71-87-0-1) 0%, var(--color-val-rgba-255-71-87-0-05) 100%);
    border-color: var(--color-val-rgba-255-71-87-0-3);
    color: var(--color-val-hex-ff4757);
    box-shadow: 0 0 15px var(--color-val-rgba-255-71-87-0-1), inset 0 0 10px var(--color-val-rgba-255-71-87-0-05);
}

.btn-danger:hover:not(:disabled),
button.btn-danger:hover:not(:disabled) {
    background: linear-gradient(135deg, var(--color-val-rgba-255-71-87-0-2) 0%, var(--color-val-rgba-255-71-87-0-1) 100%);
    border-color: var(--color-val-hex-ff4757);
    color: var(--color-val-hex-ffffff);
    box-shadow: 0 0 25px var(--color-val-rgba-255-71-87-0-4), inset 0 0 15px var(--color-val-rgba-255-71-87-0-2);
    transform: translateY(-2px) scale(1.02);
    text-shadow: 0 0 8px var(--color-val-rgba-255-71-87-0-8);
}

/* Warning - Orange/Yellow Neon */
.btn-warning,
button.btn-warning {
    background: linear-gradient(135deg, var(--color-val-rgba-255-165-2-0-1) 0%, var(--color-val-rgba-255-165-2-0-05) 100%);
    border-color: var(--color-val-rgba-255-165-2-0-3);
    color: var(--color-val-hex-ffa502);
    box-shadow: 0 0 15px var(--color-val-rgba-255-165-2-0-1), inset 0 0 10px var(--color-val-rgba-255-165-2-0-05);
}

.btn-warning:hover:not(:disabled),
button.btn-warning:hover:not(:disabled) {
    background: linear-gradient(135deg, var(--color-val-rgba-255-165-2-0-2) 0%, var(--color-val-rgba-255-165-2-0-1) 100%);
    border-color: var(--color-val-hex-ffa502);
    color: var(--color-val-hex-ffffff);
    box-shadow: 0 0 25px var(--color-val-rgba-255-165-2-0-4), inset 0 0 15px var(--color-val-rgba-255-165-2-0-2);
    transform: translateY(-2px) scale(1.02);
    text-shadow: 0 0 8px var(--color-val-rgba-255-165-2-0-8);
}

/* Info - Sky Blue Neon */
.btn-info,
button.btn-info {
    background: linear-gradient(135deg, var(--color-val-rgba-13-202-240-0-1) 0%, var(--color-val-rgba-13-202-240-0-05) 100%);
    border-color: var(--color-val-rgba-13-202-240-0-3);
    color: var(--color-val-hex-0dcaf0);
    box-shadow: 0 0 15px var(--color-val-rgba-13-202-240-0-1), inset 0 0 10px var(--color-val-rgba-13-202-240-0-05);
}

.btn-info:hover:not(:disabled),
button.btn-info:hover:not(:disabled) {
    background: linear-gradient(135deg, var(--color-val-rgba-13-202-240-0-2) 0%, var(--color-val-rgba-13-202-240-0-1) 100%);
    border-color: var(--color-val-hex-0dcaf0);
    color: var(--color-val-hex-ffffff);
    box-shadow: 0 0 25px var(--color-val-rgba-13-202-240-0-4), inset 0 0 15px var(--color-val-rgba-13-202-240-0-2);
    transform: translateY(-2px) scale(1.02);
    text-shadow: 0 0 8px var(--color-val-rgba-13-202-240-0-8);
}

/* Secondary - Grey/Muted Neon */
.btn-secondary,
button.btn-secondary {
    background: linear-gradient(135deg, var(--color-val-rgba-108-117-125-0-1) 0%, var(--color-val-rgba-108-117-125-0-05) 100%);
    border-color: var(--color-val-rgba-108-117-125-0-3);
    color: var(--color-val-hex-aab2bd);
    box-shadow: 0 0 10px var(--color-val-rgba-108-117-125-0-1);
}

.btn-secondary:hover:not(:disabled),
button.btn-secondary:hover:not(:disabled) {
    background: linear-gradient(135deg, var(--color-val-rgba-108-117-125-0-2) 0%, var(--color-val-rgba-108-117-125-0-1) 100%);
    border-color: var(--color-val-hex-ced4da);
    color: var(--color-val-hex-ffffff);
    box-shadow: 0 0 20px var(--color-val-rgba-108-117-125-0-3);
    transform: translateY(-2px) scale(1.02);
}

/* Active State / Pressed */
button:active:not(:disabled),
.btn:active:not(:disabled) {
    transform: translateY(1px) scale(0.98) !important;
    box-shadow: 0 0 10px var(--color-val-rgba-0-0-0-0-2) !important;
    filter: brightness(0.9);
}

/* Disabled State */
button:disabled,
.btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    background: var(--color-val-rgba-255-255-255-0-02) !important;
    border-color: var(--color-val-rgba-255-255-255-0-05) !important;
    color: var(--color-val-rgba-255-255-255-0-3) !important;
    box-shadow: none !important;
    transform: none !important;
    pointer-events: none;
}

/* Light Mode Overrides */
html[data-theme="light"] body button,
html[data-theme="light"] body .btn {
    background: var(--color-val-hex-ffffff);
    border-color: var(--color-val-hex-e2e8f0);
    color: var(--color-val-hex-475569);
    box-shadow: 0 2px 4px var(--color-val-rgba-0-0-0-0-05);
}

html[data-theme="light"] body .btn-primary,
html[data-theme="light"] body button.btn-primary {
    background: var(--color-val-hex-eff6ff);
    border-color: var(--color-val-hex-bfdbfe);
    color: var(--color-val-hex-2563eb);
    box-shadow: 0 2px 4px var(--color-val-rgba-37-99-235-0-1);
}

html[data-theme="light"] body .btn-primary:hover:not(:disabled),
html[data-theme="light"] body button.btn-primary:hover:not(:disabled) {
    background: var(--color-val-hex-3b82f6);
    color: var(--color-val-hex-ffffff);
    border-color: var(--color-val-hex-3b82f6);
    box-shadow: 0 4px 12px var(--color-val-rgba-37-99-235-0-25);
}

html[data-theme="light"] body .btn-success,
html[data-theme="light"] body button.btn-success {
    background: var(--color-val-hex-f0fdf4);
    border-color: var(--color-val-hex-bbf7d0);
    color: var(--color-val-hex-16a34a);
    box-shadow: 0 2px 4px var(--color-val-rgba-22-163-74-0-1);
}

html[data-theme="light"] body .btn-success:hover:not(:disabled),
html[data-theme="light"] body button.btn-success:hover:not(:disabled) {
    background: var(--color-val-hex-22c55e);
    color: var(--color-val-hex-ffffff);
    border-color: var(--color-val-hex-22c55e);
    box-shadow: 0 4px 12px var(--color-val-rgba-22-197-94-0-25);
}

html[data-theme="light"] body .btn-danger,
html[data-theme="light"] body button.btn-danger {
    background: var(--color-val-hex-fef2f2);
    border-color: var(--color-val-hex-fecaca);
    color: var(--color-val-hex-dc2626);
    box-shadow: 0 2px 4px var(--color-val-rgba-220-38-38-0-1);
}

html[data-theme="light"] body .btn-danger:hover:not(:disabled),
html[data-theme="light"] body button.btn-danger:hover:not(:disabled) {
    background: var(--color-val-hex-ef4444);
    color: var(--color-val-hex-ffffff);
    border-color: var(--color-val-hex-ef4444);
    box-shadow: 0 4px 12px var(--color-val-rgba-239-68-68-0-25);
}

html[data-theme="light"] body .btn-warning,
html[data-theme="light"] body button.btn-warning {
    background: var(--color-val-hex-fffbeb);
    border-color: var(--color-val-hex-fde68a);
    color: var(--color-val-hex-d97706);
}

html[data-theme="light"] body .btn-warning:hover:not(:disabled),
html[data-theme="light"] body button.btn-warning:hover:not(:disabled) {
    background: var(--color-val-hex-f59e0b);
    color: var(--color-val-hex-ffffff);
    border-color: var(--color-val-hex-f59e0b);
}

html[data-theme="light"] body .btn-secondary,
html[data-theme="light"] body button.btn-secondary {
    background: var(--color-val-hex-f8fafc);
    border-color: var(--color-val-hex-e2e8f0);
    color: var(--color-val-hex-64748b);
}

html[data-theme="light"] body .btn-secondary:hover:not(:disabled),
html[data-theme="light"] body button.btn-secondary:hover:not(:disabled) {
    background: var(--color-val-hex-64748b);
    color: var(--color-val-hex-ffffff);
    border-color: var(--color-val-hex-475569);
}

/* Animations using specific keyframes if needed in future */
@keyframes pulse-glow {
    0% {
        box-shadow: 0 0 0 0 var(--color-val-rgba-59-158-255-0-4);
    }

    70% {
        box-shadow: 0 0 0 10px var(--color-val-rgba-59-158-255-0);
    }

    100% {
        box-shadow: 0 0 0 0 var(--color-val-rgba-59-158-255-0);
    }
}

/* Specific overrides for existing classes to ensure compatibility */
.button-group {
    display: flex;
    gap: 8px;
    align-items: center;
    flex-wrap: wrap;
}

.controls-bar button {
    /* Inherit mostly, just layout adjustments */
}

/* Toggle Theme Button Specific */
.btn-theme {
    background: transparent;
    border: 1px solid var(--border-color);
}

/* حالة الاختيار النشطة */
.controls-bar button.btn-info.select-mode-active {
    background-color: var(--color-val-rgba-13-202-240-0-2);
    box-shadow: 0 0 15px var(--color-val-rgba-13-202-240-0-6);
    border-color: var(--color-val-hex-0dcaf0);
}

/* حالة الإلغاء النشطة */
.controls-bar button.btn-warning.select-mode-active {
    background-color: var(--color-val-rgba-255-165-2-0-2);
    box-shadow: 0 0 15px var(--color-val-rgba-255-165-2-0-6);
    border-color: var(--color-val-hex-ffa502);
    color: var(--color-val-hex-ffa502);
}

/* تأثيرات الأزرار عند الإظهار/الإخفاء */
.controls-bar button#deleteSelectedBtn,
.controls-bar button#cancelSelectBtn {
    animation: slideIn 0.3s ease forwards;
}

@keyframes slideIn {
    from {
        opacity: 0;
        transform: scale(0.9);
    }

    to {
        opacity: 1;
        transform: scale(1);
    }
}

@keyframes fadeOut {
    from {
        opacity: 1;
    }

    to {
        opacity: 0;
    }
}

/* تنسيق الحالة والعدد */
.controls-bar #apiStatus,
.controls-bar #coinStatus {
    font-size: 0.9em;
    color: var(--text-muted);
    padding: 8px 12px;
    background-color: var(--table-header-bg);
    border-radius: 4px;
    border: 1px solid var(--border-color);
    transition: all 0.3s ease;
}

.controls-bar:has(button#cancelSelectBtn:not([style*="display: none"])) #apiStatus,
.controls-bar:has(button#cancelSelectBtn:not([style*="display: none"])) #coinStatus {
    background-color: var(--color-val-rgba-13-202-240-0-1);
    border-color: var(--color-val-rgba-13-202-240-0-3);
    color: var(--primary-color);
}

/* استجابة للشاشات الصغيرة */
@media (max-width: 1200px) {
    .controls-bar {
        gap: 15px;
        padding: 12px 14px;
    }

    .controls-center {
        gap: 15px;
        padding: 0 15px;
    }

    .controls-right {
        gap: 6px;
    }
}

@media (max-width: 992px) {
    .controls-bar {
        flex-wrap: wrap;
        gap: 12px;
    }

    .controls-left {
        gap: 10px;
        flex: 1 1 auto;
        min-width: 250px;
    }

    .controls-center {
        flex: 1 1 auto;
        border-left: none;
        border-right: none;
        padding: 0 10px;
        gap: 15px;
    }

    .controls-right {
        flex: 1 1 100%;
        gap: 6px;
        justify-content: flex-start;
    }
}

@media (max-width: 768px) {
    .controls-bar {
        flex-direction: column;
        gap: 10px;
        padding: 10px 12px;
    }

    .controls-left {
        width: 100%;
        gap: 8px;
    }

    .controls-center {
        width: 100%;
        gap: 12px;
        padding: 8px 0;
        border: none;
    }

    .controls-right {
        width: 100%;
        gap: 6px;
        justify-content: flex-start;
    }

    .input-group label {
        font-size: 0.85em;
    }

    .input-group select,
    .input-group input[type="text"] {
        font-size: 0.85em;
        min-width: 110px;
        padding: 8px 10px;
    }

    .controls-bar button {
        padding: 8px 12px;
        font-size: 0.85em;
        height: 36px;
        min-width: 85px;
    }

    .controls-center>div {
        font-size: 0.8em;
    }
}

#apiStatus {
    flex-grow: 1;
    text-align: left;
    font-size: 0.8em;
    color: var(--text-muted);
    margin: 0 8px;
    flex-shrink: 1;
    min-width: 0;
    max-width: 100%;
    transition: color 0.3s ease;
}

#coinStatus {
    font-size: 0.8em;
    color: var(--text-muted);
    flex-shrink: 0;
    transition: color 0.3s ease;
    font-weight: var(--font-weight-normal);
}


.details-content-wrapper {
    display: grid;
    grid-template-columns: 0.8fr 1.5fr 1fr;
    gap: var(--layout-section-gap);
    align-items: flex-start;
}

.section {
    background: linear-gradient(145deg, var(--color-val-rgba-30-41-59-0-7) 0%, var(--color-val-rgba-15-23-42-0-4) 100%);
    backdrop-filter: blur(20px);
    padding: 30px;
    border-radius: 20px;
    border: 1px solid var(--color-val-rgba-255-255-255-0-05);
    box-shadow: 0 20px 50px var(--color-val-rgba-0-0-0-0-3);
    transition: all 0.3s ease;
    height: 100%;
    display: flex;
    flex-direction: column;
    margin-bottom: 0;
}

.section:hover {
    box-shadow: 0 6px 28px var(--color-val-rgba-0-153-255-0-3);
    border-color: var(--primary-color);
    transform: translateY(-3px);
}

.section>*:last-child {
    margin-bottom: 0;
}

.form-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px 15px;
    margin-bottom: 25px;
}

.form-group {
    display: flex;
    flex-direction: column;
    transition: all 0.3s ease;
}

label {
    margin-bottom: 8px;
    font-weight: var(--font-weight-semibold);
    color: var(--text-muted);
    font-size: 0.9em;
    transition: color 0.3s ease;
}

input[type="text"],
input[type="number"],
select {
    padding: 10px 14px;
    border: 1px solid var(--input-border);
    border-radius: 8px;
    font-size: 1em;
    box-sizing: border-box;
    width: 100%;
    background-color: var(--input-bg);
    color: var(--text-color);
    box-shadow: 0 2px 8px var(--color-val-rgba-0-0-0-0-2);
    transition: all 0.3s ease;
    font-weight: var(--font-weight-normal);
}

input[type="text"]:hover,
input[type="number"]:hover,
select:hover {
    border-color: var(--primary-color);
    box-shadow: 0 4px 12px var(--color-val-rgba-0-153-255-0-3);
}

input[type="number"] {
    appearance: textfield;
    -moz-appearance: textfield;
}

input[type=number]::-webkit-inner-spin-button,
input[type=number]::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
}

input[type="text"]:focus,
input[type="number"]:focus,
select:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px var(--color-val-rgba-0-153-255-0-3);
}

.output-field,
.input-field-read-only {
    padding: 10px 14px;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    background-color: var(--output-field-bg);
    font-weight: var(--font-weight-bold);
    min-height: 42px;
    display: flex;
    align-items: center;
    color: var(--output-field-text);
    font-size: 1em;
    word-break: break-all;
    box-sizing: border-box;
    width: 100%;
    font-family: 'Roboto Mono', 'Consolas', 'Monaco', monospace;
    transition: all 0.3s ease;
    direction: ltr;
    text-align: left;
    box-shadow: inset 0 1px 2px var(--color-val-rgba-0-0-0-0-08);
}

.output-field:hover,
.input-field-read-only:hover {
    border-color: var(--primary-color);
    box-shadow: inset 0 1px 2px var(--color-val-rgba-0-0-0-0-08), 0 2px 6px var(--color-val-rgba-59-130-246-0-08);
}

.output-field.error {
    color: var(--negative-color);
    background-color: var(--color-val-rgba-239-68-68-0-05);
    border-color: var(--color-val-rgba-239-68-68-0-2);
}

.output-field.error:hover {
    border-color: var(--negative-color);
    box-shadow: inset 0 1px 2px var(--color-val-rgba-0-0-0-0-08), 0 2px 6px var(--color-val-rgba-239-68-68-0-1);
}

.market-price-display-group {
    grid-column: span 2;
    display: flex;
    align-items: flex-end;
    gap: 10px;
    /* From File 2 */
    margin-top: 10px;
    /* From File 2 */
}

.market-price-display-group .form-group {
    flex-grow: 1;
    margin-bottom: 0;
}

#marketPriceDisplay {
    font-size: 1.1em;
    font-weight: var(--font-weight-bold);
    color: var(--primary-color);
    /* From File 2 */

    /* From File 2 */
}

.auto-refresh-group {
    grid-column: span 2;
    display: flex;
    align-items: center;
    gap: 10px;
    /* From File 2 */
    font-size: 0.95em;
    margin-top: 10px;
    /* From File 2 */
    background-color: var(--output-field-bg);
    /* From File 2 */
    padding: 8px 12px;
    /* From File 2 */
    border-radius: 6px;
    /* From File 2 */
}

.auto-refresh-group input[type="checkbox"] {
    margin-left: 5px;
    width: 16px;
    height: 16px;
    accent-color: var(--primary-color);
}

.auto-refresh-group label {
    margin-bottom: 0;
    font-weight: var(--font-weight-normal);
    color: var(--text-muted);
}

/* --- Target/Stop Loss Section Styles --- MODIFIED FOR STACKING TARGETS --- */
#targetsSection {
    margin-top: 30px;
    /* From File 2 */
    padding-top: 20px;
    /* From File 2 */
    border-top: 1px dashed var(--border-color);
    transition: border-color 0.3s ease;
}

.targets-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 16px;
}

.target-pair {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    align-items: end;
    background-color: var(--section-bg);
    padding: 16px 18px;
    border-radius: 10px;
    border: 1px solid var(--border-color);
    border-left: 4px solid var(--color-val-hex-3b9eff);
    transition: all 0.25s ease;
    box-shadow: 0 2px 8px var(--color-val-rgba-0-0-0-0-08);
}

.target-pair:hover {
    border-left-color: var(--color-val-hex-ffb733);
    box-shadow: 0 4px 12px var(--color-val-rgba-255-165-2-0-15);
    transform: translateY(-2px);
}

.targets-grid label {
    font-size: 0.85em;
    text-align: center;
    margin-bottom: 6px;
    display: block;
    font-weight: var(--font-weight-semibold);
    color: var(--text-muted);
}

.targets-grid .form-group {
    margin-bottom: 0;
}

.targets-grid input[type="number"] {
    text-align: center;
    padding: 8px 10px;
}

.targets-grid .output-field {
    font-size: 1em;
    text-align: center;
    padding: 9px 10px;
    min-height: 38px;
    font-weight: var(--font-weight-bold);
}

.sl-group {
    margin-top: 16px;
    padding: 16px 18px;
    background-color: var(--color-val-rgba-220-53-69-0-03);
    border-radius: 10px;
    border: 1px solid var(--color-val-rgba-220-53-69-0-15);
    border-left: 4px solid var(--color-val-hex-ff4757);
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    transition: all 0.25s ease;
    box-shadow: 0 2px 8px var(--color-val-rgba-220-53-69-0-08);
}

.sl-group:hover {
    border-left-color: var(--color-val-hex-ff6b7a);
    box-shadow: 0 4px 12px var(--color-val-rgba-220-53-69-0-15);
    transform: translateY(-2px);
}

.sl-input input {
    border-color: var(--color-val-rgba-220-53-69-0-3);
    background-color: var(--color-val-rgba-220-53-69-0-05);
}

.sl-input input:focus {
    border-color: var(--negative-color);
    box-shadow: 0 0 0 3px var(--color-val-rgba-220-53-69-0-2);
}

.sl-output {
    background-color: var(--sl-output-bg) !important;
    color: var(--sl-output-text) !important;
    border-color: var(--sl-output-border) !important;
    font-weight: var(--font-weight-bold);
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}


.section-repurchase {
    overflow: auto;
    /* تحسين التمرير على الهواتف */
    -webkit-overflow-scrolling: touch;
}

/* زيادة المسافة بين الأقسام الثلاثة في الهاتف */
@media (max-width: 768px) {
    .details-content-wrapper .section-initial {
        margin-bottom: 40px !important;
    }

    .details-content-wrapper .section-repurchase {
        margin-bottom: 40px !important;
    }

    .details-content-wrapper .section-current-targets {
        margin-bottom: 40px !important;
    }
}

@media (max-width: 600px) {
    .details-content-wrapper .section-initial {
        margin-bottom: 35px !important;
    }

    .details-content-wrapper .section-repurchase {
        margin-bottom: 35px !important;
    }

    .details-content-wrapper .section-current-targets {
        margin-bottom: 35px !important;
    }
}

.repurchase-table {
    width: 100%;
    border-collapse: separate;
    /* From File 2 */
    border-spacing: 0;
    /* From File 2 */
    margin-top: 15px;
    font-size: 0.9em;
    /* From File 2 */
    table-layout: fixed;
}

.repurchase-table th,
.repurchase-table td {
    border-bottom: 1px solid var(--border-color);
    /* From File 2 */
    padding: 8px 6px;
    /* From File 2 */
    text-align: center;
    white-space: nowrap;
    transition: border-color 0.3s ease, background-color 0.2s ease;
    font-size: 0.9em;
    font-family: inherit;
    overflow: hidden;
    text-overflow: ellipsis;
}

.repurchase-table th {
    background-color: var(--color-val-rgba-0-0-0-0-2);
    font-weight: var(--font-weight-semibold);
    color: var(--text-light);
    position: sticky;
    top: 0;
    z-index: 1;
    border: 1px solid var(--color-val-rgba-255-255-255-0-05);
    transition: all 0.25s ease;
    font-size: 0.85em;
    padding: 10px 8px;
}

.repurchase-table th:hover {
    background-color: var(--color-val-rgba-59-158-255-0-1);
    border-color: var(--color-val-rgba-59-158-255-0-2);
    color: var(--primary-color);
}

.repurchase-table td {
    font-weight: var(--font-weight-normal);
}

/* Added from File 2 for table cell borders and radii */
.repurchase-table td:first-child,
.repurchase-table th:first-child {
    border-right: 1px solid var(--border-color);
}

.repurchase-table td:last-child,
.repurchase-table th:last-child {
    border-left: 1px solid var(--border-color);
}

.repurchase-table th:first-child {
    border-top-right-radius: 6px;
}

.repurchase-table th:last-child {
    border-top-left-radius: 6px;
}

.repurchase-table tr:last-child td {
    border-bottom: none;
}

.repurchase-table tr:last-child td:first-child {
    border-bottom-right-radius: 6px;
}

.repurchase-table tr:last-child td:last-child {
    border-bottom-left-radius: 6px;
}

/* ضمان السكرول الأفقي للجدول في جميع الأوضاع */
.repurchase-table {
    min-width: 1000px;
    /* عرض أدنى لضمان السكرول عند الحاجة */
    width: 100%;
}

.repurchase-table tr {
    transition: all 0.2s ease;
}

.repurchase-table tr:hover td {
    background-color: var(--hover-bg);
    box-shadow: inset 0 0 0 1px var(--primary-color);
}

/* ضبط عرض الأعمدة لضمان الاتساق وعدم انهيار التخطيط */
.repurchase-table th:nth-child(1),
.repurchase-table td:nth-child(1) {
    min-width: 28px;
    width: 36px;
    padding: 4px 2px;
}

.repurchase-table th:nth-child(2),
.repurchase-table td:nth-child(2) {
    min-width: 90px;
}

.repurchase-table th:nth-child(3),
.repurchase-table td:nth-child(3) {
    min-width: 120px;
}

.repurchase-table th:nth-child(4),
.repurchase-table td:nth-child(4) {
    min-width: 120px;
}

.repurchase-table th:nth-child(5),
.repurchase-table td:nth-child(5) {
    min-width: 120px;
}

.repurchase-table th:nth-child(6),
.repurchase-table td:nth-child(6) {
    min-width: 120px;
}

.repurchase-table th:nth-child(7),
.repurchase-table td:nth-child(7) {
    min-width: 110px;
}

.repurchase-table input[type="number"] {
    width: 100%;
    padding: 6px 8px;
    font-size: 0.9em !important;
    text-align: center;
    margin: 0 auto;
    display: block;
    box-shadow: none;
    transition: all 0.2s ease;
    border-radius: 4px;
    font-family: inherit !important;
    /* تحسين للمس على الهواتف */
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
}

.repurchase-table input[type="number"]:hover {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 2px var(--color-val-rgba-0-86-179-0-1);
}

.repurchase-table input[type="number"]:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px var(--color-val-rgba-0-86-179-0-15);
}

.repurchase-table .output-field {
    font-size: 0.9em !important;
    padding: 6px 8px !important;
    min-height: 34px !important;
    width: auto !important;
    background-color: transparent !important;
    border: none !important;
    font-family: inherit !important;
    font-weight: var(--font-weight-semibold) !important;
    color: var(--text-color) !important;
    text-align: center !important;
    transition: all 0.3s ease;
    display: inline !important;
    border-radius: 6px;
}

.repurchase-table .repurchase-pnl,
.repurchase-table .repurchase-pnl-percent {
    font-family: inherit !important;
    font-weight: var(--font-weight-semibold) !important;
    direction: ltr;
    text-align: center;
    font-size: 0.9em !important;
    padding: 5px 10px !important;
    border-radius: 8px;
    transition: all 0.3s ease;
    min-width: 64px;
    max-width: 100%;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* ألوان الربح في جدول DCA - أكثر هدوءاً */
.repurchase-table .repurchase-pnl.pnl-positive,
.repurchase-table .repurchase-pnl-percent.pnl-positive {
    color: var(--color-val-hex-10b981) !important;
    background-color: var(--color-val-rgba-16-185-129-0-1) !important;
    text-shadow: none;
}

.repurchase-table .repurchase-pnl-percent.pnl-positive::before {
    content: '▲ ';
    font-size: 0.75em;
    margin-left: 2px;
}

/* ألوان الخسارة في جدول DCA - أكثر هدوءاً */
.repurchase-table .repurchase-pnl.pnl-negative,
.repurchase-table .repurchase-pnl-percent.pnl-negative {
    color: var(--color-val-hex-ef4444) !important;
    background-color: var(--color-val-rgba-239-68-68-0-1) !important;
    text-shadow: none;
}

.repurchase-table .repurchase-pnl-percent.pnl-negative::before {
    content: '▼ ';
    font-size: 0.75em;
    margin-left: 2px;
}

/* حالة محايدة */
.repurchase-table .repurchase-pnl.pnl-neutral,
.repurchase-table .repurchase-pnl-percent.pnl-neutral {
    color: var(--text-muted) !important;
    background-color: transparent !important;
}

.down-percent {
    font-weight: var(--font-weight-semibold);
    min-width: 64px;
    max-width: 100%;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-family: inherit;
    direction: ltr;
    padding: 5px 10px;
    border-radius: 8px;
    font-size: 0.85em;
    transition: all 0.3s ease;
    border: none;
}

/* نسبة الصعود - أخضر هادئ */
.down-percent.positive {
    color: var(--color-val-hex-10b981);
    background-color: var(--color-val-rgba-16-185-129-0-1);
    text-shadow: none;
}

.down-percent.positive::before {
    content: '▲ ';
    font-size: 0.75em;
    margin-left: 2px;
}

/* نسبة الهبوط - أحمر هادئ */
.down-percent.negative {
    color: var(--color-val-hex-ef4444);
    background-color: var(--color-val-rgba-239-68-68-0-1);
    text-shadow: none;
}

.down-percent.negative::before {
    content: '▼ ';
    font-size: 0.75em;
    margin-left: 2px;
}

/* تحسين حاوية جدول التعزيز */
.repurchase-table-wrapper {
    position: relative;
    margin-top: 10px;
    background: transparent;
    border: 1px solid var(--color-val-rgba-255-255-255-0-1);
    border-radius: 12px;
    box-shadow: none;
}

/* شريط تمرير محسّن للحاسوب */
.repurchase-table-wrapper::-webkit-scrollbar {
    height: 10px;
}

.repurchase-table-wrapper::-webkit-scrollbar-track {
    background: var(--bg-color);
    border-radius: 5px;
    margin: 0 10px;
}

.repurchase-table-wrapper::-webkit-scrollbar-thumb {
    background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
    border-radius: 5px;
    border: 2px solid var(--bg-color);
    transition: all 0.3s ease;
}

.repurchase-table-wrapper::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(90deg, var(--secondary-color), var(--color-val-hex-ffb733));
    transform: scaleY(1.2);
}

/* Firefox scrollbar */
.repurchase-table-wrapper {
    scrollbar-width: thin;
    scrollbar-color: var(--primary-color) rgb(0 0 0 / 0.1);
}

/* تخطيط جنباً إلى جنب للأقسام */
.details-content-wrapper {
    display: grid;
    grid-template-columns: 2fr 3fr;
    /* القسم الأول 40% والتعزيز 60% */
    gap: 20px;
    width: 100%;
}

.details-content-wrapper>.section {
    width: 100%;
    max-width: 100%;
}

.summary-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 16px;
}

.summary-item {
    background-color: var(--section-bg);
    padding: 18px 20px;
    border-radius: 10px;
    border: 1px solid var(--border-color);
    border-left: 4px solid var(--color-val-hex-3b9eff);
    transition: all 0.25s ease;
    display: flex;
    flex-direction: column;
    box-shadow: 0 2px 8px var(--color-val-rgba-0-0-0-0-08);
}

.summary-item:hover {
    border-left-color: var(--color-val-hex-ffb733);
    box-shadow: 0 4px 12px var(--color-val-rgba-255-165-2-0-15);
    transform: translateY(-2px);
}

.summary-item label {
    font-size: 0.85em;
    color: var(--text-muted);
    display: block;
    margin-bottom: 8px;
    font-weight: var(--font-weight-semibold);
    transition: color 0.3s ease;
}

.summary-item .value {
    font-size: 1.3em;
    font-weight: var(--font-weight-bold);
    color: var(--text-light);
    word-wrap: break-word;
    margin-top: auto;
    font-family: 'Roboto Mono', 'Consolas', 'Monaco', monospace;
    transition: color 0.3s ease;
    direction: ltr;
    text-align: left;
}

.pnl-positive {
    color: var(--positive-color) !important;
    text-shadow: 0 0 10px var(--color-val-rgba-16-185-129-0-3);
}

.pnl-negative {
    color: var(--negative-color) !important;
    text-shadow: 0 0 10px var(--color-val-rgba-239-68-68-0-3);
}

.pnl-neutral {
    color: var(--text-muted) !important;
}

/* تحسينات للنمط الفاتح */
html[data-theme="light"] body .coins-distribution-wrapper {
    background: transparent;
}

html[data-theme="light"] body .performance-area,
html[data-theme="light"] body .distribution-area {
    background: linear-gradient(145deg, var(--color-val-hex-ffffff) 0%, var(--color-val-hex-f3f4f6) 100%) !important;
    border: 1px solid var(--color-val-rgba-0-0-0-0-08) !important;
    box-shadow: 0 10px 30px var(--color-val-rgba-0-0-0-0-05) !important;
}

html[data-theme="light"] body .performance-area h3,
html[data-theme="light"] body .section-portfolio-stats h2 {
    color: var(--color-val-hex-1f2937);
}



html[data-theme="light"] body .chart-center-value {
    background: linear-gradient(135deg, var(--color-val-hex-3b9eff) 0%, var(--color-val-hex-3b9eff) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

html[data-theme="light"] body .chart-center-title {
    color: var(--color-val-hex-9ca3af);
}

html[data-theme="light"] body .legend-item {
    background: var(--color-val-rgba-255-255-255-0-9);
    border: 1px solid var(--color-val-rgba-0-0-0-0-1);
    box-shadow: 0 2px 5px var(--color-val-rgba-0-0-0-0-05);
}

html[data-theme="light"] body .legend-item:hover {
    background: var(--color-val-hex-ffffff);
    border-color: var(--color-val-rgba-59-130-246-0-4);
    box-shadow: 0 4px 10px var(--color-val-rgba-59-130-246-0-15);
}

html[data-theme="light"] body .legend-percent {
    color: var(--color-val-hex-3b9eff);
    font-weight: 700;
    text-shadow: 0 1px 2px var(--color-val-rgba-0-153-255-0-3);
}

html[data-theme="light"] body .legend-name {
    color: var(--color-val-hex-374151);
}

/* ====== قسم إحصائيات المحفظة ====== */

/* الحاوية الرئيسية */
.section-portfolio-stats {
    width: 100% !important;
    box-sizing: border-box;
    margin: 0 !important;
    padding: 0 !important;
    grid-column: 1 / -1 !important;
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
}

.section-portfolio-stats h2 {
    font-size: 1.8em;
    color: var(--text-color);
    margin-bottom: 20px;
    font-weight: var(--font-weight-bold);
    text-align: right;
}

.section-portfolio-stats h2 i {
    color: var(--primary-color);
    margin-left: 10px;
}

/* الحاوية الأفقية للأداء والتوزيع */
.stats-section {
    display: flex !important;
    flex-direction: row !important;
    gap: 25px !important;
    width: 100% !important;
    padding: 0 !important;
    background: transparent !important;
    border: none !important;
    align-items: stretch !important;
}

/* قسم الأداء (الجانب الأيمن) */
.performance-area {
    flex: 1 1 50% !important;
    background: linear-gradient(145deg, var(--color-val-rgba-30-41-59-0-7) 0%, var(--color-val-rgba-15-23-42-0-4) 100%);
    backdrop-filter: blur(20px);
    padding: 30px;
    border-radius: 20px;
    border: 1px solid var(--color-val-rgba-255-255-255-0-05);
    box-shadow: 0 20px 50px var(--color-val-rgba-0-0-0-0-3);
}

.performance-area h3 {
    font-size: 1.4em;
    color: var(--text-color);
    margin: 0 0 25px 0;
    font-weight: var(--font-weight-bold);
    text-align: right;
}

.performance-area h3 i {
    color: var(--primary-color);
    margin-left: 10px;
    font-size: 1.1em;
}

/* قسم التوزيع (الجانب الأيسر) */
.distribution-area {
    flex: 1 1 50% !important;
    background: linear-gradient(145deg, var(--color-val-rgba-30-41-59-0-7) 0%, var(--color-val-rgba-15-23-42-0-4) 100%);
    backdrop-filter: blur(20px);
    padding: 30px;
    border-radius: 20px;
    border: 1px solid var(--color-val-rgba-255-255-255-0-05);
    box-shadow: 0 20px 50px var(--color-val-rgba-0-0-0-0-3);
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    justify-content: flex-start !important;
    gap: 30px !important;
}

/* الرسم البياني على اليمين */
.distribution-area .chart-container {
    flex: 0 0 auto !important;
    width: 100% !important;
    max-width: 380px !important;
    height: 320px !important;
    margin: 0 auto !important;
    padding: 20px !important;
    position: relative;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    overflow: visible !important;
}

.distribution-area .chart-container canvas {
    max-width: 100% !important;
    max-height: 100% !important;
    display: block !important;
}

/* قائمة العملات على اليسار في شبكة 7 أعمدة */
.distribution-area .coins-legend {
    flex: 0 0 auto !important;
    width: 100% !important;
    display: grid !important;
    grid-template-columns: repeat(auto-fit, minmax(clamp(110px, 12vw, 160px), 1fr)) !important;
    gap: 10px !important;
    margin: 0 !important;
    align-content: start !important;
    padding-top: 20px;
    border-top: 1px solid var(--color-val-rgba-255-255-255-0-05);
}

/* Responsive للشاشات المتوسطة */
@media (max-width: 1200px) {
    .stats-section {
        flex-direction: column !important;
        gap: 20px !important;
    }

    .performance-area,
    .distribution-area {
        flex: 1 1 100% !important;
        max-width: 100% !important;
    }

    .distribution-area {
        flex-direction: column !important;
        align-items: center !important;
    }

    .distribution-area .chart-container {
        flex: 0 0 auto !important;
        max-width: 350px !important;
        margin-bottom: 20px !important;
    }

    .distribution-area .coins-legend {
        flex: 1 1 100% !important;
        width: 100% !important;
        grid-template-columns: repeat(auto-fit, minmax(clamp(120px, 18vw, 170px), 1fr)) !important;
    }
}

/* Responsive للشاشات الصغيرة */
@media (max-width: 768px) {
    .section-portfolio-stats h2 {
        font-size: 1.5em;
    }

    .performance-area,
    .distribution-area {
        padding: 18px;
    }

    .performance-area h3 {
        font-size: 1.15em;
    }

    .distribution-area .chart-container {
        max-width: 280px !important;
        height: 280px !important;
    }

    .distribution-area .coins-legend {
        grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
    }
}

.performance-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    /* صفين متساويين */
    gap: 18px;
}

/* السنة تأخذ العرض الكامل */
.performance-grid .performance-item:last-child {
    grid-column: 1 / -1;
    /* تمتد على كامل العرض */
}

.performance-item {
    background: var(--color-val-rgba-255-255-255-0-04);
    backdrop-filter: blur(15px);
    padding: 22px 18px;
    border-radius: 16px;
    border: 1px solid var(--color-val-rgba-255-255-255-0-1);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    text-align: center;
    position: relative;
    overflow: hidden;
}

.performance-item::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, var(--color-val-rgba-255-255-255-0-05) 0%, transparent 100%);
    opacity: 0;
    transition: opacity 0.4s ease;
}

.performance-item:hover::before {
    opacity: 1;
}

.performance-item:hover {
    border-color: var(--color-val-rgba-59-130-246-0-4);
    box-shadow: 0 8px 20px var(--color-val-rgba-59-130-246-0-2);
    transform: translateY(-3px) scale(1.02);
    background: var(--color-val-rgba-255-255-255-0-08);
}

.performance-item label {
    font-size: 1em;
    color: var(--text-muted);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    margin-bottom: 12px;
    font-weight: var(--font-weight-semibold);
    letter-spacing: 0.5px;
}

.performance-item label i {
    font-size: 1.2em;
    opacity: 0.8;
}

.perf-value {
    font-size: 1.6em;
    font-weight: var(--font-weight-bold);
    font-family: 'Roboto Mono', 'Consolas', 'Monaco', monospace;
    text-shadow: 0 2px 10px var(--color-val-rgba-0-0-0-0-25);
}

.perf-value.pnl-neutral {
    font-size: 0.9em;
    font-style: italic;
    opacity: 0.7;
}

.coins-distribution-wrapper {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px 0;
    position: relative;
}

.chart-container {
    position: relative;
    width: 100%;
    max-width: 380px;
    margin: 0 auto 30px auto;
    padding: 20px;
    overflow: visible;
}

.chart-container canvas {
    position: relative;
    z-index: 10;
    display: block;
}

.chart-center-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    pointer-events: none;
    z-index: 1;
}

.chart-center-title {
    font-size: 0.85em;
    color: var(--color-val-hex-9ca3af);
    margin-bottom: 5px;
    font-weight: 400;
    letter-spacing: 0.3px;
}

.chart-center-value {
    font-size: 2.4em;
    font-weight: 700;
    background: linear-gradient(135deg, var(--color-val-hex-3b9eff) 0%, var(--color-val-hex-3b9eff) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    font-family: 'Roboto Mono', 'Consolas', 'Monaco', monospace;
    filter: drop-shadow(0 2px 8px var(--color-val-rgba-0-153-255-0-3));
}

.coins-legend {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 6px;
    margin-top: 0;
    width: 100%;
}

.legend-item {
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 6px 4px;
    background: var(--color-val-rgba-255-255-255-0-45);
    backdrop-filter: blur(8px);
    border-radius: 6px;
    border: 1px solid var(--color-val-rgba-255-255-255-0-5);
    transition: all 0.3s ease;
    cursor: pointer;
    position: relative;
    overflow: hidden;
    box-shadow: 0 3px 8px var(--color-val-rgba-139-92-246-0-12);
    min-height: 32px;
}

.legend-item .coin-icon {
    margin-left: 0;
}

.legend-item::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, var(--color-val-rgba-255-255-255-0-2) 0%, transparent 100%);
    opacity: 0;
    transition: opacity 0.3s ease;
}

.legend-item:hover::before {
    opacity: 1;
}

.legend-item:hover {
    background: var(--color-val-rgba-255-255-255-0-65);
    border-color: var(--color-val-rgba-0-153-255-0-3);
    transform: translateY(-3px);
    box-shadow: 0 6px 18px var(--color-val-rgba-0-153-255-0-3);
}

.legend-color {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    flex-shrink: 0;
    box-shadow: 0 0 10px currentColor, 0 2px 6px var(--color-val-rgba-0-0-0-0-2);
    position: relative;
    z-index: 1;
}

.legend-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 5px;
}

.legend-name {
    font-weight: 700;
    color: var(--color-val-hex-2d3748);
    font-size: 0.75em;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.legend-percent {
    font-weight: 700;
    color: var(--color-val-hex-3b9eff);
    font-size: 0.75em;
    font-family: 'Roboto Mono', 'Consolas', 'Monaco', monospace;
    position: relative;
    z-index: 1;
    text-shadow: 0 1px 2px var(--color-val-rgba-0-153-255-0-3);
}

/* ========================================
           RESPONSIVE DESIGN - شاشات كبيرة جداً
           ======================================== */
@media (max-width: 1200px) {
    .details-content-wrapper {
        grid-template-columns: 1fr 1fr;
    }

    .details-content-wrapper>.section-current-targets:nth-child(3) {
        grid-column: 1 / -1;
    }

    .container {
        padding: 0 20px;
    }

    h1 {
        font-size: 1.7em;
    }

    h2 {
        font-size: 1.35em;
    }
}

/* ========================================
           RESPONSIVE DESIGN - شاشات متوسطة
           ======================================== */
@media (max-width: 992px) {
    .container {
        padding: 0 18px;
    }

    h1 {
        font-size: 1.6em;
        margin-bottom: 25px;
    }

    h2 {
        font-size: 1.3em;
        margin-bottom: 20px;
    }

    /* جداول الملخص */
    .summary-table {
        font-size: 0.85em;
    }

    .summary-table th,
    .summary-table td {
        padding: 8px 10px;
    }

    /* الإجماليات */
    .summary-totals {
        grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
        gap: 12px;
    }

    /* التفاصيل */
    .details-content-wrapper {
        grid-template-columns: 1fr;
        gap: 50px;
    }

    /* جدول التعزيز */
    .repurchase-table {
        font-size: 0.85em;
    }

    .repurchase-table th,
    .repurchase-table td {
        padding: 8px 6px;
    }

    .repurchase-table input[type="number"] {
        width: 95%;
        padding: 6px 8px;
        font-size: 0.95em;
    }

    /* الأهداف */
    .targets-grid {
        gap: 15px;
    }

    /* شبكة الملخص */
    .summary-grid {
        grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
        gap: 12px;
    }

    /* التخطيط المدمج الجديد - شاشات متوسطة (خانتين تصبح خانة واحدة) */
    .section-initial-and-targets>div[style*="grid-template-columns: repeat(2, 1fr)"] {
        grid-template-columns: 1fr !important;
    }
}

/* ========================================
           RESPONSIVE DESIGN - شاشات صغيرة (تابلت)
           ======================================== */
@media (max-width: 768px) {
    body {
        font-size: 13.5px;
    }

    .container {
        padding: 0 15px 40px 15px;
    }

    h1 {
        font-size: 1.5em;
        margin-bottom: 20px;
        margin-top: 10px;
    }

    h2 {
        font-size: 1.25em;
        margin-bottom: 18px;
        padding-bottom: 8px;
    }

    h3 {
        font-size: 1.1em;
        margin-bottom: 12px;
    }

    /* الهيدر */
    .page-header {
        padding: 12px 15px;
        font-size: 0.9em;
    }

    /* القسم العام */
    .overall-summary-section {
        position: static;
        margin-bottom: 20px;
        padding: 12px 15px;
    }

    /* الإجماليات */
    .summary-totals {
        grid-template-columns: 1fr 1fr;
        gap: 10px;
    }

    .summary-totals .total-item {
        padding: 12px;
    }

    .summary-totals .total-item label {
        font-size: 0.85em;
    }

    .summary-totals .total-item .value {
        font-size: 1.1em;
    }



    /* شريط التحكم */
    .controls-bar {
        flex-direction: column;
        gap: 10px;
        padding: 12px 15px;
    }

    .controls-left,
    .controls-center,
    .controls-right {
        width: 100%;
        border: none;
        padding: 0;
    }

    .controls-bar button,
    .controls-bar select,
    .controls-bar input {
        padding: 8px 12px;
        font-size: 0.9em;
    }

    /* إحصائيات المحفظة */
    .stats-section {
        padding: 20px;
    }

    .performance-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
    }

    .performance-item {
        padding: 14px 12px;
    }

    .performance-item label {
        font-size: 0.85em;
    }

    .perf-value {
        font-size: 1.3em;
    }

    .coins-distribution-wrapper {
        padding: 30px 20px;
    }

    .chart-container {
        max-width: 300px;
        padding: 18px;
        margin-bottom: 25px;
    }

    .chart-center-value {
        font-size: 1.8em;
    }

    .chart-center-title {
        font-size: 0.8em;
    }

    .coins-legend {
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
    }

    .legend-item {
        padding: 10px 14px;
    }

    .legend-percent {
        font-size: 0.88em;
        font-weight: 700;
    }

    #apiStatus {
        text-align: center;
        margin: 8px 0;
    }

    /* التفاصيل */
    .details-content-wrapper {
        gap: 45px;
        grid-template-columns: 1fr !important;
    }

    /* الأقسام */
    .section {
        padding: 15px;
        margin-bottom: 25px;
    }

    /* التخطيط المدمج الجديد - شاشات صغيرة (تابلت) - خانة واحدة */
    .section-initial-and-targets>div[style*="grid-template-columns: repeat(2, 1fr)"] {
        grid-template-columns: 1fr !important;
        gap: 10px !important;
    }

    .section-initial-and-targets .form-group,
    .section-initial-and-targets .summary-item {
        margin-bottom: 0;
    }

    /* النماذج */
    .form-grid {
        grid-template-columns: 1fr;
        gap: 15px;
    }

    .market-price-display-group {
        grid-column: auto;
    }

    .auto-refresh-group {
        grid-column: auto;
    }

    /* جدول الملخص */
    .summary-table {
        font-size: 0.8em;
    }

    .summary-table th,
    .summary-table td {
        padding: 7px 8px;
    }

    .summary-table .coin-symbol {
        padding-right: 10px;
        max-width: none;
        width: auto;
        overflow: visible;
        text-overflow: clip;
    }

    /* جدول التعزيز */
    .repurchase-table {
        font-size: 0.8em;
        table-layout: fixed;
    }

    .repurchase-table th:nth-child(3),
    .repurchase-table td:nth-child(3) {
        min-width: 100px;
    }

    .repurchase-table th,
    .repurchase-table td {
        padding: 7px 5px;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .repurchase-table input[type="number"] {
        width: 100%;
        padding: 6px 4px;
        font-size: 0.9em;
    }

    .repurchase-table .output-field {
        padding: 5px 3px;
        font-size: 0.9em;
    }

    /* شبكة الملخص */
    .summary-grid {
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: 10px;
    }

    .summary-item {
        padding: 12px;
    }

    .summary-item label {
        font-size: 0.8em;
        margin-bottom: 5px;
    }

    .summary-item .value {
        font-size: 1.1em;
    }

    /* الأهداف */
    .targets-grid {
        grid-template-columns: 1fr;
    }

    .target-pair {
        grid-template-columns: 1fr 1fr;
        gap: 10px;
    }

    .sl-group {
        grid-template-columns: 1fr;
        gap: 12px;
    }
}


/* ========================================
           NEW PROFESSIONAL TOOLBAR STYLES
           ======================================== */
.professional-toolbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: var(--section-bg);
    padding: 15px 20px;
    margin-bottom: 20px;
    border-radius: 16px;
    border: 1px solid var(--border-color);
    box-shadow: 0 4px 20px var(--color-val-rgba-0-0-0-0-05);
    flex-wrap: wrap;
    gap: 15px;
}

.toolbar-actions {
    display: flex;
    align-items: center;
    gap: 12px;
}

.toolbar-controls {
    display: flex;
    align-items: center;
    gap: 12px;
}

.toolbar-search {
    position: relative;
    width: 100%;
    max-width: 420px;
    flex: 1 1 320px;
    min-width: 220px;
}

.toolbar-search #tableSearchInput {
    height: 44px;
    padding-inline-start: 42px;
    padding-inline-end: 14px;
    border-radius: 14px;
    border: 1px solid var(--color-val-rgba-59-158-255-0-25);
    background: linear-gradient(135deg, var(--color-val-rgba-15-23-42-0-85) 0%, var(--color-val-rgba-10-16-28-0-85) 100%);
    color: var(--text-light);
    box-shadow: 0 8px 20px var(--color-val-rgba-0-0-0-0-35), inset 0 1px 0 var(--color-val-rgba-255-255-255-0-05);
    transition: all 0.25s ease;
    text-align: right;
    direction: rtl;
}

.toolbar-search #tableSearchInput::placeholder {
    color: var(--text-muted);
    opacity: 0.85;
}

.toolbar-search #tableSearchInput:hover {
    border-color: var(--color-val-rgba-59-158-255-0-5);
    box-shadow: 0 10px 22px var(--color-val-rgba-0-0-0-0-38), 0 0 0 2px var(--color-val-rgba-59-158-255-0-12);
}

.toolbar-search #tableSearchInput:focus {
    outline: none;
    border-color: var(--color-val-rgba-59-158-255-0-85);
    background: linear-gradient(135deg, var(--color-val-rgba-18-28-48-0-95) 0%, var(--color-val-rgba-10-18-34-0-95) 100%);
    box-shadow: 0 0 0 3px var(--color-val-rgba-59-158-255-0-25), 0 12px 26px var(--color-val-rgba-59-158-255-0-18);
}

.toolbar-search-icon {
    position: absolute;
    inset-block: 0;
    inset-inline-start: 12px;
    display: flex;
    align-items: center;
    color: var(--text-muted);
    opacity: 0.85;
    pointer-events: none;
    transition: color 0.25s ease, transform 0.25s ease;
}

.toolbar-search-icon svg {
    width: 16px;
    height: 16px;
}

.toolbar-search:focus-within .toolbar-search-icon {
    color: var(--primary-color);
    transform: translateY(-1px);
}

html[data-theme="light"] body .toolbar-search #tableSearchInput {
    background: var(--color-val-hex-f8fafc);
    color: var(--color-val-hex-0f172a);
    border-color: var(--color-val-rgba-59-130-246-0-25);
    box-shadow: 0 6px 16px var(--color-val-rgba-15-23-42-0-08), inset 0 1px 0 var(--color-val-rgba-255-255-255-0-7);
}

html[data-theme="light"] body .toolbar-search #tableSearchInput:focus {
    background: var(--color-val-hex-ffffff);
    box-shadow: 0 0 0 3px var(--color-val-rgba-59-130-246-0-2), 0 10px 22px var(--color-val-rgba-59-130-246-0-12);
}

html[data-theme="light"] body .toolbar-search-icon {
    color: var(--color-val-hex-64748b);
}

.pro-btn {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 16px;
    background: var(--bg-color);
    border: 1px solid var(--border-color);
    border-radius: 10px;
    color: var(--text-color);
    font-weight: 600;
    font-size: 0.9em;
    cursor: pointer;
    transition: all 0.2s ease;
}

.pro-btn:hover {
    background: var(--hover-bg);
    border-color: var(--primary-color);
    transform: translateY(-1px);
}

.pro-btn.icon-only {
    padding: 10px;
}

.pro-search {
    position: relative;
    display: flex;
    align-items: center;
}

.pro-search input {
    padding: 10px 16px;
    padding-left: 40px;
    /* Space for icon */
    border-radius: 10px;
    border: 1px solid var(--border-color);
    background: var(--bg-color);
    color: var(--text-color);
    font-size: 0.9em;
    width: 240px;
    transition: all 0.2s ease;
}

.pro-search input:focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px var(--color-val-rgba-59-130-246-0-1);
    width: 280px;
}

.pro-search .search-icon {
    position: absolute;
    left: 12px;
    color: var(--text-muted);
    pointer-events: none;
}

/* Mobile Layout for Toolbar */
@media (max-width: 768px) {
    .professional-toolbar {
        flex-direction: column;
        gap: 12px;
        padding: 12px;
        align-items: stretch;
    }

    .toolbar-actions,
    .toolbar-controls {
        width: 100%;
        justify-content: space-between;
    }

    .toolbar-controls {
        flex-direction: column;
        align-items: stretch;
        gap: 10px;
    }

    .pro-search {
        flex: 1;
    }

    .pro-search input {
        width: 100% !important;
    }

    .pro-btn {
        flex: 0 0 auto;
        justify-content: center;
        height: 38px;
    }

    .pro-btn.icon-only {
        flex: 0 0 auto;
        width: 36px;
    }

    .toolbar-status {
        display: grid;
        grid-template-columns: 1fr;
        gap: 8px;
    }

    .toolbar-status>div {
        background: var(--bg-color);
        border: 1px solid var(--border-color);
        border-radius: 10px;
        padding: 8px 10px;
        font-size: 0.85em;
        color: var(--text-color);
        white-space: normal;
        word-break: break-word;
    }

    .toolbar-actions .pro-btn span {
        display: none;
    }
}


/* ========================================
           GLOW EFFECT ANIMATION
           ======================================== */
@keyframes glowWarning {
    0% {
        background-color: transparent;
    }

    20% {
        background-color: var(--color-val-rgba-255-193-7-0-4);
        box-shadow: 0 0 15px var(--color-val-rgba-255-193-7-0-4);
        transform: scale(1.01);
    }

    80% {
        background-color: var(--color-val-rgba-255-193-7-0-1);
        box-shadow: 0 0 5px var(--color-val-rgba-255-193-7-0-1);
        transform: scale(1);
    }

    100% {
        background-color: transparent;
    }
}

.glow-effect {
    animation: glowWarning 2s ease-in-out;
    position: relative;
    z-index: 10;
}

/* ========================================
           RESPONSIVE DESIGN - شاشات صغيرة جداً (موبايل)
           ======================================== */
@media (max-width: 600px) {
    body {
        font-size: 13px;
    }

    .container {
        padding: 0 10px 35px 10px;
    }

    h1 {
        font-size: 1.35em;
        margin-bottom: 15px;
        margin-top: 8px;
    }

    h2 {
        font-size: 1.15em;
        margin-bottom: 15px;
        padding-bottom: 6px;
    }

    h3 {
        font-size: 1em;
        margin-bottom: 10px;
    }

    /* الهيدر */
    .page-header {
        padding: 10px 12px;
        font-size: 0.85em;
    }

    /* تنسيق الأزرار في الشاشات الصغيرة */
    .controls-right {
        display: flex !important;
        flex-wrap: wrap !important;
        gap: 8px !important;
        width: 100% !important;
    }

    /* زر إضافة يبقى بحجمه الكامل في سطر منفصل */
    .controls-right>button:first-of-type {
        flex: 1 1 100% !important;
        width: 100% !important;
        padding: 10px 16px !important;
        font-size: 0.9em !important;
        height: 40px !important;
    }

    /* باقي الأزرار: زرين في كل سطر */
    .controls-right>button:not(:first-of-type) {
        flex: 1 1 calc(50% - 4px) !important;
        padding: 6px 10px !important;
        font-size: 0.8em !important;
        height: 32px !important;
        min-width: auto !important;
    }

    button {
        min-height: 36px !important;
        padding: 6px 12px !important;
        font-size: 0.85em !important;
    }

    /* القسم العام */
    .overall-summary-section {
        padding: 10px 12px;
        margin-bottom: 20px;
    }

    /* جدول الملخص */
    .summary-table {
        font-size: 0.7em;
        min-width: 900px;
        /* زيادة العرض لإجبار التمرير */
    }

    .summary-table th,
    .summary-table td {
        padding: 8px 6px;
        white-space: nowrap;
        /* منع التفاف النص */
        text-align: center;
    }

    /* تثبيت عمود العملة */
    .summary-table .coin-symbol {
        text-align: right;
        position: sticky;
        right: 0;
        z-index: 20;
        /* طبقة أعلى من المحتوى العادي */
        background-color: var(--section-bg);
        /* خلفية لتغطية المحتوى المتحرك */
        border-left: 2px solid var(--border-color);
        /* فاصل واضح */
        box-shadow: -4px 0 8px var(--color-val-rgba-0-0-0-0-1);
        /* ظل للفصل البصري */
        min-width: 110px;
        width: auto;
        /* السماح بالتوسع حسب المحتوى */
        padding-right: 10px;
    }

    /* تثبيت رأس عمود العملة */
    .summary-table th:first-child {
        position: sticky;
        right: 0;
        z-index: 21;
        /* أعلى من خلايا الجسم */
        background-color: var(--section-bg);
        /* نفس الخلفية */
        border-left: 2px solid var(--border-color);
        box-shadow: -4px 0 8px var(--color-val-rgba-0-0-0-0-1);
    }

    /* تصحيح الخلفية في الوضع الفاتح للعمود المثبت */
    html[data-theme="light"] body .summary-table .coin-symbol,
    html[data-theme="light"] body .summary-table th:first-child {
        background-color: var(--color-val-hex-ffffff);
        border-left-color: var(--color-val-hex-dee2e6);
    }

    /* إخفاء ظل العمود المثبت وإزالة الخط العمودي */
    .summary-table .coin-symbol,
    .summary-table th:first-child {
        box-shadow: none;
        border-left: none;
        /* إزالة الخط العمودي */
    }

    /* إصلاح مشكلة شفافية الخلفية عند النقر/التحويم - مهم جداً لمنع التداخل */
    .summary-table tbody tr:hover .coin-symbol {
        background-color: var(--section-bg) !important;
        z-index: 20;
        /* ضمان بقائه في الأعلى */
    }

    html[data-theme="light"] body .summary-table tbody tr:hover .coin-symbol {
        background-color: var(--color-val-hex-ffffff) !important;
    }

    /* تصغير العناوين والأعمدة وفصلها */
    .header-item {
        padding: 4px 2px;
        /* تقليل البادينغ أكثر */
        font-size: 0.7em;
        /* تصغير الخط أكثر */
        margin: 0 1px;
        /* إضافة هامش جانبي لفصل الصناديق */
        min-height: 28px;
        /* ارتفاع ثابت صغير */
        border-radius: 6px;
    }

    .summary-table th,
    .summary-table td {
        padding: 5px 2px;
        /* تقليل عرض الخلايا للسماح بالهوامش */
    }

    .summary-table {
        min-width: 600px;
        /* تقليل العرض الكلي */
    }

    /* الإجماليات */
    .summary-totals {
        grid-template-columns: 1fr 1fr;
        gap: 8px;
    }

    .summary-totals .total-item {
        padding: 10px;
    }

    .summary-totals .total-item label {
        font-size: 0.8em;
    }

    .summary-totals .total-item .value {
        font-size: 1em;
    }



    /* إحصائيات المحفظة */
    .stats-section {
        padding: 18px 15px;
    }

    .stats-section h3 {
        font-size: 1.05em;
        margin-bottom: 15px;
    }

    .performance-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
    }

    .performance-item {
        padding: 14px 12px;
    }

    .performance-item label {
        font-size: 0.8em;
    }

    .perf-value {
        font-size: 1.2em;
    }

    .coins-distribution-wrapper {
        padding: 25px 15px;
    }

    .chart-container {
        max-width: 240px;
        padding: 15px;
        margin-bottom: 20px;
    }

    .chart-center-value {
        font-size: 1.5em;
    }

    .chart-center-title {
        font-size: 0.75em;
        margin-bottom: 4px;
    }

    .coins-legend {
        grid-template-columns: repeat(2, 1fr);
        gap: 8px;
    }

    .legend-item {
        padding: 9px 12px;
    }

    .legend-color {
        width: 12px;
        height: 12px;
    }

    .legend-percent {
        font-size: 0.82em;
        font-weight: 700;
    }

    /* شريط التحكم */
    .controls-bar {
        flex-direction: column;
        gap: 8px;
        padding: 10px 12px;
    }

    .controls-bar button,
    .controls-bar select,
    .controls-bar input {
        width: 100%;
        padding: 8px 10px;
        font-size: 0.85em;
    }

    .input-group {
        width: 100%;
    }

    .input-group label {
        font-size: 0.8em;
    }

    .input-group select,
    .input-group input {
        width: 100%;
    }

    /* جدول التعزيز */
    .repurchase-table {
        font-size: 0.7em;
        min-width: 800px;
        /* ضمان السكرول الأفقي */
    }

    /* تحسين حاوية الجدول للهاتف */
    .repurchase-table-wrapper {
        max-width: 100%;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        scroll-behavior: smooth;
        position: relative;
    }



    .repurchase-table-wrapper:not(.scrolled)::after {
        opacity: 1;
    }

    .repurchase-table th,
    .repurchase-table td {
        padding: 5px 3px;
        white-space: normal;
    }

    .repurchase-table th {
        font-size: 0.85em;
    }

    .repurchase-table input[type="number"] {
        width: 100%;
        padding: 5px 3px;
        font-size: 0.9em;
    }

    .repurchase-table .output-field {
        padding: 4px 2px;
        font-size: 0.85em;
        min-height: 28px;
    }

    .down-percent {
        min-width: 45px;
        padding: 3px 5px;
        font-size: 0.85em;
    }

    /* شبكة الملخص */
    .summary-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 8px;
    }

    .summary-item {
        padding: 10px;
    }

    .summary-item label {
        font-size: 0.75em;
    }

    .summary-item .value {
        font-size: 1em;
    }

    /* الأهداف */
    .target-pair {
        grid-template-columns: 1fr 1fr;
        gap: 10px;
    }

    .sl-group {
        grid-template-columns: 1fr 1fr;
        gap: 10px;
    }

    .targets-grid {
        gap: 10px;
    }

    .target-input-group,
    .sl-input-group {
        gap: 8px;
    }

    .target-input-group label,
    .sl-input-group label {
        font-size: 0.8em;
    }

    .target-input-group input,
    .sl-input-group input {
        padding: 6px 8px;
        font-size: 0.85em;
    }

    /* الأقسام */
    .section {
        padding: 12px;
        margin-bottom: 20px;
    }

    /* تحسين overflow للجداول */
    .summary-table-container,
    .section-repurchase>div {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }

    /* تحسين الأزرار */
    .controls-left,
    .controls-center,
    .controls-right {
        flex-wrap: wrap;
        gap: 8px;
    }
}

/* ========================================
           RESPONSIVE DESIGN - شاشات صغيرة للغاية
           ======================================== */
@media (max-width: 360px) {
    body {
        font-size: 12px;
    }

    .container {
        padding: 0 8px 30px 8px;
    }

    h1 {
        font-size: 1.25em;
        margin-bottom: 12px;
    }

    h2 {
        font-size: 1.1em;
        margin-bottom: 12px;
    }

    .page-header {
        padding: 8px 10px;
        font-size: 0.8em;
    }

    .summary-table {
        font-size: 0.65em;
    }

    .summary-table th,
    .summary-table td {
        padding: 4px 3px;
    }

    .repurchase-table {
        font-size: 0.65em;
    }

    .repurchase-table th,
    .repurchase-table td {
        padding: 4px 2px;
    }

    .repurchase-table input[type="number"] {
        padding: 4px 2px;
        font-size: 0.85em;
    }



    .section {
        padding: 10px;
        margin-bottom: 18px;
    }

    .controls-bar button,
    .controls-bar select,
    .controls-bar input {
        padding: 6px 8px;
        font-size: 0.8em;
    }

    .summary-item,
    .total-item {
        padding: 8px;
    }

    .down-percent {
        min-width: 40px;
        padding: 2px 4px;
        font-size: 0.8em;
    }
}

/* ========================================
           تحسينات إضافية للـ Responsive
           ======================================== */

/* تحسين الجداول على الشاشات الصغيرة */
@media (max-width: 768px) {

    /* جعل الجداول قابلة للتمرير الأفقي */
    .summary-table-container {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        max-width: 100%;
    }

    /* تحسين عرض الأعمدة */
    .summary-table th,
    .summary-table td {
        min-width: 60px;
    }

    .summary-table .coin-symbol {
        min-width: 100px;
        max-width: none;
        width: auto;
        position: sticky;
        right: 0;
        background: var(--table-header-bg);
        z-index: 2;
        white-space: nowrap;
        overflow: visible;
        text-overflow: clip;
        /* Safety Spacing & Visual Separation */
        padding-left: 30px;
        /* زيادة مساحة الأمان */
        box-shadow: -5px 0 10px var(--color-val-rgba-0-0-0-0-15);
        border-left: 1px solid var(--border-color);
        /* خط فاصل خفيف */
    }

    /* Fix PnL Percentage Column - العمود الأخير */
    .summary-table th:last-child,
    .summary-table td:last-child {
        min-width: 100px;
        /* مساحة كافية للنسبة المئوية */
    }

    .summary-table td:last-child .pnl-pill {
        min-width: 90px;
        white-space: nowrap;
    }
}

/* تحسين الـ inputs على الشاشات الصغيرة */
@media (max-width: 480px) {

    input[type="text"],
    input[type="number"],
    select {
        font-size: 16px !important;
        /* منع الزوم التلقائي في iOS */
        padding: 10px 12px;
    }

    /* تحسين الأزرار */
    button {
        min-height: 44px;
        /* حجم مناسب للمس */
        font-size: 0.9em;
    }

    /* تحسين checkboxes */
    input[type="checkbox"] {
        width: 20px;
        height: 20px;
    }

    /* Mobile: Reduce coin column width */
    .summary-table td.coin-symbol,
    .summary-table th.coin-symbol {
        min-width: unset !important;
        width: auto !important;
        /* Adapt to content */
        max-width: unset !important;
        white-space: nowrap !important;
        padding-left: 15px !important;
        /* Keep padding */
    }

    .summary-table td.coin-symbol .coin-name-wrapper {
        flex-direction: row !important;
        /* Force horizontal alignment */
        align-items: center;
        justify-content: flex-start !important;
        direction: rtl;
        /* Icon first (right side in Arabic UI) */
        width: 100%;
        /* Fill the cell width */
        gap: 5px;
    }

    .summary-table td.coin-symbol .coin-name-wrapper > .coin-label {
        font-size: 0.9em;
        direction: ltr;
        text-align: left;
    }

    /* Summary items section: FORCE 2 columns */
    .section-initial-and-targets>div[style*="grid-template-columns: repeat(2, 1fr)"]:not([style*="margin-top"]) {
        display: grid !important;
        grid-template-columns: repeat(2, 1fr) !important;
        gap: 10px !important;
    }

    /* Targets section: 1 column (each target on its own row) */
    .section-initial-and-targets>div[style*="margin-top: 20px"] {
        display: grid !important;
        grid-template-columns: 1fr !important;
        gap: 10px !important;
    }

    /* Nested grids inside each target (percentage + price) stay as 2 columns */
    .section-initial-and-targets div[style*="grid-template-columns: 1fr 1fr"] {
        display: grid !important;
        grid-template-columns: 1fr 1fr !important;
        gap: 8px !important;
    }

    /* Ensure summary items are compact on mobile */
    .summary-item {
        padding: 10px !important;
        font-size: 0.85em !important;
    }

    .summary-item label {
        font-size: 0.8em !important;
        margin-bottom: 5px !important;
    }

    .summary-item .value {
        font-size: 0.95em !important;
    }

    /* Compact form groups on mobile */
    .section-initial-and-targets .form-group {
        margin-bottom: 0 !important;
    }

    .section-initial-and-targets .form-group label {
        font-size: 0.75em !important;
        white-space: nowrap;
    }

    .section-initial-and-targets .form-group input,
    .section-initial-and-targets .output-field {
        font-size: 0.85em !important;
        padding: 8px 6px !important;
    }
}

/* تحسين landscape mode للهواتف */
@media (max-width: 768px) and (orientation: landscape) {
    .container {
        padding: 0 20px;
    }

    h1 {
        font-size: 1.4em;
        margin-bottom: 15px;
    }

    h2 {
        font-size: 1.2em;
        margin-bottom: 12px;
    }

    .section {
        padding: 15px;
    }

    .details-content-wrapper {
        grid-template-columns: 1fr 1fr;
    }

    .summary-totals {
        grid-template-columns: repeat(4, 1fr);
    }
}

/* تحسين للشاشات العريضة جداً */
@media (min-width: 1920px) {
    .container {
        max-width: 2400px;
    }

    h1 {
        font-size: 2.2em;
    }

    h2 {
        font-size: 1.6em;
    }

    .summary-table {
        font-size: 1em;
    }

    .repurchase-table {
        font-size: 1em;
    }
}

/* تحسين الطباعة */
@media print {
    .controls-bar {
        display: none !important;
    }

    .section {
        break-inside: avoid;
        page-break-inside: avoid;
    }

    body {
        background: white;
        color: black;
    }

    .summary-table,
    .repurchase-table {
        font-size: 0.8em;
    }
}

/* ========== نظام الرسائل المخصص (Toast Notifications) ========== */

/* حاوية الرسائل */
#toast-container {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 999999;
    display: flex;
    flex-direction: column;
    gap: 12px;
    pointer-events: none;
    max-width: 420px;
    width: auto;
}

/* الرسالة الفردية */
.toast {
    background: var(--section-bg);
    color: var(--text-color);
    padding: 18px 24px;
    border-radius: 12px;
    box-shadow: 0 8px 32px var(--color-val-rgba-0-0-0-0-5);
    border: 2px solid var(--border-color);
    display: flex;
    align-items: center;
    gap: 14px;
    min-width: 320px;
    max-width: 420px;
    width: auto;
    pointer-events: auto;
    animation: slideInDown 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    backdrop-filter: blur(10px);
    position: relative;
    overflow: hidden;
}

.toast::before {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    width: 4px;
    height: 100%;
    background: var(--toast-color, var(--primary-color));
}

/* أنواع الرسائل */
.toast.success {
    --toast-color: var(--positive-color);
    border-color: var(--positive-color);
}

.toast.error {
    --toast-color: var(--negative-color);
    border-color: var(--negative-color);
}

.toast.warning {
    --toast-color: var(--warning-color);
    border-color: var(--warning-color);
}

.toast.info {
    --toast-color: var(--info-color);
    border-color: var(--info-color);
}

/* أيقونة الرسالة */
.toast-icon {
    font-size: 1.5em;
    flex-shrink: 0;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    background: var(--color-val-rgba-255-255-255-0-1);
}

.toast.success .toast-icon {
    color: var(--positive-color);
}

.toast.error .toast-icon {
    color: var(--negative-color);
}

.toast.warning .toast-icon {
    color: var(--warning-color);
}

.toast.info .toast-icon {
    color: var(--info-color);
}

/* محتوى الرسالة */
.toast-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.toast-title {
    font-weight: var(--font-weight-bold);
    font-size: 1em;
    color: var(--text-light);
}

.toast-message {
    font-size: 0.9em;
    color: var(--text-muted);
    line-height: 1.4;
}

/* زر الإغلاق */
.toast-close {
    background: none;
    border: none;
    color: var(--text-muted);
    font-size: 1.3em;
    cursor: pointer;
    padding: 4px;
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: all 0.2s ease;
    flex-shrink: 0;
}

.toast-close:hover {
    background: var(--color-val-rgba-255-255-255-0-1);
    color: var(--text-light);
}

/* شريط التقدم */
.toast-progress {
    position: absolute;
    bottom: 0;
    right: 0;
    height: 3px;
    background: var(--toast-color, var(--primary-color));
    width: 100%;
    transform-origin: right;
    animation: progressBar linear forwards;
}

/* الرسائل في الوضع الفاتح */
html[data-theme="light"] body .toast {
    background: var(--color-val-hex-ffffff);
    box-shadow: 0 8px 32px var(--color-val-rgba-0-0-0-0-15);
}

html[data-theme="light"] body .toast-icon {
    background: var(--color-val-rgba-0-0-0-0-05);
}

/* الأنيميشن */
@keyframes slideInDown {
    from {
        opacity: 0;
        transform: translateX(120%);
    }

    to {
        opacity: 1;
        transform: translateX(0);
    }
}

@keyframes slideOutUp {
    from {
        opacity: 1;
        transform: translateX(0);
    }

    to {
        opacity: 0;
        transform: translateX(120%);
    }
}

@keyframes progressBar {
    from {
        transform: scaleX(1);
    }

    to {
        transform: scaleX(0);
    }
}

.toast.removing {
    animation: slideOutUp 0.3s cubic-bezier(0.4, 0, 1, 1) forwards;
}

/* نافذة التأكيد المخصصة */
#confirm-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: var(--color-val-rgba-0-0-0-0-7);
    backdrop-filter: blur(5px);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 9999999;
    animation: fadeIn 0.2s ease;
}

#confirm-modal.show {
    display: flex;
}

.confirm-dialog {
    background: var(--section-bg);
    border: 2px solid var(--border-color);
    border-radius: 16px;
    padding: 30px;
    max-width: 500px;
    width: 90%;
    box-shadow: 0 12px 48px var(--color-val-rgba-0-0-0-0-6);
    animation: scaleIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.confirm-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 20px;
}

.confirm-icon {
    font-size: 2em;
    color: var(--warning-color);
}

.confirm-title {
    font-size: 1.3em;
    font-weight: var(--font-weight-bold);
    color: var(--text-light);
}

.confirm-message {
    font-size: 1em;
    color: var(--text-color);
    line-height: 1.6;
    margin-bottom: 25px;
    white-space: pre-line;
}

.confirm-buttons {
    display: flex;
    gap: 12px;
    justify-content: flex-end;
}

.confirm-btn {
    padding: 12px 24px;
    border: none;
    border-radius: 8px;
    font-size: 0.95em;
    font-weight: var(--font-weight-bold);
    cursor: pointer;
    transition: all 0.3s ease;
    min-width: 100px;
}

.confirm-btn-yes {
    background: linear-gradient(135deg, var(--negative-color) 0%, var(--color-val-hex-ff6666) 100%);
    color: white;
    box-shadow: 0 3px 8px var(--color-val-rgba-255-68-68-0-3);
}

.confirm-btn-yes:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px var(--color-val-rgba-255-68-68-0-4);
}

.confirm-btn-no {
    background: var(--hover-bg);
    color: var(--text-color);
    border: 1px solid var(--border-color);
}

.confirm-btn-no:hover {
    background: var(--section-bg);
    border-color: var(--primary-color);
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

@keyframes scaleIn {
    from {
        opacity: 0;
        transform: scale(0.9);
    }

    to {
        opacity: 1;
        transform: scale(1);
    }
}

/* استجابة للهواتف */
@media (max-width: 600px) {
    #toast-container {
        top: 10px;
        right: 10px;
        max-width: 340px;
    }

    .toast {
        min-width: 280px;
        max-width: 340px;
        width: auto;
        padding: 14px 18px;
        gap: 10px;
    }

    .toast-icon {
        font-size: 1.3em;
        width: 28px;
        height: 28px;
    }

    .toast-title {
        font-size: 0.95em;
    }

    .toast-message {
        font-size: 0.85em;
    }

    .toast-close {
        width: 24px;
        height: 24px;
        font-size: 1.1em;
    }

    .confirm-dialog {
        padding: 24px;
    }

    .confirm-buttons {
        flex-direction: column;
    }

    .confirm-btn {
        width: 100%;
    }

    /* تصغير أيقونات العملات */
    .coin-icon {
        width: 18px !important;
        height: 18px !important;
        margin-left: 6px;
    }

    .coin-icon-fallback {
        width: 18px !important;
        height: 18px !important;
        font-size: 9px !important;
        margin-left: 6px;
    }

    .coin-icon-small {
        width: 16px !important;
        height: 16px !important;
    }
}

/* استجابة للشاشات الصغيرة جداً */
@media (max-width: 400px) {
    #toast-container {
        top: 10px;
        right: 8px;
        max-width: calc(100vw - 16px);
    }

    .toast {
        min-width: auto;
        max-width: 100%;
        width: auto;
        padding: 12px 16px;
        gap: 8px;
    }

    .toast-icon {
        font-size: 1.2em;
        width: 26px;
        height: 26px;
    }

    .toast-title {
        font-size: 0.9em;
    }

    .toast-message {
        font-size: 0.8em;
    }

    /* تصغير أيقونات العملات أكثر */
    .coin-icon {
        width: 16px !important;
        height: 16px !important;
        margin-left: 5px;
    }

    .coin-icon-fallback {
        width: 16px !important;
        height: 16px !important;
        font-size: 8px !important;
        margin-left: 5px;
    }

    .coin-icon-small {
        width: 14px !important;
        height: 14px !important;
    }
}


/* New Header Styles */
.app-header {
    width: 100%;
    padding: 12px 20px;
    background-color: var(--section-bg);
    border-bottom: 2px solid var(--border-color);
    margin: 0;
    border-radius: 0;
    position: sticky;
    top: 0;
    z-index: 1000;
    backdrop-filter: saturate(180%) blur(6px);
    box-shadow: 0 2px 10px var(--color-val-rgba-0-0-0-0-05);
}

html[data-theme="light"] body .app-header {
    background-color: var(--color-val-hex-ffffff);
}

.header-inner {
    max-width: 100%;
    margin: 0;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 16px;
}

.header-left,
.header-right {
    display: flex;
    align-items: center;
    gap: 12px;
}

.header-divider {
    width: 1px;
    height: 22px;
    background-color: var(--border-color);
    opacity: 0.7;
    margin: 0 8px;
}

.site-title {
    margin: 0;
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 1.6em;
    color: var(--color-val-hex-3b9eff);
    font-weight: 700;
    text-shadow: none;
}

.site-title i {
    color: var(--primary-color);
    font-size: 1.1em;
}

.header-btn {
    background: transparent;
    border: none;
    color: var(--text-muted);
    font-size: 1em;
    cursor: pointer;
    padding: 8px;
    border-radius: 10px;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 42px;
    height: 42px;
    position: relative;
}

.header-btn:hover {
    background-color: var(--hover-bg);
    color: var(--primary-color);
}

.header-search {
    position: relative;
    margin-left: 8px;
    width: 360px;
}

.header-search input {
    background-color: var(--bg-color);
    border: 1px solid var(--border-color);
    border-radius: 10px;
    padding: 10px 44px 10px 16px;
    color: var(--text-color);
    width: 100%;
    font-size: 0.9em;
    transition: all 0.2s ease;
}

.header-search input:focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 2px var(--color-val-rgba-59-130-246-0-1);
    outline: none;
    background-color: var(--bg-color);
}

.header-search i {
    position: absolute;
    left: 14px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--text-muted);
    font-size: 1em;
}

.user-avatar img {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    border: 2px solid var(--border-color);
    cursor: pointer;
}

.notification-badge {
    position: absolute;
    top: 5px;
    right: 5px;
    background-color: var(--negative-color);
    color: white;
    font-size: 0.6em;
    padding: 2px 5px;
    border-radius: 10px;
    border: 2px solid var(--section-bg);
    font-weight: bold;
}

.header-btn.relative {
    position: relative;
}

/* Light Mode Adjustments */
html[data-theme="light"] body .header-search input {
    background-color: var(--color-val-hex-f8f9fa);
}

.icons-group {
    display: flex;
    align-items: center;
    gap: 8px;
}

.lang-btn {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    height: 42px;
    padding: 0 12px;
    border-radius: 12px;
    background: transparent;
    border: none;
    color: var(--text-muted);
    font-weight: 600;
    font-size: 0.9em;
    cursor: pointer;
    transition: all 0.2s ease;
}

.lang-btn:hover {
    background-color: var(--hover-bg);
    color: var(--primary-color);
}

.user-avatar img {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    border: 2px solid var(--border-color);
    box-shadow: 0 0 0 4px var(--color-val-rgba-59-130-246-0-08);
}


/* Notification Wrapper */
.notification-wrapper {
    position: relative;
    display: inline-block;
}

/* Notification Dropdown Styles */
.notification-dropdown {
    position: fixed;
    /* تغيير من absolute إلى fixed */
    top: 60px;
    /* من أعلى الشاشة */
    left: 10px;
    /* هامش من اليسار */
    right: auto;
    width: 340px;
    max-width: calc(100vw - 20px);
    /* ضمان عدم تجاوز الشاشة مع هامش */
    background-color: var(--section-bg);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    box-shadow: 0 10px 30px var(--color-val-rgba-0-0-0-0-3);
    z-index: 10000;
    /* زيادة z-index */
    display: none;
    flex-direction: column;
    overflow: hidden;
    animation: fadeInDropdown 0.2s ease;
    max-height: min(450px, calc(100vh - 80px));
    /* ضمان عدم تجاوز ارتفاع الشاشة */
}

.notification-dropdown.active {
    display: flex;
}

@keyframes fadeInDropdown {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.dropdown-header {
    padding: 12px 16px;
    border-bottom: 1px solid var(--border-color);
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-weight: bold;
    font-size: 0.95em;
    background-color: var(--section-bg);
}

.header-actions {
    display: flex;
    gap: 8px;
}

.header-action-btn {
    background: none;
    border: none;
    cursor: pointer;
    font-size: 0.9em;
    padding: 4px;
    border-radius: 4px;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 28px;
}

.header-action-btn.mark-read {
    color: var(--primary-color);
}

.header-action-btn.mark-read:hover {
    background-color: var(--color-val-rgba-59-130-246-0-1);
}

.header-action-btn.clear-all {
    color: var(--negative-color);
}

.header-action-btn.clear-all:hover {
    background-color: var(--color-val-rgba-234-57-67-0-1);
}

/* Notification Tabs */
.notification-tabs {
    display: flex;
    background-color: var(--section-bg);
    border-bottom: 2px solid var(--border-color);
    /* Thicker border for tabs */
}

.notif-tab {
    flex: 1;
    padding: 10px;
    background: none;
    border: none;
    cursor: pointer;
    font-size: 0.9em;
    color: var(--text-muted);
    border-bottom: 2px solid transparent;
    margin-bottom: -2px;
    /* Overlap border */
    transition: all 0.2s;
    font-weight: 600;
}

.notif-tab:hover {
    background-color: var(--hover-bg);
    color: var(--text-color);
}

.notif-tab.active {
    color: var(--primary-color);
    border-bottom-color: var(--primary-color);
}

.dropdown-body {
    max-height: 280px;
    /* تقليل الارتفاع */
    overflow-y: auto;
    min-height: 100px;
    /* ارتفاع أدنى */
}

.notification-item {
    padding: 12px 16px;
    border-bottom: 1px solid var(--border-color);
    display: flex;
    gap: 12px;
    transition: background-color 0.2s;
    cursor: pointer;
    position: relative;
}

.notification-item:hover {
    background-color: var(--hover-bg);
}

/* Delete Button for Item */
.delete-notif-btn {
    position: absolute;
    top: 10px;
    left: 10px;
    /* RTL Left */
    background: none;
    border: none;
    color: var(--text-muted);
    opacity: 0;
    transition: all 0.2s;
    cursor: pointer;
    padding: 4px;
}

.notification-item:hover .delete-notif-btn {
    opacity: 1;
}

.delete-notif-btn:hover {
    color: var(--negative-color);
    transform: scale(1.1);
}

.notification-item.unread {
    background-color: var(--color-val-rgba-59-130-246-0-05);
    /* Highlight unread */
}

.notification-item:last-child {
    border-bottom: none;
}

.notif-icon {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    font-size: 0.9em;
}

.notif-icon.info {
    background: var(--color-val-rgba-59-130-246-0-15);
    color: var(--color-val-hex-3b82f6);
}

.notif-icon.success {
    background: var(--color-val-rgba-22-199-132-0-15);
    color: var(--positive-color);
}

.notif-icon.error {
    background: var(--color-val-rgba-234-57-67-0-15);
    color: var(--negative-color);
}

.notif-icon.warning {
    background: var(--color-val-rgba-245-158-11-0-15);
    color: var(--warning-color);
}

.notif-content {
    flex: 1;
}

.notif-title {
    font-size: 0.9em;
    font-weight: 600;
    margin-bottom: 4px;
}

.notif-message {
    font-size: 0.8em;
    color: var(--text-muted);
    line-height: 1.4;
}

.notif-time {
    font-size: 0.7em;
    color: var(--text-muted);
    margin-top: 4px;
    text-align: left;
}

.empty-notifications {
    padding: 30px;
    text-align: center;
    color: var(--text-muted);
}

.empty-notifications i {
    font-size: 2em;
    margin-bottom: 10px;
    opacity: 0.5;
}

/* Scrollbar styles for dropdown */
.dropdown-body::-webkit-scrollbar {
    width: 6px;
}

.dropdown-body::-webkit-scrollbar-thumb {
    background-color: var(--border-color);
    border-radius: 3px;
}

/* Light Mode Adjustments */
html[data-theme="light"] body .notification-dropdown {
    background-color: var(--color-val-hex-ffffff);
    box-shadow: 0 10px 40px var(--color-val-rgba-0-0-0-0-1);
}

/* Helper Classes */
.mobile-visible {
    display: none !important;
}

/* Mobile Ticker Optimization */
@media (max-width: 768px) {
    .ticker-item {
        padding: 0 8px !important;
        font-size: 0.8em !important;
        height: 32px !important;
    }

    .ticker-item img {
        width: 16px !important;
        height: 16px !important;
    }

    .ticker-item .price {
        font-size: 0.9em !important;
    }

    .ticker-item .change {
        font-size: 0.85em !important;
    }

    /* Reduce animation duration further for mobile perception if needed, but JS handles speed */
}

/* Mobile Header Optimization */
@media (max-width: 768px) {
    .app-header {
        margin: 0;
        border-radius: 0;
        padding: 8px 10px;
        background-color: var(--section-bg);
    }

    .header-inner {
        padding: 0;
        flex-direction: row;
        align-items: center;
        justify-content: space-between;
        gap: 6px;
    }

    .header-right,
    .header-left {
        gap: 6px;
        width: auto;
    }

    .site-title {
        font-size: 1.2em;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        max-width: 60vw;
    }

    .header-divider {
        display: none;
    }

    .icons-group {
        gap: 6px;
    }

    .header-btn {
        width: 36px;
        height: 36px;
        padding: 8px;
        font-size: 1em;
    }

    .header-search {
        width: 100%;
        margin-left: 0;
    }

    .messages-wrapper,
    .icons-group .lang-btn {
        display: none;
    }

    .mobile-hidden {
        display: none !important;
    }

    .mobile-visible {
        display: flex !important;
    }

    .user-avatar img {
        width: 30px;
        height: 30px;
    }

    .notification-dropdown {
        width: 94vw;
        max-width: 360px;
        position: fixed;
        top: 70px;
        left: 50%;
        transform: translateX(-50%);
        right: auto;
        border-radius: 12px;
        box-shadow: 0 10px 40px var(--color-val-rgba-0-0-0-0-25);
        border: 1px solid var(--border-color);
    }
}




/* Mobile Sidebar (Drawer) Styles */
.sidebar-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: var(--color-val-rgba-0-0-0-0-5);
    z-index: 2000;
    display: none;
    backdrop-filter: blur(2px);
    opacity: 0;
    transition: opacity 0.3s ease;
}

.sidebar-overlay.active {
    display: block;
    opacity: 1;
}

.mobile-sidebar {
    position: fixed;
    top: 0;
    left: 0;
    /* Left side drawer */
    width: 280px;
    height: 100%;
    background-color: var(--section-bg);
    z-index: 2001;
    transform: translateX(-100%);
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex;
    flex-direction: column;
    box-shadow: 2px 0 15px var(--color-val-rgba-0-0-0-0-2);
    border-right: 1px solid var(--border-color);
}

.mobile-sidebar.active {
    transform: translateX(0);
}

/* User Profile Widget Styles */
.user-profile-widget {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-right: 15px;
    cursor: pointer;
    transition: transform 0.2s;
}

.user-profile-widget:hover {
    transform: scale(1.02);
}

.glow-avatar-container {
    position: relative;
    width: 42px;
    height: 42px;
    display: flex;
    justify-content: center;
    align-items: center;
}

.glow-avatar {
    width: 38px;
    height: 38px;
    border-radius: 50%;
    border: 2px solid var(--primary-color);
    z-index: 2;
    object-fit: cover;
}

/* Glowing Effect Animation */
.avatar-glow-ring {
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    border: 2px solid var(--primary-color);
    opacity: 0;
    z-index: 1;
    animation: pulse-glow 2s infinite;
}

@keyframes pulse-glow {
    0% {
        transform: scale(1);
        opacity: 0.8;
        box-shadow: 0 0 0 0 var(--color-val-rgba-0-229-153-0-4);
    }

    70% {
        transform: scale(1.4);
        opacity: 0;
        box-shadow: 0 0 0 10px var(--color-val-rgba-0-229-153-0);
    }

    100% {
        transform: scale(1.4);
        opacity: 0;
    }
}

.user-info-text {
    display: flex;
    flex-direction: column;
    justify-content: center;
}

.user-name-display {
    font-weight: bold;
    font-size: 0.95em;
    color: var(--text-color);
}

.user-status-dot {
    width: 6px;
    height: 6px;
    background-color: var(--positive-color);
    border-radius: 50%;
    display: inline-block;
    margin-top: 2px;
    box-shadow: 0 0 5px var(--positive-color);
}

/* Mobile adjustments for User Profile */
@media (max-width: 768px) {
    .user-profile-widget {
        margin-right: 5px;
        gap: 8px;
    }

    .user-name-display {
        font-size: 0.85em;
        max-width: 90px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .glow-avatar-container {
        width: 36px;
        height: 36px;
    }

    .glow-avatar {
        width: 32px;
        height: 32px;
    }
}


/* Mobile Search Overlay Styles */
.mobile-search-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    background-color: var(--section-bg);
    z-index: 1050;
    /* Above header but below sidebar */
    padding: 15px;
    box-shadow: 0 4px 12px var(--color-val-rgba-0-0-0-0-1);
    transform: translateY(-100%);
    transition: transform 0.3s ease;
}

.mobile-search-overlay.active {
    transform: translateY(0);
}

.mobile-search-overlay .search-container {
    position: relative;
    display: flex;
    align-items: center;
}

.mobile-search-overlay input {
    width: 100%;
    padding: 12px 45px 12px 40px;
    border: none;
    background-color: var(--bg-color);
    border-radius: 8px;
    font-size: 1.1em;
    color: var(--text-color);
}

.mobile-search-overlay input:focus {
    outline: 2px solid var(--primary-color);
}

.mobile-search-overlay .search-icon {
    position: absolute;
    right: 15px;
    /* RTL aware? If RTL, this should be right */
    color: var(--text-muted);
}

.mobile-search-overlay .close-search-btn {
    position: absolute;
    right: 15px;
    background: none;
    border: none;
    color: var(--text-muted);
    font-size: 1.1em;
    cursor: pointer;
}

/* Professional Toolbar Styles */
.professional-toolbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 24px;
    padding: 4px 2px;
}

.toolbar-status {
    display: flex;
    align-items: center;
    gap: 12px;
    flex-wrap: wrap;
    min-width: 0;
}

.toolbar-controls {
    display: flex;
    align-items: center;
    gap: 12px;
}

.pro-search {
    position: relative;
    display: flex;
    align-items: center;
}

.pro-search input {
    width: 220px;
    height: 40px;

    border: 1px solid var(--border-color);
    border-radius: 10px;
    padding-right: 38px;
    /* Space for icon in RTL */
    padding-left: 15px;
    font-size: 0.85em;
    transition: all 0.25s ease;
    color: var(--text-color);
    font-family: inherit;
}

.pro-search input:focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px var(--color-val-rgba-59-130-246-0-1);
    background-color: var(--bg-color);
}

.pro-search .search-icon {
    position: absolute;
    right: 12px;
    color: var(--text-muted);
    pointer-events: none;
    font-size: 0.9em;
    transition: color 0.3s ease;
}

.pro-search input:focus~.search-icon {
    color: var(--primary-color);
}

.pro-btn {
    height: 40px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    background-color: var(--section-bg);
    border: 1px solid var(--border-color);
    border-radius: 10px;
    padding: 0 16px;
    color: var(--text-muted);
    font-size: 0.85em;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
}

.pro-btn:hover {
    border-color: var(--primary-color);
    color: var(--primary-color);
    background-color: var(--color-val-rgba-59-130-246-0-04);
    transform: translateY(-1px);
}

.pro-btn.icon-only {
    width: 40px;
    padding: 0;
    font-size: 1em;
}

/* Large Screens Enhancements */
@media (min-width: 992px) {
    .professional-toolbar {
        padding: 10px 12px;
    }

    .toolbar-controls {
        gap: 16px;
    }

    .pro-search input {
        width: 280px;
    }
}

@media (min-width: 1200px) {
    .professional-toolbar {
        padding: 14px 16px;
    }

    .pro-search input {
        width: 320px;
    }
}

/* Responsive Adjustments for Toolbar */
@media (max-width: 600px) {
    .professional-toolbar {
        flex-direction: column;
        gap: 12px;
        align-items: stretch;
        padding: 10px;
    }

    .toolbar-controls {
        width: 100%;
        display: grid;
        grid-template-columns: 1fr;
        grid-template-areas:
            "search"
            "status"
            "chart";
        align-items: center;
        gap: 10px;
    }

    .pro-search {
        flex: 1;
        grid-area: search;
    }

    .pro-search input {
        width: 100%;
    }

    .toolbar-search {
        max-width: 100%;
        flex: 1 1 100%;
    }

    .toolbar-search #tableSearchInput {
        height: 42px;
    }

    .toolbar-actions {
        display: flex;
        justify-content: space-between;
    }

    .toolbar-status {
        display: grid;
        grid-template-columns: 1fr;
        gap: 8px;
        grid-area: status;
    }

    .toolbar-status>div {
        background: var(--bg-color);
        border: 1px solid var(--border-color);
        border-radius: 10px;
        padding: 8px 10px;
        font-size: 0.85em;
        color: var(--text-color);
        white-space: normal;
        word-break: break-word;
        width: 100%;
    }

    .pro-btn {
        height: 36px;
    }

    .pro-btn.icon-only {
        width: 34px;
    }

    .toolbar-actions .pro-btn span {
        display: none;
    }

    #chartBtn span:not(#chartCoinName) {
        display: none;
    }

    #chartBtn {
        min-width: 44px;
        padding: 0 12px;
        height: 40px;
        grid-area: chart;
        width: 100%;
        justify-content: center;
    }

    #chartCoinName {
        max-width: 60%;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }
}

@media (max-width: 768px) {

    .repurchase-table th:nth-child(3),
    .repurchase-table td:nth-child(3) {
        min-width: 100px;
    }
}

@media (max-width: 600px) {

    .repurchase-table th:nth-child(3),
    .repurchase-table td:nth-child(3) {
        min-width: 90px;
    }
}

@media (min-width: 600px) and (max-width: 1024px) {
    .professional-toolbar {
        padding: 12px 14px;
        gap: 10px;
    }

    .toolbar-controls {
        display: grid;
        grid-template-columns: 1fr auto;
        grid-template-areas:
            "search search"
            "status chart";
        align-items: center;
        width: 100%;
        gap: 10px;
    }

    .pro-search {
        grid-area: search;
    }

    .pro-search input {
        width: 100%;
    }

    #chartBtn {
        grid-area: chart;
        justify-self: end;
        min-height: 40px;
    }

    .toolbar-status {
        grid-area: status;
    }

    .toolbar-status>div {
        padding: 8px 10px;
        font-size: 0.9em;
        width: 100%;
    }
}

*,
*::before,
*::after {
    box-shadow: none !important;
    text-shadow: none !important;
}

.repurchase-datetime {
    font-size: 0.85em;
    line-height: 1.4;
    color: var(--text-muted);
    min-height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.add-time-btn {
    background: var(--primary-color);
    color: white;
    border: none;
    padding: 4px 8px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.8em;
    transition: background 0.3s;
}

.add-time-btn:hover {
    background: var(--secondary-color);
}

.manual-time-input {
    background: var(--bg-color);
    color: var(--text-color);
    border: 1px solid var(--border-color);
    padding: 4px;
    border-radius: 4px;
    width: 100%;
    box-sizing: border-box;
    font-family: inherit;
}

.icon-btn {
    background: none;
    border: none;
    color: var(--primary-color);
    cursor: pointer;
    font-size: 1.1em;
    padding: 5px;
    transition: color 0.3s;
}

.icon-btn:hover {
    color: var(--secondary-color);
}

/* ========== Responsive Grid for Targets and Stop Loss ========== */

/* تأكد من بقاء التنسيق الأفقي حتى في الشاشات الصغيرة */
@media (max-width: 768px) {
    .form-group[style*="grid-template-columns"] {
        display: grid !important;
        grid-template-columns: 1fr 1fr !important;
        gap: 8px !important;
    }

    .form-group[style*="grid-template-columns"] label {
        font-size: 0.85em;
    }

    .form-group[style*="grid-template-columns"] input,
    .form-group[style*="grid-template-columns"] .output-field {
        font-size: 0.9em;
        padding: 8px 10px;
    }
}

@media (max-width: 480px) {
    .form-group[style*="grid-template-columns"] {
        display: grid !important;
        grid-template-columns: 1fr 1fr !important;
        gap: 6px !important;
    }

    .form-group[style*="grid-template-columns"] label {
        font-size: 0.8em;
    }

    .form-group[style*="grid-template-columns"] input,
    .form-group[style*="grid-template-columns"] .output-field {
        font-size: 0.85em;
        padding: 7px 8px;
    }
}

/* ========== Date/Time Picker Modal Styles ========== */

/* Modal Overlay */
.datetime-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: var(--color-val-rgba-0-0-0-0-7);
    backdrop-filter: blur(5px);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    animation: fadeIn 0.2s ease;
}

.datetime-modal.show {
    display: flex;
}

/* Modal Content */
.datetime-modal-content {
    background: var(--section-bg);
    border: 2px solid var(--border-color);
    border-radius: 16px;
    padding: 0;
    max-width: 480px;
    width: 90%;
    box-shadow: 0 12px 48px var(--color-val-rgba-0-0-0-0-6);
    animation: scaleIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    overflow: hidden;
}

/* Modal Header */
.datetime-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 20px 24px;
    background: var(--hover-bg);
    border-bottom: 2px solid var(--border-color);
}

.datetime-header h3 {
    margin: 0;
    font-size: 1.3em;
    color: var(--primary-color);
    font-weight: var(--font-weight-bold);
}

.close-datetime-modal {
    background: none;
    border: none;
    color: var(--text-muted);
    font-size: 2em;
    cursor: pointer;
    padding: 0;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: all 0.2s ease;
    line-height: 1;
}

.close-datetime-modal:hover {
    background: var(--color-val-rgba-255-71-87-0-1);
    color: var(--negative-color);
}

/* Modal Body */
.datetime-body {
    padding: 24px;
    display: flex;
    flex-direction: column;
    gap: 20px;
}

/* Quick Time Buttons */
.quick-time-buttons {
    display: flex;
    gap: 10px;
    justify-content: center;
    flex-wrap: wrap;
}

.quick-time-buttons button {
    padding: 8px 16px;
    background: var(--hover-bg);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    color: var(--text-color);
    font-size: 0.9em;
    font-weight: var(--font-weight-semibold);
    cursor: pointer;
    transition: all 0.2s ease;
}

.quick-time-buttons button:hover {
    background: var(--primary-color);
    color: white;
    border-color: var(--primary-color);
    transform: translateY(-1px);
}

/* Date Picker */
.date-picker {
    background: var(--bg-color);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    padding: 16px;
}

.date-picker-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 16px;
    padding-bottom: 12px;
    border-bottom: 2px solid var(--border-color);
}

.date-picker-header button {
    background: var(--hover-bg);
    border: 1px solid var(--border-color);
    color: var(--text-color);
    font-size: 1.2em;
    width: 36px;
    height: 36px;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
}

.date-picker-header button:hover {
    background: var(--primary-color);
    color: white;
    border-color: var(--primary-color);
}

.date-picker-header span {
    font-size: 1.1em;
    font-weight: var(--font-weight-bold);
    color: var(--text-light);
}

/* Calendar Grid */
.date-picker-weekdays {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 4px;
    margin-bottom: 8px;
}

.date-picker-weekday {
    text-align: center;
    font-size: 0.85em;
    font-weight: var(--font-weight-bold);
    color: var(--text-muted);
    padding: 8px 4px;
}

.date-picker-days {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 4px;
}

.date-picker-day {
    aspect-ratio: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--section-bg);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    cursor: pointer;
    font-size: 0.9em;
    color: var(--text-color);
    transition: all 0.2s ease;
    font-weight: var(--font-weight-normal);
}

.date-picker-day:hover {
    background: var(--hover-bg);
    border-color: var(--primary-color);
    transform: scale(1.05);
}

.date-picker-day.other-month {
    color: var(--text-muted);
    opacity: 0.4;
}

.date-picker-day.today {
    border: 2px solid var(--primary-color);
    font-weight: var(--font-weight-bold);
}

.date-picker-day.selected {
    background: var(--primary-color);
    color: white;
    border-color: var(--primary-color);
    font-weight: var(--font-weight-bold);
}

.date-picker-day.disabled {
    opacity: 0.3;
    cursor: not-allowed;
}

.date-picker-day.disabled:hover {
    transform: none;
}

/* Time Picker */
.time-picker {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    background: var(--bg-color);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    padding: 16px;
}

.time-picker label {
    font-size: 0.95em;
    font-weight: var(--font-weight-semibold);
    color: var(--text-color);
}

.time-picker input {
    width: 70px;
    padding: 10px;
    background: var(--section-bg);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    color: var(--text-color);
    font-size: 1.1em;
    font-weight: var(--font-weight-bold);
    text-align: center;
    transition: all 0.2s ease;
}

.time-picker input:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px var(--color-val-rgba-59-158-255-0-2);
}

.time-picker input::-webkit-inner-spin-button,
.time-picker input::-webkit-outer-spin-button {
    opacity: 1;
    height: 30px;
}

.time-separator {
    font-size: 1.5em;
    font-weight: var(--font-weight-bold);
    color: var(--text-muted);
}

/* Modal Footer */
.datetime-footer {
    display: flex;
    gap: 12px;
    justify-content: flex-end;
    padding: 20px 24px;
    background: var(--hover-bg);
    border-top: 2px solid var(--border-color);
}

.datetime-footer button {
    padding: 12px 24px;
    border: none;
    border-radius: 8px;
    font-size: 0.95em;
    font-weight: var(--font-weight-bold);
    cursor: pointer;
    transition: all 0.3s ease;
    min-width: 100px;
}

.datetime-footer .btn-cancel {
    background: var(--section-bg);
    color: var(--text-color);
    border: 1px solid var(--border-color);
}

.datetime-footer .btn-cancel:hover {
    background: var(--hover-bg);
    border-color: var(--primary-color);
}

.datetime-footer .btn-save {
    background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
    color: white;
    box-shadow: 0 3px 8px var(--color-val-rgba-59-158-255-0-3);
}

.datetime-footer .btn-save:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px var(--color-val-rgba-59-158-255-0-4);
}

/* Light Mode Adjustments */
html[data-theme="light"] body .datetime-modal-content {
    background: var(--color-val-hex-ffffff);
}

html[data-theme="light"] body .datetime-header {
    background: var(--color-val-hex-f8f9fa);
}

html[data-theme="light"] body .date-picker,
html[data-theme="light"] body .time-picker {
    background: var(--color-val-hex-f8f9fa);
}

html[data-theme="light"] body .date-picker-day {
    background: var(--color-val-hex-ffffff);
}

html[data-theme="light"] body .datetime-footer {
    background: var(--color-val-hex-f8f9fa);
}

/* Mobile Responsive */
@media (max-width: 600px) {
    .datetime-modal-content {
        width: 95%;
        max-width: 100%;
    }

    .datetime-header {
        padding: 16px 20px;
    }

    .datetime-header h3 {
        font-size: 1.1em;
    }

    .datetime-body {
        padding: 20px;
        gap: 16px;
    }

    .quick-time-buttons button {
        padding: 6px 12px;
        font-size: 0.85em;
    }

    .date-picker {
        padding: 12px;
    }

    .date-picker-header {
        margin-bottom: 12px;
    }

    .date-picker-header span {
        font-size: 1em;
    }

    .date-picker-day {
        font-size: 0.85em;
    }

    .time-picker {
        padding: 12px;
        gap: 8px;
    }

    .time-picker input {
        width: 60px;
        padding: 8px;
        font-size: 1em;
    }

    .datetime-footer {
        padding: 16px 20px;
        flex-direction: column;
    }

    .datetime-footer button {
        width: 100%;
    }
}

/* ========================================
           Crypto Ticker Styles
           ======================================== */
.crypto-ticker-wrap {
    width: calc(100% - 30px);
    max-width: 100%;
    height: 48px;
    background-color: var(--section-bg);
    border: 1px solid var(--border-color);
    border-radius: 12px;
    overflow: hidden;
    position: relative;
    z-index: 99;
    box-shadow: 0 4px 12px var(--color-val-rgba-0-0-0-0-1);
    display: flex;
    align-items: center;
    margin: 15px auto;
}

.ticker-scroll {
    display: flex;
    width: fit-content;
    height: 100%;
    align-items: center;
    animation: ticker 60s linear infinite;
    direction: ltr;
    will-change: transform;
    /* Force LTR for predictable sliding */
}

.ticker-scroll:hover {
    animation-play-state: paused;
}

@keyframes ticker {
    0% {
        transform: translate3d(0, 0, 0);
    }

    100% {
        transform: translate3d(-50%, 0, 0);
    }
}

.ticker-item {
    display: flex;
    align-items: center;
    padding: 0 15px;
    white-space: nowrap;
    color: var(--text-color);
    font-size: 0.9em;
    font-weight: 600;
    border-right: 1px solid var(--border-color);
    height: 100%;
    cursor: pointer;
    transition: background-color 0.2s;
}

.ticker-item:hover {
    background-color: var(--hover-bg);
}

.ticker-item img {
    width: 20px;
    height: 20px;
    margin-right: 8px;
    border-radius: 50%;
}

.ticker-item .price {
    margin: 0 6px;
    color: var(--text-color);
    font-family: 'Roboto Mono', monospace;
    font-weight: 700;
}

.ticker-item .change {
    font-size: 0.85em;
    direction: ltr;
    font-weight: 700;
}

.ticker-item.positive .change {
    color: var(--positive-color);
}

.ticker-item.negative .change {
    color: var(--negative-color);
}

/* Light mode adjustments */
html[data-theme="light"] body .crypto-ticker-wrap {
    background: var(--color-val-hex-ffffff);
    box-shadow: 0 2px 8px var(--color-val-rgba-0-0-0-0-05);
}

/* --- Validation Modal Styles --- */
.validation-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: var(--color-val-rgba-2-6-23-0-72);
    backdrop-filter: blur(12px) saturate(160%);
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease;
}

.validation-overlay.active {
    opacity: 1;
    visibility: visible;
}

.validation-box {
    background: radial-gradient(circle at top, var(--color-val-rgba-15-23-42-0-96), var(--color-val-rgba-2-6-23-0-96));
    border: 1px solid var(--color-val-rgba-59-158-255-0-2);
    padding: 34px 30px;
    border-radius: 22px;
    text-align: center;
    width: min(90vw, 360px);
    transform: scale(0.95);
    transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.3s ease;
    box-shadow:
        0 24px 60px var(--color-val-rgba-2-6-23-0-55),
        0 0 0 1px var(--color-val-rgba-59-158-255-0-12) inset;
}

.validation-overlay.active .validation-box {
    transform: scale(1);
}

/* Pulse Animation */
.validation-icon-wrapper {
    width: 72px;
    height: 72px;
    background: radial-gradient(circle at 30% 30%, var(--color-val-rgba-59-130-246-0-25), var(--color-val-rgba-15-23-42-0-15));
    border-radius: 50%;
    margin: 0 auto 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    border: 1px solid var(--color-val-rgba-96-165-250-0-35);
    box-shadow: 0 10px 26px var(--color-val-rgba-59-130-246-0-22);
}

.validation-icon-wrapper i {
    font-size: 28px;
    color: var(--color-val-hex-7dd3fc);
    transition: color 0.3s;
}

.validation-icon-wrapper::after {
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    border: 2px solid var(--primary-color);
    animation: pulse-ring 2s infinite;
    opacity: 0;
}

@keyframes pulse-ring {
    0% {
        transform: scale(0.8);
        opacity: 0.8;
    }

    100% {
        transform: scale(1.5);
        opacity: 0;
    }
}

.validation-title {
    font-size: 1.1rem;
    font-weight: 700;
    margin-bottom: 8px;
    color: var(--color-val-hex-e2e8f0);
}

.validation-status {
    font-size: 0.9rem;
    color: var(--color-val-hex-94a3b8);
    margin-bottom: 18px;
    height: 22px;
}

/* Progress Bar */
.validation-progress-bg {
    width: 100%;
    height: 6px;
    background: var(--color-val-rgba-148-163-184-0-18);
    border-radius: 999px;
    overflow: hidden;
}

.validation-progress-fill {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, var(--color-val-hex-38bdf8), var(--color-val-hex-3b82f6));
    border-radius: 999px;
    transition: width 0.4s ease, background 0.3s;
}

/* Success/Error States */
.validation-box.success .validation-icon-wrapper {
    background: var(--color-val-rgba-16-185-129-0-1);
}

.validation-box.success .validation-icon-wrapper i {
    color: var(--positive-color);
}

.validation-box.success .validation-title {
    color: var(--positive-color);
}

.validation-box.success .validation-progress-fill {
    background: var(--positive-color);
}

.validation-box.error .validation-icon-wrapper {
    background: var(--color-val-rgba-239-68-68-0-1);
}

.validation-box.error .validation-icon-wrapper i {
    color: var(--negative-color);
}

.validation-box.error .validation-title {
    color: var(--negative-color);
}

.validation-box.error .validation-progress-fill {
    background: var(--negative-color);
}

/* Light mode adjustments */
html[data-theme="light"] body .validation-box {
    background: var(--color-val-hex-ffffff);
    border: 1px solid var(--color-val-hex-e2e8f0);
    box-shadow:
        0 18px 40px var(--color-val-rgba-15-23-42-0-12),
        0 0 0 1px var(--color-val-rgba-59-130-246-0-08) inset;
}

/* Prevent scroll when modal is open */
body.modal-open,
html.modal-open {
    overflow: hidden !important;
    height: 100vh !important;
    /* Ensure content doesn't jump */
}

/* =========================================
           Ticker Enhancements (UX Improvements)
           ========================================= */

/* 1. Gradient Fade Edges (Mask) */
.crypto-ticker-wrap {
    /* Smooth fade-in/fade-out at edges */
    -webkit-mask-image: linear-gradient(to right, transparent, black 5%, black 95%, transparent);
    mask-image: linear-gradient(to right, transparent, black 5%, black 95%, transparent);
}

/* 2. Pause on Hover */
.crypto-ticker-wrap:hover #cryptoTicker {
    animation-play-state: paused;
}

/* 3. Interactive Hover Effects */
.ticker-item {
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    opacity: 0.9;
    border-radius: 8px;
    /* Smooth corners */
}

.ticker-item:hover {
    transform: scale(1.15);
    background: var(--color-val-rgba-59-130-246-0-15);
    /* Highlight bg */
    z-index: 100;
    /* Bring to front */
    opacity: 1 !important;
    cursor: pointer;
    box-shadow: 0 4px 15px var(--color-val-rgba-0-0-0-0-3);
    /* Add depth */
}

/* Enhancing the icon on hover inside the item */
.ticker-item:hover img {
    transform: scale(1.1);
    filter: drop-shadow(0 0 5px var(--color-val-rgba-255-255-255-0-5));
    transition: all 0.3s ease;
}

/* =========================================
           Pro Features: Glassmorphism & Skeleton
           ========================================= */

/* 1. Glassmorphism */
.crypto-ticker-wrap {
    background: var(--color-val-rgba-255-255-255-0-02);
    /* Extremely subtle fill */
    backdrop-filter: blur(8px);
    /* Frosty effect */
    -webkit-backdrop-filter: blur(8px);
    border-top: 1px solid var(--color-val-rgba-255-255-255-0-05);
    border-bottom: 1px solid var(--color-val-rgba-255-255-255-0-05);
}

/* Light mode glass */
html[data-theme="light"] body .crypto-ticker-wrap {
    background: var(--color-val-rgba-255-255-255-0-6);
    border-top: 1px solid var(--color-val-rgba-0-0-0-0-05);
    border-bottom: 1px solid var(--color-val-rgba-0-0-0-0-05);
}

/* 2. Skeleton Loading */
@keyframes shimmer {
    0% {
        background-position: -200% 0;
    }

    100% {
        background-position: 200% 0;
    }
}

.ticker-skeleton {
    display: flex;
    align-items: center;
    padding: 0 15px;
    /* Match .ticker-item padding */
    gap: 8px;
    opacity: 0.5;
}

.skeleton-icon {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: linear-gradient(90deg, var(--color-val-hex-1f2937) 25%, var(--color-val-hex-374151) 50%, var(--color-val-hex-1f2937) 75%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
}

.skeleton-text {
    height: 12px;
    border-radius: 4px;
    background: linear-gradient(90deg, var(--color-val-hex-1f2937) 25%, var(--color-val-hex-374151) 50%, var(--color-val-hex-1f2937) 75%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
}

html[data-theme="light"] body .skeleton-icon,
html[data-theme="light"] body .skeleton-text {
    background: linear-gradient(90deg, var(--color-val-hex-e5e7eb) 25%, var(--color-val-hex-d1d5db) 50%, var(--color-val-hex-e5e7eb) 75%);
    background-size: 200% 100%;
}

/* =========================================
           Professional Update Modal (Enhanced)
           ========================================= */
.donate-fab {
    position: fixed;
    right: 18px;
    bottom: 18px;
    width: 48px;
    height: 48px;
    border-radius: 14px;
    border: none;
    background: linear-gradient(135deg, var(--color-val-hex-ef4444), var(--color-val-hex-f97316));
    color: var(--color-val-hex-fff);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 12px 24px var(--color-val-rgba-239-68-68-0-35);
    cursor: pointer;
    z-index: 12000;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

body.donate-open .app-header {
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
    transform: translateY(-12px);
}

.donate-fab i {
    font-size: 18px;
}

.donate-fab:hover {
    transform: translateY(-2px);
    box-shadow: 0 16px 28px var(--color-val-rgba-239-68-68-0-45);
}

@media (max-width: 600px) {
    .donate-fab {
        width: 44px;
        height: 44px;
        right: 14px;
        bottom: 14px;
    }
}

.update-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 9999;
    display: none;
    justify-content: center;
    align-items: center;
}

.update-modal.active {
    display: flex;
    animation: modalFadeIn 0.3s ease-out;
}

@keyframes modalFadeIn {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

.update-modal-backdrop {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: var(--color-val-rgba-0-0-0-0-75);
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    opacity: 0;
    transition: opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.update-modal.active .update-modal-backdrop {
    opacity: 1;
}

.update-modal-content {
    position: relative;
    background: radial-gradient(circle at top, var(--color-val-rgba-30-41-59-0-95), var(--color-val-rgba-10-16-28-0-96) 55%);
    border: 1px solid var(--color-val-rgba-96-165-250-0-22);
    border-radius: 24px;
    padding: 40px 36px;
    text-align: center;
    width: min(92vw, 400px);
    box-shadow:
        0 25px 50px -12px var(--color-val-rgba-0-0-0-0-5),
        0 0 0 1px var(--color-val-rgba-59-130-246-0-12),
        inset 0 1px 0 0 var(--color-val-rgba-255-255-255-0-06);
    transform: scale(0.95) translateY(20px);
    opacity: 0;
    transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    overflow: hidden;
    z-index: 10000;
}

/* Subtle gradient overlay */
.update-modal-content::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg,
            transparent,
            var(--color-val-rgba-59-130-246-0-5),
            transparent);
}

.update-modal-content::after {
    content: '';
    position: absolute;
    inset: 0;
    background:
        radial-gradient(circle at 20% 20%, var(--color-val-rgba-59-130-246-0-12), transparent 55%),
        radial-gradient(circle at 80% 10%, var(--color-val-rgba-14-165-233-0-12), transparent 55%);
    opacity: 0.6;
    pointer-events: none;
}

/* Light Mode Card */
html[data-theme="light"] body .update-modal-content {
    background: linear-gradient(135deg, var(--color-val-rgba-255-255-255-0-98), var(--color-val-rgba-248-250-252-0-98));
    border-color: var(--color-val-rgba-59-130-246-0-15);
    box-shadow:
        0 25px 50px -12px var(--color-val-rgba-0-0-0-0-15),
        0 0 0 1px var(--color-val-rgba-0-0-0-0-05);
}

.update-modal.active .update-modal-content {
    transform: scale(1) translateY(0);
    opacity: 1;
}

.update-icon-wrapper {
    width: 78px;
    height: 78px;
    background: radial-gradient(circle at 30% 30%,
            var(--color-val-rgba-59-130-246-0-22),
            var(--color-val-rgba-15-23-42-0-2));
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 24px auto;
    border: 1px solid var(--color-val-rgba-96-165-250-0-4);
    box-shadow:
        0 8px 24px var(--color-val-rgba-59-130-246-0-25),
        inset 0 1px 0 var(--color-val-rgba-255-255-255-0-1);
    position: relative;
}

.update-icon-wrapper i {
    font-size: 34px;
    color: var(--color-val-hex-7dd3fc);
    filter: drop-shadow(0 2px 8px var(--color-val-rgba-59-130-246-0-4));
    animation: iconSpin 2.6s linear infinite;
}

@keyframes iconSpin {
    from {
        transform: rotate(0deg);
    }

    to {
        transform: rotate(360deg);
    }
}

/* Pulsing ring animation */
.update-icon-wrapper::after {
    content: '';
    position: absolute;
    top: -8px;
    left: -8px;
    right: -8px;
    bottom: -8px;
    border-radius: 50%;
    border: 2px solid transparent;
    border-top-color: var(--primary-color);
    border-right-color: var(--primary-color);
    opacity: 0.6;
    animation: ringPulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

@keyframes ringPulse {

    0%,
    100% {
        transform: rotate(0deg) scale(1);
        opacity: 0.6;
    }

    50% {
        transform: rotate(180deg) scale(1.1);
        opacity: 0.3;
    }
}

.update-title {
    color: var(--text-light);
    font-size: 1.45rem;
    margin-bottom: 10px;
    font-weight: 700;
    letter-spacing: -0.02em;
    line-height: 1.2;
}

html[data-theme="light"] body .update-title {
    color: var(--color-val-hex-0f172a);
}

.update-status {
    color: var(--text-muted);
    font-size: 0.9rem;
    margin-bottom: 28px;
    line-height: 1.6;
    opacity: 0.85;
}

/* Animated Dots Loader */
.update-dots {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 8px;
    height: 16px;
}

.update-dots .dot {
    width: 8px;
    height: 8px;
    background: var(--color-val-hex-7dd3fc);
    border-radius: 50%;
    box-shadow: 0 0 10px var(--color-val-rgba-59-130-246-0-5);
    animation: dotPulse 1.4s ease-in-out infinite;
}

.update-dots .dot:nth-child(1) {
    animation-delay: 0s;
}

.update-dots .dot:nth-child(2) {
    animation-delay: 0.2s;
}

.update-dots .dot:nth-child(3) {
    animation-delay: 0.4s;
}

@keyframes dotPulse {

    0%,
    60%,
    100% {
        transform: scale(1);
        opacity: 0.7;
    }

    30% {
        transform: scale(1.5);
        opacity: 1;
    }
}

@keyframes spin {
    0% {
        transform: rotate(0deg);
    }

    100% {
        transform: rotate(360deg);
    }
}

/* Responsive adjustments */
@media (max-width: 480px) {
    .update-modal-content {
        padding: 32px 24px;
        max-width: 95%;
    }

    .update-icon-wrapper {
        width: 64px;
        height: 64px;
    }

    .update-icon-wrapper i {
        font-size: 28px;
    }

    .update-title {
        font-size: 1.2rem;
    }

    .update-status {
        font-size: 0.82rem;
    }
}

/* --- Smart Alert Styles --- */
.status-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: 1.1em;
}

.status-icon.monitoring i {
    color: var(--primary-color);
    text-shadow: 0 0 5px var(--color-val-rgba-59-130-246-0-4);
}

.status-icon.active-tp {
    color: var(--positive-color);
    font-weight: bold;
    animation: pulse-green 1.5s infinite;
}

.status-icon.active-sl {
    color: var(--negative-color);
    font-weight: bold;
    animation: pulse-red 1.5s infinite;
}

/* Row Animations */
@keyframes pulse-green {
    0% {
        transform: scale(1);
        opacity: 1;
    }

    50% {
        transform: scale(1.1);
        opacity: 0.8;
    }

    100% {
        transform: scale(1);
        opacity: 1;
    }
}

@keyframes pulse-red {
    0% {
        transform: scale(1);
        opacity: 1;
    }

    50% {
        transform: scale(1.1);
        opacity: 0.8;
    }

    100% {
        transform: scale(1);
        opacity: 1;
    }
}

.summary-table tbody tr.alert-triggered.alert-tp {
    background-color: var(--color-val-rgba-16-185-129-0-15) !important;
    border-left: 4px solid var(--positive-color);
    transition: all 0.3s ease;
}

.summary-table tbody tr.alert-triggered.alert-sl {
    background-color: var(--color-val-rgba-239-68-68-0-15) !important;
    border-left: 4px solid var(--negative-color);
    transition: all 0.3s ease;
}

/* Flash animation for the whole row */
.summary-table tbody tr.alert-triggered {
    animation: row-flash 2s infinite;
}

@keyframes row-flash {
    0% {
        box-shadow: inset 0 0 0 transparent;
    }

    50% {
        box-shadow: inset 0 0 20px var(--color-val-rgba-255-255-255-0-1);
    }

    100% {
        box-shadow: inset 0 0 0 transparent;
    }
}

/* ========================================= */
/* Custom Alert Modal Styles                 */
/* ========================================= */

.custom-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: var(--color-val-rgba-10-14-26-0-85);
    /* Dark overlay */
    backdrop-filter: blur(8px);
    z-index: 2000;
    display: none;
    /* Hidden by default */
    justify-content: center;
    align-items: center;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.custom-modal-overlay.active {
    display: flex;
    opacity: 1;
}

.custom-modal-container {
    background: linear-gradient(145deg, var(--color-val-rgba-20-25-40-0-9), var(--color-val-rgba-10-14-26-0-95));
    width: 450px;
    max-width: 90%;
    border-radius: 20px;
    box-shadow:
        0 0 40px var(--color-val-rgba-59-158-255-0-1),
        inset 0 0 0 1px var(--color-val-rgba-255-255-255-0-05);
    border: 1px solid var(--color-val-rgba-59-158-255-0-2);
    padding: 0;
    overflow: hidden;
    transform: scale(0.95);
    transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: relative;
}

.custom-modal-container::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, transparent, var(--color-val-hex-3b9eff), transparent);
}

.custom-modal-overlay.active .custom-modal-container {
    transform: scale(1);
}

/* Header */
.custom-modal-header {
    padding: 20px 25px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid var(--color-val-rgba-255-255-255-0-05);
}

.custom-modal-header h3 {
    margin: 0;
    color: var(--color-val-hex-fff);
    font-size: 1.2rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 10px;
    text-shadow: 0 0 10px var(--color-val-rgba-59-158-255-0-5);
}

.custom-modal-header h3 i {
    color: var(--color-val-hex-3b9eff);
}

.close-custom-modal {
    background: none;
    border: none;
    color: var(--color-val-hex-6b7a99);
    font-size: 1.5rem;
    cursor: pointer;
    transition: color 0.3s ease;
    line-height: 1;
}

.close-custom-modal:hover {
    color: var(--color-val-hex-fff);
}

/* Body */
.custom-modal-body {
    padding: 25px;
    display: flex;
    flex-direction: column;
    gap: 20px;
}

/* Custom Input Wrapper */
.input-wrapper {
    position: relative;
    background: var(--color-val-rgba-13-17-23-0-6);
    border-radius: 12px;
    transition: all 0.3s ease;
}

.neon-border-blue {
    border: 1px solid var(--color-val-rgba-59-158-255-0-3);
    box-shadow: 0 0 10px var(--color-val-rgba-59-158-255-0-05);
}

.neon-border-blue:focus-within {
    border-color: var(--color-val-hex-3b9eff);
    box-shadow: 0 0 15px var(--color-val-rgba-59-158-255-0-2);
}

.custom-input {
    width: 100%;
    background: transparent;
    border: none;
    color: var(--color-val-hex-fff);
    padding: 12px 15px;
    font-size: 1rem;
    outline: none;
    font-family: inherit;
}

/* Fix for Dropdown Options */
.custom-input option {
    background-color: var(--color-val-hex-0f1419);
    color: var(--color-val-hex-fff);
    padding: 10px;
}

.transparent-input {
    appearance: none;
    cursor: pointer;
    text-transform: uppercase;
}

.input-icon {
    position: absolute;
    left: 15px;
    /* RTL fix: content checks */
    top: 50%;
    transform: translateY(-50%);
    color: var(--color-val-hex-6b7a99);
    pointer-events: none;
}

/* Current Price Display */
.current-price-display {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 20px;
    background: var(--color-val-rgba-0-212-170-0-05);
    border-radius: 12px;
}

.neon-border-green {
    border: 1px solid var(--color-val-rgba-0-212-170-0-3);
    box-shadow: 0 0 10px var(--color-val-rgba-0-212-170-0-05);
}

.current-price-display span {
    color: var(--color-val-hex-b0b8c4);
    font-size: 0.95rem;
}

.current-price-display .price-value {
    color: var(--color-val-hex-00d4aa);
    font-weight: 700;
    font-size: 1.1rem;
    font-family: 'Roboto Mono', monospace;
    text-shadow: 0 0 10px var(--color-val-rgba-0-212-170-0-3);
}

/* Target Price Section */
.target-price-section {
    display: flex;
    gap: 15px;
    align-items: flex-end;
}

/* Condition Toggles */
.condition-toggles {
    display: flex;
    gap: 15px;
    flex: 0 0 auto;
}

.radio-label {
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    color: var(--color-val-hex-b0b8c4);
    font-size: 0.9rem;
    user-select: none;
}

.radio-label input {
    display: none;
}

.radio-custom {
    width: 18px;
    height: 18px;
    border: 2px solid var(--color-val-hex-6b7a99);
    border-radius: 50%;
    position: relative;
    transition: all 0.3s ease;
}

.radio-label input:checked+.radio-custom {
    border-color: var(--color-val-hex-3b9eff);
    box-shadow: 0 0 10px var(--color-val-rgba-59-158-255-0-4);
}

.radio-label input:checked+.radio-custom::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 10px;
    height: 10px;
    background: var(--color-val-hex-3b9eff);
    border-radius: 50%;
    box-shadow: 0 0 8px var(--color-val-rgba-59-158-255-0-8);
}

/* Price Input Wrapper */
.price-input-wrapper {
    flex: 1;
    position: relative;
    background: var(--color-val-rgba-13-17-23-0-6);
    border-radius: 12px;
}

.neon-border-purple {
    border: 1px solid var(--color-val-rgba-139-92-246-0-3);
    box-shadow: 0 0 10px var(--color-val-rgba-139-92-246-0-05);
}

.neon-border-purple:focus-within {
    border-color: var(--color-val-hex-8b5cf6);
    box-shadow: 0 0 15px var(--color-val-rgba-139-92-246-0-2);
}

.input-label {
    /* Placeholder style label */
    position: absolute;
    left: 15px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--color-val-hex-6b7a99);
    pointer-events: none;
    font-size: 0.9rem;
    transition: all 0.3s ease;
}

.custom-input:focus+.input-label,
.custom-input:not(:placeholder-shown)+.input-label {
    opacity: 0;
    /* Hide when typing */
}

/* Transaction Type Toggle */
.transaction-type {
    display: flex;
    background: var(--color-val-rgba-13-17-23-0-6);
    border-radius: 12px;
    padding: 4px;
    border: 1px solid var(--color-val-rgba-255-255-255-0-05);
    position: relative;
    overflow: hidden;
}

.type-option {
    flex: 1;
    text-align: center;
    padding: 10px;
    cursor: pointer;
    z-index: 1;
    color: var(--color-val-hex-6b7a99);
    font-weight: 600;
    transition: color 0.3s ease;
    position: relative;
}

.type-option input {
    display: none;
}

/* Buy Active */
.type-option.buy-option input:checked~span {
    color: var(--color-val-hex-00d4aa);
}

.type-option.buy-option input:checked~.glow-effect-green {
    opacity: 1;
}

.glow-effect-green {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    background: var(--color-val-rgba-0-212-170-0-15);
    border: 1px solid var(--color-val-hex-00d4aa);
    border-radius: 8px;
    opacity: 0;
    transition: opacity 0.3s ease;
    z-index: -1;
    box-shadow: 0 0 15px var(--color-val-rgba-0-212-170-0-2);
}

/* Sell Active */
.type-option.sell-option input:checked~span {
    color: var(--color-val-hex-ff4757);
}

.type-option.sell-option input:checked~.glow-effect-red {
    opacity: 1;
}

.glow-effect-red {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    background: var(--color-val-rgba-255-71-87-0-15);
    border: 1px solid var(--color-val-hex-ff4757);
    border-radius: 8px;
    opacity: 0;
    transition: opacity 0.3s ease;
    z-index: -1;
    box-shadow: 0 0 15px var(--color-val-rgba-255-71-87-0-2);
}

/* Notification Options */
.notification-options {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.checkbox-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: pointer;
    color: var(--color-val-hex-dfe6f0);
    font-size: 0.95rem;
    user-select: none;
}

.checkbox-item input {
    display: none;
}

.checkmark {
    width: 20px;
    height: 20px;
    border: 2px solid var(--color-val-hex-4a5568);
    border-radius: 4px;
    position: relative;
    transition: all 0.2s ease;
    background: var(--color-val-rgba-13-17-23-0-6);
}

.checkbox-item input:checked+.checkmark {
    background: var(--color-val-hex-3b9eff);
    border-color: var(--color-val-hex-3b9eff);
    box-shadow: 0 0 10px var(--color-val-rgba-59-158-255-0-4);
}

.checkmark:after {
    content: "";
    position: absolute;
    left: 6px;
    top: 2px;
    width: 5px;
    height: 10px;
    border: solid white;
    border-width: 0 2px 2px 0;
    transform: rotate(45deg);
    display: none;
}

.checkbox-item input:checked+.checkmark:after {
    display: block;
}

/* Notes Section */
.custom-textarea {
    width: 100%;
    height: 80px;
    background: var(--color-val-rgba-13-17-23-0-6);
    border-radius: 12px;
    padding: 12px;
    color: var(--color-val-hex-fff);
    resize: none;
    outline: none;
    font-family: inherit;
}

/* Footer */
.custom-modal-footer {
    padding: 20px 25px;
    display: flex;
    justify-content: flex-end;
    gap: 15px;
    border-top: 1px solid var(--color-val-rgba-255-255-255-0-05);
    background: var(--color-val-rgba-0-0-0-0-2);
}

.btn-cancel {
    background: transparent;
    border: 1px solid var(--color-val-hex-4a5568);
    color: var(--color-val-hex-b0b8c4);
    padding: 8px 20px;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.btn-cancel:hover {
    border-color: var(--color-val-hex-cbd5e0);
    color: var(--color-val-hex-fff);
}

.btn-save {
    background: linear-gradient(135deg, var(--color-val-hex-667eea) 0%, var(--color-val-hex-764ba2) 100%);
    border: none;
    color: white;
    padding: 8px 24px;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    box-shadow: 0 4px 15px var(--color-val-rgba-118-75-162-0-4);
    transition: all 0.3s ease;
}

.btn-save:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px var(--color-val-rgba-118-75-162-0-6);
}

/* RTL Specifics */
.condition-toggles {
    flex-direction: row-reverse;
}

.transaction-type {
    flex-direction: row-reverse;
}

.custom-modal-header {
    flex-direction: row-reverse;
}

.custom-modal-footer {
    flex-direction: row-reverse;
    /* Save button on left/start */
}

/* Active Alerts Section */
.active-alerts-section {
    display: flex;
    flex-direction: column;
    gap: 15px;
    margin-top: 10px;
    border-top: 1px solid var(--color-val-rgba-255-255-255-0-05);
    padding-top: 20px;
}

.active-alerts-section h4 {
    margin: 0;
    color: var(--color-val-hex-b0b8c4);
    font-size: 1rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 8px;
}

.active-alerts-section h4 i {
    color: var(--color-val-hex-3b9eff);
}

.alerts-list-container {
    max-height: 200px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 10px;
    padding-right: 5px;
    /* Space for scrollbar */
}

/* Custom Scrollbar for list */
.custom-scrollbar::-webkit-scrollbar {
    width: 6px;
}

.custom-scrollbar::-webkit-scrollbar-track {
    background: var(--color-val-rgba-0-0-0-0-1);
    border-radius: 3px;
}

.custom-scrollbar::-webkit-scrollbar-thumb {
    background: var(--color-val-hex-4a5568);
    border-radius: 3px;
}

.custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: var(--color-val-hex-718096);
}

.empty-state {
    text-align: center;
    color: var(--color-val-hex-4a5568);
    padding: 20px;
    font-style: italic;
    font-size: 0.9rem;
}

/* Alert Item Card */
.alert-item-card {
    background: var(--color-val-rgba-13-17-23-0-4);
    border: 1px solid var(--color-val-rgba-255-255-255-0-05);
    border-radius: 10px;
    padding: 12px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.alert-item-card:hover {
    background: var(--color-val-rgba-13-17-23-0-6);
    border-color: var(--color-val-rgba-59-158-255-0-2);
    transform: translateX(-2px);
}

.alert-info {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.alert-header {
    display: flex;
    align-items: center;
    gap: 8px;
}

.alert-symbol {
    color: var(--color-val-hex-fff);
    font-weight: 700;
    font-family: 'Roboto Mono', monospace;
}

.alert-badge {
    font-size: 0.75rem;
    padding: 2px 6px;
    border-radius: 4px;
    font-weight: 600;
}

.badge-buy {
    background: var(--color-val-rgba-0-212-170-0-1);
    color: var(--color-val-hex-00d4aa);
    border: 1px solid var(--color-val-rgba-0-212-170-0-2);
}

.badge-sell {
    background: var(--color-val-rgba-255-71-87-0-1);
    color: var(--color-val-hex-ff4757);
    border: 1px solid var(--color-val-rgba-255-71-87-0-2);
}

.alert-detail {
    color: var(--color-val-hex-b0b8c4);
    font-size: 0.85rem;
    display: flex;
    align-items: center;
    gap: 5px;
}

.condition-icon {
    font-size: 0.8rem;
}

.condition-icon.above {
    color: var(--color-val-hex-00d4aa);
}

.condition-icon.below {
    color: var(--color-val-hex-ff4757);
}

.price-target {
    color: var(--color-val-hex-fff);
    font-weight: 600;
}

.btn-delete-alert {
    background: var(--color-val-rgba-255-71-87-0-1);
    border: none;
    color: var(--color-val-hex-ff4757);
    width: 32px;
    height: 32px;
    border-radius: 8px;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    transition: all 0.2s ease;
}

.btn-delete-alert:hover {
    background: var(--color-val-hex-ff4757);
    color: white;
    box-shadow: 0 0 10px var(--color-val-rgba-255-71-87-0-4);
}

/* RTL tweaks for internal items */
.alert-header {
    flex-direction: row-reverse;
}

.alert-detail {
    flex-direction: row-reverse;
}

/* تحسين عمود السعر الحالي */
.summary-table td:nth-child(5) {
    /* السعر الحالي هو العمود الخامس */
    color: var(--color-val-hex-3b82f6);
    /* Blue color - Removed !important to allow animation override */
    font-weight: 700;
    transition: color 0.3s ease, background-color 0.3s ease;
}

/* Price Flash Animations */
/* Price Flash Animations targeting badge */
@keyframes flashGreenBadge {
    0% {
        background-color: var(--color-val-rgba-16-230-140-0-25);
        /* Stronger Green BG */
        color: var(--color-val-hex-00e676);
        /* Bright Green Text */
        box-shadow: 0 0 15px var(--color-val-rgba-0-230-118-0-4);
        /* Green Glow */
        transform: scale(1.1);
        /* Bigger Pop */
        border: 1px solid var(--color-val-rgba-0-230-118-0-3);
    }

    10% {
        /* Show icon quickly */
        gap: 5px;
    }

    90% {
        /* Keep icon visible */
        gap: 5px;
    }

    100% {
        background-color: var(--color-val-rgba-59-158-255-0-1);
        color: var(--color-val-hex-3b82f6);
        transform: scale(1);
        box-shadow: none;
        border: 1px solid transparent;
        gap: 0;
        /* Collapse gap */
    }
}

@keyframes flashRedBadge {
    0% {
        background-color: var(--color-val-rgba-255-71-87-0-25);
        /* Stronger Red BG */
        color: var(--color-val-hex-ff4757);
        /* Bright Red Text */
        box-shadow: 0 0 15px var(--color-val-rgba-255-71-87-0-4);
        /* Red Glow */
        transform: scale(1.1);
        /* Bigger Pop */
        border: 1px solid var(--color-val-rgba-255-71-87-0-3);
    }

    10% {
        gap: 5px;
    }

    90% {
        gap: 5px;
    }

    100% {
        background-color: var(--color-val-rgba-59-158-255-0-1);
        color: var(--color-val-hex-3b82f6);
        transform: scale(1);
        box-shadow: none;
        border: 1px solid transparent;
        gap: 0;
    }
}

/* Icon Animation Keyframes - targeting Opacity/Width */
@keyframes revealIcon {

    0%,
    100% {
        opacity: 0;
        max-width: 0;
        margin-left: 0;
    }

    10%,
    90% {
        opacity: 1;
        max-width: 20px;
        margin-left: 0;
    }
}

.summary-table td.price-up .price-badge {
    animation: flashGreenBadge 4s cubic-bezier(0.25, 1, 0.5, 1);
    /* Longer, smoother animation */
}

.summary-table td.price-up .price-badge i {
    animation: revealIcon 4s cubic-bezier(0.25, 1, 0.5, 1);
}

.summary-table td.price-down .price-badge {
    animation: flashRedBadge 4s cubic-bezier(0.25, 1, 0.5, 1);
}

.summary-table td.price-down .price-badge i {
    animation: revealIcon 4s cubic-bezier(0.25, 1, 0.5, 1);
}

.price-badge {
    display: inline-flex;
    /* Use flex for icon alignment */
    align-items: center;
    justify-content: center;
    gap: 0;
    /* Default no gap */
    padding: 4px 12px;
    border-radius: 50px;
    background-color: var(--color-val-rgba-59-158-255-0-1);
    /* Blue pill background */
    color: var(--color-val-hex-3b82f6) !important;
    /* Force blue text */
    font-weight: 700;
    min-width: 90px;
    /* Slightly wider for icon */
    text-align: center;
    transition: all 0.3s ease;
    border: 1px solid transparent;
    /* Prepare for border animation */
}

.price-badge i {
    opacity: 0;
    max-width: 0;
    overflow: hidden;
    transition: all 0.3s ease;
}

/* ========================================= */
/*       Ultra Professional Header           */
/* ========================================= */

.app-header {
    position: sticky;
    top: 15px;
    z-index: 1000;
    width: calc(100% - 90px);
    max-width: 1700px;
    margin: 0 auto 25px auto;
    border-radius: 24px;

    /* Advanced Glassmorphism */
    background: linear-gradient(135deg,
            var(--color-val-rgba-10-14-26-0-95) 0%,
            var(--color-val-rgba-15-23-42-0-9) 100%);
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);

    /* Glowing Border Effect */
    border: 1px solid transparent;
    background-clip: padding-box;
    position: relative;

    /* Premium Shadow */
    box-shadow:
        0 8px 32px var(--color-val-rgba-0-0-0-0-5),
        0 0 0 1px var(--color-val-rgba-59-158-255-0-1) inset,
        0 20px 60px -10px var(--color-val-rgba-59-158-255-0-15);

    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    padding: 0;
    overflow: hidden;
}

/* Animated Gradient Border */
.app-header::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    border-radius: 24px;
    padding: 1px;
    background: linear-gradient(135deg,
            var(--color-val-rgba-59-158-255-0-3) 0%,
            var(--color-val-rgba-94-179-255-0-2) 50%,
            var(--color-val-rgba-59-158-255-0-3) 100%);
    -webkit-mask: linear-gradient(var(--color-val-hex-fff) 0 0) content-box, linear-gradient(var(--color-val-hex-fff) 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    opacity: 0.6;
    transition: opacity 0.3s ease;
}

.app-header:hover::before {
    opacity: 1;
}

/* Hover State Enhancement */
.app-header:hover {
    transform: translateY(-2px);
    box-shadow:
        0 12px 40px var(--color-val-rgba-0-0-0-0-6),
        0 0 0 1px var(--color-val-rgba-59-158-255-0-2) inset,
        0 25px 70px -10px var(--color-val-rgba-59-158-255-0-25);
}

/* Light Mode Header - Premium Clean Style */
html[data-theme="light"] body .app-header {
    background: linear-gradient(135deg,
            var(--color-val-rgba-255-255-255-0-98) 0%,
            var(--color-val-rgba-248-250-252-0-95) 100%);
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    box-shadow:
        0 8px 32px var(--color-val-rgba-0-0-0-0-08),
        0 0 0 1px var(--color-val-rgba-59-130-246-0-1) inset,
        0 20px 60px -10px var(--color-val-rgba-59-130-246-0-1);
}

html[data-theme="light"] body .app-header::before {
    background: linear-gradient(135deg,
            var(--color-val-rgba-59-130-246-0-4) 0%,
            var(--color-val-rgba-96-165-250-0-3) 50%,
            var(--color-val-rgba-59-130-246-0-4) 100%);
}

html[data-theme="light"] body .app-header:hover {
    box-shadow:
        0 12px 40px var(--color-val-rgba-0-0-0-0-12),
        0 0 0 1px var(--color-val-rgba-59-130-246-0-2) inset,
        0 25px 70px -10px var(--color-val-rgba-59-130-246-0-2);
}

.header-inner {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 16px 25px;
    min-height: 72px;
}

.header-center {
    display: flex;
    align-items: center;
    justify-content: center;
}

.header-left,
.header-right {
    display: none;
}

/* ========================================= */
/*       Premium Action Bar                  */
/* ========================================= */

.action-bar {
    position: relative;
    z-index: 999;
    width: fit-content;
    max-width: calc(100% - 90px);
    margin: 10px auto 20px auto;
    border-radius: 20px;

    /* Glassmorphism Effect */
    background: linear-gradient(135deg,
            var(--color-val-rgba-10-14-26-0-92) 0%,
            var(--color-val-rgba-15-23-42-0-88) 100%);
    backdrop-filter: blur(18px) saturate(160%);
    -webkit-backdrop-filter: blur(18px) saturate(160%);

    border: 1px solid transparent;
    background-clip: padding-box;
    position: relative;

    /* Shadow */
    box-shadow:
        0 6px 28px var(--color-val-rgba-0-0-0-0-45),
        0 0 0 1px var(--color-val-rgba-59-158-255-0-08) inset,
        0 15px 50px -8px var(--color-val-rgba-59-158-255-0-12);

    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    padding: 0;
    overflow: hidden;
}

/* Animated Border */
.action-bar::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    border-radius: 20px;
    padding: 1px;
    background: linear-gradient(135deg,
            var(--color-val-rgba-59-158-255-0-25) 0%,
            var(--color-val-rgba-94-179-255-0-15) 50%,
            var(--color-val-rgba-59-158-255-0-25) 100%);
    -webkit-mask: linear-gradient(var(--color-val-hex-fff) 0 0) content-box, linear-gradient(var(--color-val-hex-fff) 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    opacity: 0.5;
    transition: opacity 0.3s ease;
}

.action-bar:hover::before {
    opacity: 0.8;
}

.action-bar:hover {
    transform: translateY(-1px);
    box-shadow:
        0 8px 32px var(--color-val-rgba-0-0-0-0-5),
        0 0 0 1px var(--color-val-rgba-59-158-255-0-15) inset,
        0 18px 55px -8px var(--color-val-rgba-59-158-255-0-18);
}

/* Light Mode Action Bar */
html[data-theme="light"] body .action-bar {
    background: linear-gradient(135deg,
            var(--color-val-rgba-255-255-255-0-96) 0%,
            var(--color-val-rgba-248-250-252-0-93) 100%);
    box-shadow:
        0 6px 28px var(--color-val-rgba-0-0-0-0-06),
        0 0 0 1px var(--color-val-rgba-59-130-246-0-08) inset,
        0 15px 50px -8px var(--color-val-rgba-59-130-246-0-08);
}

html[data-theme="light"] body .action-bar::before {
    background: linear-gradient(135deg,
            var(--color-val-rgba-59-130-246-0-35) 0%,
            var(--color-val-rgba-96-165-250-0-25) 50%,
            var(--color-val-rgba-59-130-246-0-35) 100%);
}

html[data-theme="light"] body .action-bar:hover {
    box-shadow:
        0 8px 32px var(--color-val-rgba-0-0-0-0-1),
        0 0 0 1px var(--color-val-rgba-59-130-246-0-15) inset,
        0 18px 55px -8px var(--color-val-rgba-59-130-246-0-15);
}

.action-bar-inner {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 12px 25px;
}

.action-buttons {
    display: flex;
    align-items: center;
    gap: 10px;
}

.action-divider {
    width: 1px;
    height: 24px;
    background: var(--color-val-rgba-255-255-255-0-1);
    margin: 0 5px;
}

html[data-theme="light"] body .action-divider {
    background: var(--color-val-rgba-0-0-0-0-1);
}

/* Ultra Professional Site Title */
.site-title {
    margin: 0;
    font-size: 2.2rem;
    display: flex;
    align-items: center;
    gap: 12px;
    font-weight: 700;
    letter-spacing: 0.5px;
    position: relative;

    /* Gradient Text Effect */
    background: linear-gradient(135deg,
            var(--color-val-hex-ffffff) 0%,
            var(--color-val-hex-e0f2fe) 50%,
            var(--color-val-hex-bae6fd) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;

    /* Subtle Glow */
    filter: drop-shadow(0 2px 8px var(--color-val-rgba-59-158-255-0-3));

    transition: all 0.3s ease;
}

.site-title:hover {
    filter: drop-shadow(0 4px 12px var(--color-val-rgba-59-158-255-0-5));
    transform: translateY(-1px);
}

.site-title i {
    /* Icon with animated gradient */
    background: linear-gradient(135deg,
            var(--primary-color) 0%,
            var(--secondary-color) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    font-size: 1.3em;

    /* Pulsing Glow Animation */
    filter: drop-shadow(0 0 8px var(--color-val-rgba-59-158-255-0-6));
    animation: pulse-glow 3s ease-in-out infinite alternate;

    transition: transform 0.3s ease;
}

.site-title:hover i {
    transform: rotate(10deg) scale(1.1);
    animation-play-state: paused;
    filter: drop-shadow(0 0 15px var(--color-val-rgba-59-158-255-0-9));
}

@keyframes pulse-glow {
    0% {
        filter: drop-shadow(0 0 6px var(--color-val-rgba-59-158-255-0-5));
    }

    50% {
        filter: drop-shadow(0 0 12px var(--color-val-rgba-94-179-255-0-7));
    }

    100% {
        filter: drop-shadow(0 0 16px var(--color-val-rgba-59-158-255-0-9));
    }
}

/* Light Mode Title */
html[data-theme="light"] body .site-title {
    background: linear-gradient(135deg,
            var(--color-val-hex-0f172a) 0%,
            var(--color-val-hex-1e293b) 50%,
            var(--color-val-hex-334155) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    filter: drop-shadow(0 2px 4px var(--color-val-rgba-0-0-0-0-1));
}

html[data-theme="light"] body .site-title i {
    background: linear-gradient(135deg,
            var(--color-val-hex-3b82f6) 0%,
            var(--color-val-hex-60a5fa) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    filter: drop-shadow(0 0 6px var(--color-val-rgba-59-130-246-0-4));
}

html[data-theme="light"] body .site-title:hover {
    filter: drop-shadow(0 4px 8px var(--color-val-rgba-0-0-0-0-15));
}

html[data-theme="light"] body .site-title:hover i {
    filter: drop-shadow(0 0 12px var(--color-val-rgba-59-130-246-0-6));
}

/* Header Icons Group */
.icons-group {
    display: flex;
    align-items: center;
    gap: 10px;
}

.header-divider {
    width: 1px;
    height: 24px;
    background: var(--color-val-rgba-255-255-255-0-1);
    margin: 0 5px;
}

html[data-theme="light"] body .header-divider {
    background: var(--color-val-rgba-0-0-0-0-1);
}

/* Ultra Premium Action Buttons */
.action-btn {
    width: 42px;
    height: 42px;
    border-radius: 14px;

    /* Glassmorphism Effect */
    background: linear-gradient(135deg,
            var(--color-val-rgba-255-255-255-0-05) 0%,
            var(--color-val-rgba-255-255-255-0-02) 100%);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);

    border: 1px solid var(--color-val-rgba-255-255-255-0-08);

    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    padding: 0 !important;
    cursor: pointer;

    color: var(--text-muted);
    font-size: 1.1em;
    position: relative;
    overflow: hidden;

    /* Smooth Transitions */
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);

    /* Subtle Shadow */
    box-shadow:
        0 2px 8px var(--color-val-rgba-0-0-0-0-1),
        inset 0 1px 0 var(--color-val-rgba-255-255-255-0-05);
}

/* Ripple Effect Background */
.action-btn::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: radial-gradient(circle,
            var(--color-val-rgba-59-158-255-0-3) 0%,
            transparent 70%);
    transform: translate(-50%, -50%);
    transition: width 0.6s ease, height 0.6s ease;
}

.action-btn:hover::before {
    width: 120px;
    height: 120px;
}

.action-btn i {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
    line-height: normal;
    margin: 0;
    position: relative;
    z-index: 1;
    transition: all 0.3s ease;
}

/* Premium Hover State */
.action-btn:hover {
    background: linear-gradient(135deg,
            var(--color-val-rgba-59-158-255-0-15) 0%,
            var(--color-val-rgba-94-179-255-0-1) 100%);
    color: var(--primary-color);
    transform: translateY(-3px) scale(1.05);
    border-color: var(--color-val-rgba-59-158-255-0-4);
    box-shadow:
        0 6px 20px var(--color-val-rgba-59-158-255-0-3),
        0 0 20px var(--color-val-rgba-59-158-255-0-2),
        inset 0 1px 0 var(--color-val-rgba-255-255-255-0-1);
}

.action-btn:hover i {
    transform: scale(1.1);
    filter: drop-shadow(0 0 6px var(--color-val-rgba-59-158-255-0-6));
}

/* Active State */
.action-btn:active {
    transform: translateY(-1px) scale(1.02);
    transition: all 0.1s ease;
}

/* Light Mode Buttons */
html[data-theme="light"] body .action-btn {
    background: linear-gradient(135deg,
            var(--color-val-rgba-255-255-255-0-95) 0%,
            var(--color-val-rgba-248-250-252-0-9) 100%);
    border-color: var(--color-val-rgba-226-232-240-0-8);
    color: var(--color-val-hex-64748b);
    box-shadow:
        0 2px 8px var(--color-val-rgba-0-0-0-0-05),
        inset 0 1px 0 var(--color-val-rgba-255-255-255-0-8);
}

html[data-theme="light"] body .action-btn::before {
    background: radial-gradient(circle,
            var(--color-val-rgba-59-130-246-0-2) 0%,
            transparent 70%);
}

html[data-theme="light"] body .action-btn:hover {
    background: linear-gradient(135deg,
            var(--color-val-rgba-240-249-255-1) 0%,
            var(--color-val-rgba-224-242-254-0-95) 100%);
    color: var(--color-val-hex-0284c7);
    border-color: var(--color-val-rgba-186-230-253-0-8);
    box-shadow:
        0 6px 20px var(--color-val-rgba-59-130-246-0-2),
        0 0 20px var(--color-val-rgba-59-130-246-0-1),
        inset 0 1px 0 var(--color-val-rgba-255-255-255-1);
}

html[data-theme="light"] body .action-btn:hover i {
    filter: drop-shadow(0 0 4px var(--color-val-rgba-59-130-246-0-4));
}

/* Notification Badge */
.action-btn .icon-badge {
    position: absolute;
    top: 10px;
    right: 12px;
    width: 6px;
    height: 6px;
    background-color: var(--negative-color);
    border-radius: 50%;
    display: none;
}

/* Ultra Premium Header Buttons */
.header-btn {
    width: 42px;
    height: 42px;
    border-radius: 14px;

    /* Glassmorphism Effect */
    background: linear-gradient(135deg,
            var(--color-val-rgba-255-255-255-0-05) 0%,
            var(--color-val-rgba-255-255-255-0-02) 100%);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);

    border: 1px solid var(--color-val-rgba-255-255-255-0-08);

    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    padding: 0 !important;
    cursor: pointer;

    color: var(--text-muted);
    font-size: 1.1em;
    position: relative;
    overflow: hidden;

    /* Smooth Transitions */
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);

    /* Subtle Shadow */
    box-shadow:
        0 2px 8px var(--color-val-rgba-0-0-0-0-1),
        inset 0 1px 0 var(--color-val-rgba-255-255-255-0-05);
}

/* Ripple Effect Background */
.header-btn::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: radial-gradient(circle,
            var(--color-val-rgba-59-158-255-0-3) 0%,
            transparent 70%);
    transform: translate(-50%, -50%);
    transition: width 0.6s ease, height 0.6s ease;
}

.header-btn:hover::before {
    width: 120px;
    height: 120px;
}

.header-btn i {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
    line-height: normal;
    margin: 0;
    position: relative;
    z-index: 1;
    transition: all 0.3s ease;
}

/* Desktop Settings Icon Adjustment */
button[onclick="toggleSettings()"] i {
    font-size: 1em !important;
}

/* Premium Hover State */
.header-btn:hover {
    background: linear-gradient(135deg,
            var(--color-val-rgba-59-158-255-0-15) 0%,
            var(--color-val-rgba-94-179-255-0-1) 100%);
    color: var(--primary-color);
    transform: translateY(-3px) scale(1.05);
    border-color: var(--color-val-rgba-59-158-255-0-4);
    box-shadow:
        0 6px 20px var(--color-val-rgba-59-158-255-0-3),
        0 0 20px var(--color-val-rgba-59-158-255-0-2),
        inset 0 1px 0 var(--color-val-rgba-255-255-255-0-1);
}

.header-btn:hover i {
    transform: scale(1.1);
    filter: drop-shadow(0 0 6px var(--color-val-rgba-59-158-255-0-6));
}

/* Active State */
.header-btn:active {
    transform: translateY(-1px) scale(1.02);
    transition: all 0.1s ease;
}

/* Light Mode Buttons */
html[data-theme="light"] body .header-btn {
    background: linear-gradient(135deg,
            var(--color-val-rgba-255-255-255-0-95) 0%,
            var(--color-val-rgba-248-250-252-0-9) 100%);
    border-color: var(--color-val-rgba-226-232-240-0-8);
    color: var(--color-val-hex-64748b);
    box-shadow:
        0 2px 8px var(--color-val-rgba-0-0-0-0-05),
        inset 0 1px 0 var(--color-val-rgba-255-255-255-0-8);
}

html[data-theme="light"] body .header-btn::before {
    background: radial-gradient(circle,
            var(--color-val-rgba-59-130-246-0-2) 0%,
            transparent 70%);
}

html[data-theme="light"] body .header-btn:hover {
    background: linear-gradient(135deg,
            var(--color-val-rgba-240-249-255-1) 0%,
            var(--color-val-rgba-224-242-254-0-95) 100%);
    color: var(--color-val-hex-0284c7);
    border-color: var(--color-val-rgba-186-230-253-0-8);
    box-shadow:
        0 6px 20px var(--color-val-rgba-59-130-246-0-2),
        0 0 20px var(--color-val-rgba-59-130-246-0-1),
        inset 0 1px 0 var(--color-val-rgba-255-255-255-1);
}

html[data-theme="light"] body .header-btn:hover i {
    filter: drop-shadow(0 0 4px var(--color-val-rgba-59-130-246-0-4));
}

/* Notification Badge */
.header-btn .icon-badge {
    position: absolute;
    top: 10px;
    right: 12px;
    width: 6px;
    height: 6px;
    background-color: var(--negative-color);
    border-radius: 50%;
    display: none;
    /* Show when active via JS */
}

/* User Avatar */
.user-avatar {
    margin-right: 18px;
    /* RTL spacing */
    position: relative;
}

.user-avatar img {
    width: 40px;
    height: 40px;
    border-radius: 12px;
    /* Slightly rounded square */
    border: 2px solid var(--color-val-rgba-59-158-255-0-3);
    padding: 2px;
    transition: all 0.3s ease;
    background: var(--color-val-rgba-0-0-0-0-2);
}

.user-avatar img:hover {
    transform: scale(1.05);
    border-color: var(--primary-color);
    box-shadow: 0 0 15px var(--color-val-rgba-59-158-255-0-4);
}

/* Dropdowns Adjustment for New Header */
.notification-dropdown {
    position: absolute;
    top: 60px;
    border-radius: 16px;
    border: 1px solid var(--color-val-rgba-59-158-255-0-15);
    background: var(--color-val-rgba-15-23-42-0-95);
    backdrop-filter: blur(20px);
    box-shadow: 0 20px 50px var(--color-val-rgba-0-0-0-0-5);
    min-width: 260px;
}

/* Premium Mobile Design - Ultra Compact */
@media (max-width: 768px) {
    .app-header {
        width: calc(100% - 16px);
        margin: 5px auto 10px auto;
        border-radius: 18px;
        top: 5px;
        height: auto !important;

        /* Enhanced Mobile Glassmorphism */
        background: linear-gradient(135deg,
                var(--color-val-rgba-15-23-42-0-98) 0%,
                var(--color-val-rgba-10-14-26-0-95) 100%) !important;
        backdrop-filter: blur(15px) saturate(180%) !important;
        -webkit-backdrop-filter: blur(15px) saturate(180%) !important;

        border: 1px solid var(--color-val-rgba-59-158-255-0-15) !important;
        box-shadow:
            0 5px 25px var(--color-val-rgba-0-0-0-0-6),
            0 0 0 1px var(--color-val-rgba-59-158-255-0-1) inset,
            0 15px 40px -5px var(--color-val-rgba-59-158-255-0-2) !important;

        z-index: 99999 !important;
        position: relative !important;

        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .app-header::before {
        border-radius: 18px;
    }

    .header-inner {
        padding: 10px 12px;
        min-height: auto;
        flex-direction: column;
        gap: 8px;
    }

    /* Row 1: Title with Enhanced Gradient */
    .header-left {
        width: 100%;
        display: flex;
        justify-content: center;
        margin-bottom: 0;
    }

    .site-title {
        font-size: 1rem !important;
        gap: 6px;
        font-weight: 700 !important;
        letter-spacing: -0.2px;

        /* Mobile Gradient */
        background: linear-gradient(135deg,
                var(--color-val-hex-ffffff) 0%,
                var(--color-val-hex-bae6fd) 100%) !important;
        -webkit-background-clip: text !important;
        -webkit-text-fill-color: transparent !important;
        background-clip: text !important;
        filter: drop-shadow(0 2px 6px var(--color-val-rgba-59-158-255-0-4)) !important;
    }

    .site-title i {
        font-size: 1.1em !important;
        filter: drop-shadow(0 0 8px var(--color-val-rgba-59-158-255-0-7)) !important;
    }

    .header-center {
        display: flex !important;
        width: 100%;
        justify-content: center;
    }

    .header-left,
    .header-right {
        display: none;
    }

    /* Mobile Action Bar */
    .action-bar {
        width: fit-content;
        max-width: calc(100% - 16px);
        margin: 8px auto 12px auto;
        border-radius: 14px;
    }

    .action-bar-inner {
        padding: 8px 12px;
    }

    .action-buttons {
        gap: 6px;
    }

    .action-divider {
        height: 20px;
        margin: 0 3px;
    }

    /* Ultra Premium Mobile Buttons */
    .action-btn {
        width: 32px !important;
        height: 32px !important;
        border-radius: 10px !important;

        background: linear-gradient(135deg,
                var(--color-val-rgba-255-255-255-0-06) 0%,
                var(--color-val-rgba-255-255-255-0-03) 100%) !important;
        backdrop-filter: blur(8px) !important;
        -webkit-backdrop-filter: blur(8px) !important;

        border: 1px solid var(--color-val-rgba-255-255-255-0-1) !important;
        color: var(--color-val-hex-94a3b8) !important;
        font-size: 0.85rem !important;

        box-shadow:
            0 2px 8px var(--color-val-rgba-0-0-0-0-15),
            inset 0 1px 0 var(--color-val-rgba-255-255-255-0-08) !important;

        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        padding: 0 !important;

        transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1) !important;
    }

    .header-btn i {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
        height: 100%;
        line-height: normal;
        margin: 0;
    }

    /* Mobile Settings Icon */
    button[onclick="toggleSettings()"] i {
        font-size: 0.9rem !important;
    }

    /* Mobile Hover/Active States */
    .header-btn:hover,
    .header-btn:active {
        background: linear-gradient(135deg,
                var(--color-val-rgba-59-158-255-0-15) 0%,
                var(--color-val-rgba-94-179-255-0-1) 100%) !important;
        color: var(--primary-color) !important;
        transform: translateY(-2px) scale(1.05);
        border-color: var(--color-val-rgba-59-158-255-0-3) !important;
        box-shadow:
            0 4px 15px var(--color-val-rgba-59-158-255-0-3),
            0 0 15px var(--color-val-rgba-59-158-255-0-2),
            inset 0 1px 0 var(--color-val-rgba-255-255-255-0-15) !important;
    }

    .header-btn:hover i,
    .header-btn:active i {
        filter: drop-shadow(0 0 6px var(--color-val-rgba-59-158-255-0-7));
    }

    /* Theme Toggle Special Styling */
    button[onclick="toggleTheme()"] {
        border-color: var(--color-val-rgba-245-158-11-0-3) !important;
        background: linear-gradient(135deg,
                var(--color-val-rgba-245-158-11-0-1) 0%,
                var(--color-val-rgba-251-191-36-0-05) 100%) !important;
    }

    button[onclick="toggleTheme()"] i {
        color: var(--color-val-hex-f59e0b) !important;
        filter: drop-shadow(0 0 8px var(--color-val-rgba-245-158-11-0-4));
    }

    .user-avatar img {
        width: 36px !important;
        height: 36px !important;
        border-radius: 12px !important;
        border: 2px solid var(--color-val-rgba-96-165-250-0-5) !important;
        box-shadow:
            0 0 12px var(--color-val-rgba-96-165-250-0-3),
            inset 0 1px 0 var(--color-val-rgba-255-255-255-0-1) !important;
    }

    .user-avatar {
        margin: 0 0 0 4px;
    }

    .header-divider {
        display: none;
    }
}

/* Light Mode Premium Mobile */
@media (max-width: 768px) {
    html[data-theme="light"] body .app-header {
        background: linear-gradient(135deg,
                var(--color-val-rgba-255-255-255-0-98) 0%,
                var(--color-val-rgba-248-250-252-0-95) 100%) !important;
        backdrop-filter: blur(15px) saturate(180%) !important;
        -webkit-backdrop-filter: blur(15px) saturate(180%) !important;

        border: 1px solid var(--color-val-rgba-59-130-246-0-2) !important;
        box-shadow:
            0 5px 25px var(--color-val-rgba-0-0-0-0-1),
            0 0 0 1px var(--color-val-rgba-59-130-246-0-1) inset,
            0 15px 40px -5px var(--color-val-rgba-59-130-246-0-15) !important;
    }

    html[data-theme="light"] body .site-title {
        background: linear-gradient(135deg,
                var(--color-val-hex-0f172a) 0%,
                var(--color-val-hex-334155) 100%) !important;
        -webkit-background-clip: text !important;
        -webkit-text-fill-color: transparent !important;
        background-clip: text !important;
        filter: drop-shadow(0 2px 4px var(--color-val-rgba-0-0-0-0-15)) !important;
    }

    html[data-theme="light"] body .site-title .title-text {
        color: inherit !important;
    }

    html[data-theme="light"] body .site-title i {
        background: linear-gradient(135deg,
                var(--color-val-hex-3b82f6) 0%,
                var(--color-val-hex-60a5fa) 100%) !important;
        -webkit-background-clip: text !important;
        -webkit-text-fill-color: transparent !important;
        background-clip: text !important;
        filter: drop-shadow(0 0 6px var(--color-val-rgba-59-130-246-0-5)) !important;
    }

    html[data-theme="light"] body .header-btn {
        background: linear-gradient(135deg,
                var(--color-val-rgba-255-255-255-0-95) 0%,
                var(--color-val-rgba-248-250-252-0-9) 100%) !important;
        border: 1px solid var(--color-val-rgba-226-232-240-0-8) !important;
        color: var(--color-val-hex-64748b) !important;
        box-shadow:
            0 2px 8px var(--color-val-rgba-0-0-0-0-06),
            inset 0 1px 0 var(--color-val-rgba-255-255-255-0-9) !important;
    }

    html[data-theme="light"] body .header-btn:hover,
    html[data-theme="light"] body .header-btn:active {
        background: linear-gradient(135deg,
                var(--color-val-rgba-240-249-255-1) 0%,
                var(--color-val-rgba-224-242-254-0-95) 100%) !important;
        color: var(--color-val-hex-0284c7) !important;
        border-color: var(--color-val-rgba-186-230-253-0-8) !important;
        box-shadow:
            0 4px 15px var(--color-val-rgba-59-130-246-0-2),
            0 0 15px var(--color-val-rgba-59-130-246-0-15),
            inset 0 1px 0 var(--color-val-rgba-255-255-255-1) !important;
    }

    html[data-theme="light"] body .header-btn:hover i,
    html[data-theme="light"] body .header-btn:active i {
        filter: drop-shadow(0 0 6px var(--color-val-rgba-59-130-246-0-5));
    }

    /* Light Mode Theme Toggle */
    html[data-theme="light"] body button[onclick="toggleTheme()"] {
        color: var(--color-val-hex-f59e0b) !important;
        border-color: var(--color-val-rgba-245-158-11-0-4) !important;
        background: linear-gradient(135deg,
                var(--color-val-rgba-254-243-199-0-8) 0%,
                var(--color-val-rgba-253-230-138-0-6) 100%) !important;
    }

    html[data-theme="light"] body button[onclick="toggleTheme()"] i {
        filter: drop-shadow(0 0 6px var(--color-val-rgba-245-158-11-0-4));
    }

    html[data-theme="light"] body .user-avatar img {
        border-color: var(--color-val-rgba-59-130-246-0-6) !important;
        box-shadow:
            0 0 12px var(--color-val-rgba-59-130-246-0-25),
            inset 0 1px 0 var(--color-val-rgba-255-255-255-0-5) !important;
    }
}

/* User Dropdown Styles */
.user-dropdown {
    width: 260px;
    right: 0;
    left: auto;
    transform-origin: top right;
}

.user-dropdown-header {
    padding: 15px;
    border-bottom: 1px solid var(--border-color);
    background: var(--color-val-rgba-0-0-0-0-2);
    border-radius: 16px 16px 0 0;
}

.user-info-mini .details {
    display: flex;
    flex-direction: column;
}

.user-info-mini .name {
    font-weight: bold;
    color: var(--text-color);
}

.user-info-mini .role {
    font-size: 0.8em;
    color: var(--primary-color);
}

.menu-items {
    padding: 8px;
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.menu-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px;
    width: 100%;
    background: none;
    border: none;
    color: var(--text-muted);
    text-align: right;
    border-radius: 8px;
    cursor: pointer;
    text-decoration: none;
    transition: all 0.2s;
    font-size: 0.95em;
}

.menu-item:hover {
    background: var(--color-val-rgba-255-255-255-0-05);
    color: var(--text-color);
}

.menu-item.telegram-link {
    color: var(--color-val-hex-229ed9);
}

.menu-item.telegram-link:hover {
    background: var(--color-val-rgba-34-158-217-0-1);
}

.menu-item.danger-text {
    color: var(--color-val-hex-ef4444);
}

.menu-item.danger-text:hover {
    background: var(--color-val-rgba-239-68-68-0-1);
}

/* Bug Report Modal Specifics */
/* Bug Report Modal Specifics (Reference Design Match) */
/* Bug Report Modal Specifics (Reference Design Match - Spacious) */
#bugReportModal .custom-modal-content {
    background: var(--color-val-hex-0f172a);
    border: 1px solid var(--color-val-rgba-255-255-255-0-05);
    border-radius: 28px;
    /* Slightly more rounded */
    box-shadow: 0 30px 60px -15px var(--color-val-rgba-0-0-0-0-6);
    padding: 30px;
    /* More internal padding */
    max-width: 480px;
    /* Slightly wider */
    width: 90%;
    margin: 0 20px;
}

#bugReportModal .modal-header {
    border: none;
    padding: 0 0 30px 0;
    /* More space below header */
    display: flex;
    justify-content: center;
    /* Center the title */
    align-items: center;
}

#bugReportModal .modal-header h3 {
    font-size: 1.25rem;
    color: var(--color-val-hex-3b82f6);
    display: flex;
    flex-direction: row-reverse;
    gap: 10px;
    font-weight: 700;
}

/* Close Button - Larger and more prominent */
#bugReportModal .close-modal-btn {
    background: var(--color-val-hex-f8fafc) !important;
    color: var(--color-val-hex-0f172a) !important;
    width: 40px !important;
    height: 40px !important;
    border-radius: 12px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    border: none !important;
    opacity: 1 !important;
    transition: transform 0.2s !important;
    position: static !important;
    font-size: 1.1rem !important;
}

#bugReportModal .close-modal-btn:hover {
    transform: scale(1.05) !important;
    background: var(--color-val-hex-e2e8f0) !important;
}

.issue-types {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 15px;
    /* Wider gap between cards */
    margin-top: 15px;
    margin-bottom: 25px;
    /* Space after cards */
}

.type-radio {
    position: relative;
    cursor: pointer;
}

.type-radio input {
    position: absolute;
    opacity: 0;
}

.type-box {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 12px;
    padding: 20px 10px;
    background: var(--color-val-rgba-30-41-59-0-4);
    border: 1px solid var(--color-val-rgba-255-255-255-0-08);
    border-radius: 20px;
    /* More rounded cards */
    color: var(--color-val-hex-94a3b8);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    font-size: 0.9em;
    height: 130px;
    /* Taller Cards */
}

.type-box i {
    font-size: 1.6em;
    margin-bottom: 4px;
}

/* Selected State - More glow */
.type-radio input:checked+.type-box {
    background: var(--color-val-rgba-59-130-246-0-15);
    border: 1px solid var(--color-val-hex-3b82f6);
    color: var(--color-val-hex-60a5fa);
    box-shadow: 0 0 25px var(--color-val-rgba-59-130-246-0-15);
    transform: translateY(-2px);
}

/* Textarea customization */
#bugReportModal textarea {
    background: var(--color-val-rgba-15-23-42-0-4) !important;
    border: 1px solid var(--color-val-rgba-59-130-246-0-3) !important;
    border-radius: 20px !important;
    padding: 20px !important;
    color: white !important;
    font-size: 1rem !important;
    resize: none;
    min-height: 140px;
    /* Taller input */
    line-height: 1.6 !important;
}

#bugReportModal textarea:focus {
    border-color: var(--color-val-hex-3b82f6) !important;
    box-shadow: 0 0 0 3px var(--color-val-rgba-59-130-246-0-15) !important;
    outline: none !important;
    background: var(--color-val-rgba-15-23-42-0-8) !important;
}

.modal-desc {
    color: var(--color-val-hex-94a3b8);
    margin-bottom: 25px;
    font-size: 0.95em;
    line-height: 1.6;
    text-align: right;
    padding: 0 5px;
}

/* Label Styling */
#bugReportModal label:not(.type-radio) {
    display: block;
    margin-bottom: 10px;
    color: var(--color-val-hex-cbd5e1);
    font-size: 0.95em;
    font-weight: 500;
}

/* Footer Buttons */
#bugReportModal .modal-footer {
    border: none;
    padding: 25px 0 0 0;
    display: flex;
    gap: 15px;
    flex-direction: row-reverse;
}

/* Submit Button (White in image) */
#bugReportModal .btn-submit {
    background: var(--color-val-hex-f8fafc) !important;
    color: var(--color-val-hex-0f172a) !important;
    border: none !important;
    border-radius: 14px !important;
    /* Matches card radius style */
    padding: 0 25px !important;
    height: 52px !important;
    /* Taller button */
    font-weight: 700 !important;
    font-size: 1rem !important;
    display: flex !important;
    align-items: center !important;
    gap: 10px !important;
    flex: 2;
    justify-content: center !important;
    box-shadow: 0 4px 12px var(--color-val-rgba-255-255-255-0-1) !important;
    transition: all 0.2s !important;
}

#bugReportModal .btn-submit:hover {
    background: var(--color-val-hex-e2e8f0) !important;
    transform: translateY(-2px);
    box-shadow: 0 6px 20px var(--color-val-rgba-255-255-255-0-2) !important;
}

/* Cancel Button (Outlined) */
#bugReportModal .btn-cancel {
    background: transparent !important;
    border: 1px solid var(--color-val-rgba-255-255-255-0-15) !important;
    color: var(--color-val-hex-94a3b8) !important;
    border-radius: 14px !important;
    padding: 0 20px !important;
    height: 52px !important;
    flex: 1;
    font-weight: 500 !important;
    font-size: 1rem !important;
    transition: all 0.2s !important;
}

#bugReportModal .btn-cancel:hover {
    border-color: var(--color-val-rgba-255-255-255-0-4) !important;
    color: white !important;
    background: var(--color-val-rgba-255-255-255-0-05) !important;
}

/* Improved Dropdown Animation (Pop from button) */
.notification-dropdown {
    display: block !important;
    /* Force block to allow transition */
    visibility: hidden;
    opacity: 0;
    transform: translateY(-10px) scale(0.9);
    transform-origin: top center;
    /* Default origin */
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    /* Spring effect */
    pointer-events: none;
}

.notification-dropdown.active {
    visibility: visible;
    opacity: 1;
    transform: translateY(0) scale(1);
    pointer-events: all;
}

/* Desktop - Below Button Row, Centered with Safe Margins */
@media (min-width: 769px) {
    .notification-dropdown {
        position: absolute !important;
        top: 100% !important;
        /* Below header */
        left: 50% !important;
        right: auto !important;
        transform: translateX(-50%) translateY(-10px) scale(0.9);
        transform-origin: top center;
        margin-top: 10px;
        /* Space below buttons */
        max-width: min(90vw, 400px);
        /* Prevent overflow */
    }

    .notification-dropdown.active {
        transform: translateX(-50%) translateY(0) scale(1);
    }

    /* All dropdowns use same position */
    .user-dropdown,
    .messages-dropdown,
    .settings-dropdown,
    .notifications-dropdown {
        left: 50% !important;
        right: auto !important;
        transform-origin: top center;
    }
}

/* Mobile - Below Header Buttons */
@media (max-width: 768px) {
    .notification-dropdown {
        position: fixed !important;
        top: 100px !important;
        /* Below 2-row header */
        left: 50% !important;
        right: auto !important;
        transform: translateX(-50%) translateY(-10px) scale(0.9) !important;
        transform-origin: top center !important;
        margin: 0 !important;
        width: calc(100vw - 32px) !important;
        max-width: 340px !important;
        z-index: 9999 !important;
        visibility: hidden !important;
        opacity: 0 !important;
    }

    .notification-dropdown.active {
        transform: translateX(-50%) translateY(0) scale(1) !important;
        visibility: visible !important;
        opacity: 1 !important;
    }

    /* All dropdowns use same center position */
    .user-dropdown,
    .messages-dropdown,
    .settings-dropdown,
    .notifications-dropdown {
        left: 50% !important;
        right: auto !important;
    }
}

/* ========================================= */
/*       Advanced Bug Report System          */
/* ========================================= */

/* Modal Structure Enhancements */
.bug-report-content {
    max-width: 650px !important;
    /* Wider for multi-col */
    padding: 0 !important;
    overflow: hidden !important;
    display: flex;
    flex-direction: column;
    max-height: 90vh;
}

.bug-report-content .modal-header {
    padding: 20px 25px !important;
    background: var(--color-val-rgba-0-0-0-0-2);
    border-bottom: 1px solid var(--color-val-rgba-255-255-255-0-05) !important;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.bug-report-content .modal-body {
    padding: 25px !important;
    overflow-y: auto;
    max-height: calc(90vh - 140px);
}

.bug-report-content .modal-footer {
    padding: 20px 25px !important;
    background: var(--color-val-rgba-0-0-0-0-2);
    border-top: 1px solid var(--color-val-rgba-255-255-255-0-05);
    margin-top: 0 !important;
    /* Reset */
}

/* Issue Types Grid */
.issue-types-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 12px;
    margin-top: 10px;
}

.type-option {
    cursor: pointer;
    position: relative;
}

.type-option input {
    position: absolute;
    opacity: 0;
}

.type-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 15px 10px;
    background: var(--color-val-rgba-255-255-255-0-03);
    border: 1px solid var(--color-val-rgba-255-255-255-0-05);
    border-radius: 12px;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    height: 100%;
}

.type-card i {
    font-size: 1.4em;
    color: var(--text-muted);
    margin: 0 !important;
}

.type-card span {
    font-size: 0.85em;
    color: var(--text-muted);
    font-weight: 500;
}

.type-option input:checked+.type-card {
    background: var(--color-val-rgba-59-130-246-0-1);
    border-color: var(--color-val-hex-3b82f6);
    box-shadow: 0 4px 12px var(--color-val-rgba-59-130-246-0-15);
}

.type-option input:checked+.type-card i,
.type-option input:checked+.type-card span {
    color: var(--color-val-hex-3b82f6);
}

/* Mobile Grid */
@media (max-width: 600px) {
    .issue-types-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

/* Severity Badges */
.severity-options {
    display: flex;
    gap: 10px;
    margin-top: 10px;
    flex-wrap: wrap;
}

.severity-radio {
    cursor: pointer;
}

.severity-radio input {
    display: none;
}

.severity-radio .badge {
    display: inline-flex;
    align-items: center;
    padding: 6px 16px;
    border-radius: 50px;
    font-size: 0.9em;
    font-weight: 600;
    background: var(--color-val-rgba-255-255-255-0-03);
    border: 1px solid var(--color-val-rgba-255-255-255-0-1);
    color: var(--text-muted);
    transition: all 0.2s ease;
}

/* Severity Colors (Selected) */
.severity-radio.low input:checked+.badge {
    background: var(--color-val-rgba-16-185-129-0-15);
    border-color: var(--color-val-hex-10b981);
    color: var(--color-val-hex-10b981);
}

.severity-radio.medium input:checked+.badge {
    background: var(--color-val-rgba-245-158-11-0-15);
    border-color: var(--color-val-hex-f59e0b);
    color: var(--color-val-hex-f59e0b);
}

.severity-radio.high input:checked+.badge {
    background: var(--color-val-rgba-239-68-68-0-15);
    border-color: var(--color-val-hex-ef4444);
    color: var(--color-val-hex-ef4444);
}

.severity-radio.critical input:checked+.badge {
    background: var(--color-val-rgba-239-68-68-0-25);
    border-color: var(--color-val-hex-ff0000);
    color: var(--color-val-hex-ff0000);
    box-shadow: 0 0 10px var(--color-val-rgba-255-0-0-0-2);
    animation: pulse-border 2s infinite;
}

/* Form Grid Layout */
.form-row-grid {
    display: grid;
    grid-template-columns: 1.2fr 0.8fr;
    gap: 20px;
}

@media (max-width: 600px) {
    .form-row-grid {
        grid-template-columns: 1fr;
        gap: 0;
    }
}

/* Enhanced Inputs */
.input-with-icon {
    position: relative;
}

.input-with-icon i {
    position: absolute;
    right: 15px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--text-muted);
    pointer-events: none;
}

.input-with-icon input {
    padding-right: 40px !important;
}

/* File Upload Styling */
.file-upload-wrapper {
    position: relative;
    width: 100%;
}

.file-input {
    position: absolute;
    width: 100%;
    height: 100%;
    opacity: 0;
    cursor: pointer;
    z-index: 2;
}

.file-label {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    padding: 12px;
    background: var(--color-val-rgba-255-255-255-0-03);
    border: 1px dashed var(--color-val-rgba-59-130-246-0-4);
    border-radius: 12px;
    color: var(--text-muted);
    transition: all 0.2s;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.file-input:hover+.file-label {
    background: var(--color-val-rgba-59-130-246-0-05);
    border-color: var(--color-val-hex-3b82f6);
    color: var(--color-val-hex-3b82f6);
}

.file-label i {
    font-size: 1.1em;
}

/* Required Field Indicator */
.required-field::after {
    content: '*';
    color: var(--color-val-hex-ef4444);
    margin-right: 4px;
}

/* Success State Animation */
.success-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 50px 20px !important;
    height: 100%;
}

.success-animation {
    width: 80px;
    height: 80px;
    margin-bottom: 25px;
    border-radius: 50%;
    background: var(--color-val-rgba-16-185-129-0-1);
    display: flex;
    align-items: center;
    justify-content: center;
    animation: scale-in-bounce 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.success-animation i {
    font-size: 3rem;
    color: var(--color-val-hex-10b981);
    margin: 0 !important;
}

.success-state h3 {
    color: var(--text-light);
    margin-bottom: 10px;
    font-size: 1.5rem;
}

/* Light Mode Adjustments */
html[data-theme="light"] body .bug-report-content {
    background: var(--color-val-hex-ffffff);
    box-shadow: 0 10px 40px var(--color-val-rgba-0-0-0-0-1);
}

html[data-theme="light"] body .bug-report-content .modal-header,
html[data-theme="light"] body .bug-report-content .modal-footer {
    background: var(--color-val-hex-f8fafc);
    border-color: var(--color-val-hex-e2e8f0) !important;
}

html[data-theme="light"] body .type-card {
    background: var(--color-val-hex-ffffff);
    border-color: var(--color-val-hex-e2e8f0);
    box-shadow: 0 2px 4px var(--color-val-rgba-0-0-0-0-02);
}

html[data-theme="light"] body .type-card:hover {
    border-color: var(--color-val-hex-cbd5e1);
    background: var(--color-val-hex-f1f5f9);
}

html[data-theme="light"] body .type-option input:checked+.type-card {
    background: var(--color-val-hex-eff6ff);
    border-color: var(--color-val-hex-3b82f6);
}

html[data-theme="light"] body .severity-radio .badge {
    background: var(--color-val-hex-f1f5f9);
    border-color: var(--color-val-hex-e2e8f0);
    color: var(--color-val-hex-64748b);
}

html[data-theme="light"] body .file-label {
    background: var(--color-val-hex-f8fafc);
    border-color: var(--color-val-hex-cbd5e1);
}

@keyframes scale-in-bounce {
    0% {
        transform: scale(0);
        opacity: 0;
    }

    60% {
        transform: scale(1.1);
    }

    100% {
        transform: scale(1);
        opacity: 1;
    }
}

/* Fix: Ensure update modal is always on top of header (which has z-index: 99999 on mobile) */
.update-modal {
    z-index: 200000 !important;
}

.update-modal-backdrop {
    z-index: 200000 !important;
}

.update-modal-content {
    z-index: 200001 !important;
}

/* ========== Moved Controls Integration ========== */

/* Inline Settings Group */
.inline-setting-group {
    display: inline-flex;
    align-items: center;
    background-color: var(--color-val-rgba-59-158-255-0-08);
    padding: 6px 14px;
    border-radius: 8px;
    border: 1px solid var(--color-val-rgba-59-158-255-0-15);
    margin-left: 8px;
    transition: all 0.2s ease;
}

.inline-setting-group:hover {
    background-color: var(--color-val-rgba-59-158-255-0-15);
    border-color: var(--color-val-rgba-59-158-255-0-3);
}

.inline-checkbox {
    margin-left: 8px;
    accent-color: var(--primary-color);
    width: 16px;
    height: 16px;
    cursor: pointer;
}

.inline-setting-group label {
    margin-bottom: 0;
    font-size: 0.9em;
    cursor: pointer;
    color: var(--text-muted);
    display: flex;
    align-items: center;
    gap: 6px;
}

.inline-setting-group label:hover {
    color: var(--primary-color);
}

/* Adjust icon size */
.inline-setting-group i {
    font-size: 1em;
    color: var(--primary-color);
}

html[data-theme="light"] body .inline-setting-group {
    background-color: var(--color-val-hex-f1f5f9);
    border-color: var(--color-val-hex-e2e8f0);
}

html[data-theme="light"] body .inline-setting-group:hover {
    background-color: var(--color-val-hex-e2e8f0);
    border-color: var(--color-val-hex-cbd5e1);
}

/* Ensure moved buttons have decent touch target */
.controls-bar button[title="تبديل الوضع"] {
    min-width: 42px;
    justify-content: center;
}

/* ========== Floating Bug Report Button ========== */
.floating-bug-btn {
    position: fixed;
    bottom: 25px;
    left: 25px;
    width: 55px;
    height: 55px;
    background: var(--color-val-rgba-15-23-42-0-4);
    backdrop-filter: blur(10px);
    border: 1px solid var(--color-val-rgba-255-255-255-0-05);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    cursor: pointer;
    box-shadow: 0 4px 15px var(--color-val-rgba-0-0-0-0-2);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    color: var(--color-val-rgba-255-255-255-0-6);
    font-size: 1.4em;
    padding: 0;
    /* Align fix */
    line-height: 1;
    /* Align fix */
}

.floating-bug-btn i {
    margin: 0;
    padding: 0;
    line-height: normal;
}

.floating-bug-btn:hover {
    transform: scale(1.1) rotate(15deg);
    background: var(--color-val-rgba-220-38-38-0-8);
    /* Red tint for bug */
    color: white;
    box-shadow: 0 8px 25px var(--color-val-rgba-220-38-38-0-4);
    border-color: var(--color-val-rgba-255-255-255-0-2);
}

/* Custom Gold Theme Button Style (Mobile Match) */
.controls-bar button[title="تبديل الوضع"] {
    border-color: var(--color-val-rgba-245-158-11-0-3) !important;
    background: linear-gradient(135deg, var(--color-val-rgba-245-158-11-0-1) 0%, var(--color-val-rgba-251-191-36-0-05) 100%) !important;
    color: var(--color-val-hex-f59e0b) !important;
}

.controls-bar button[title="تبديل الوضع"] i {
    color: var(--color-val-hex-f59e0b) !important;
    filter: drop-shadow(0 0 8px var(--color-val-rgba-245-158-11-0-4));
}

.controls-bar button[title="تبديل الوضع"]:hover {
    background: linear-gradient(135deg, var(--color-val-rgba-245-158-11-0-2) 0%, var(--color-val-rgba-251-191-36-0-1) 100%) !important;
    border-color: var(--color-val-rgba-245-158-11-0-5) !important;
    box-shadow: 0 0 15px var(--color-val-rgba-245-158-11-0-2);
    transform: translateY(-2px);
}



/* Light Mode */
html[data-theme="light"] body .floating-bug-btn {
    background: var(--color-val-rgba-255-255-255-0-6);
    border-color: var(--color-val-rgba-0-0-0-0-05);
    color: var(--color-val-hex-64748b);
    box-shadow: 0 4px 15px var(--color-val-rgba-0-0-0-0-1);
}

html[data-theme="light"] body .floating-bug-btn:hover {
    background: var(--color-val-hex-ef4444);
    color: white;
    box-shadow: 0 8px 25px var(--color-val-rgba-239-68-68-0-3);
}

/* ========================================= */
/*       Enhanced Update Modal Styles        */
/* ========================================= */

.update-modal {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    height: 100% !important;
    z-index: 10000 !important;
    display: none !important;
    align-items: center !important;
    justify-content: center !important;
    opacity: 0 !important;
    transition: opacity 0.3s ease !important;
}

.update-modal.active {
    display: flex !important;
    opacity: 1 !important;
}

/* ========================================= */
/*    Enhanced Bug Report Modal Styles      */
/* ========================================= */

/* Modal Header Enhancement */
#bugReportModal .modal-header {
    background: linear-gradient(135deg,
            var(--color-val-rgba-59-130-246-0-1) 0%,
            var(--color-val-rgba-147-51-234-0-05) 100%) !important;
    border-bottom: 1px solid var(--color-val-rgba-59-130-246-0-2) !important;
    padding: 25px 30px !important;
    position: relative !important;
    overflow: hidden !important;
}

#bugReportModal .modal-header::before {
    content: '' !important;
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    height: 3px !important;
    background: linear-gradient(90deg,
            var(--color-val-hex-3b82f6) 0%,
            var(--color-val-hex-8b5cf6) 50%,
            var(--color-val-hex-3b82f6) 100%) !important;
    background-size: 200% 100% !important;
    animation: headerShimmer 3s ease-in-out infinite !important;
}

@keyframes headerShimmer {

    0%,
    100% {
        background-position: 200% 0;
    }

    50% {
        background-position: -200% 0;
    }
}

#bugReportModal .modal-header h2 {
    background: linear-gradient(135deg, var(--color-val-hex-60a5fa) 0%, var(--color-val-hex-a78bfa) 100%) !important;
    -webkit-background-clip: text !important;
    -webkit-text-fill-color: transparent !important;
    background-clip: text !important;
    font-size: 26px !important;
    font-weight: 700 !important;
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
}

#bugReportModal .modal-header h2 i {
    background: linear-gradient(135deg, var(--color-val-hex-3b82f6), var(--color-val-hex-8b5cf6)) !important;
    -webkit-background-clip: text !important;
    -webkit-text-fill-color: transparent !important;
    filter: drop-shadow(0 0 10px var(--color-val-rgba-59-130-246-0-5)) !important;
    animation: iconFloat 3s ease-in-out infinite !important;
}

@keyframes iconFloat {

    0%,
    100% {
        transform: translateY(0px);
    }

    50% {
        transform: translateY(-5px);
    }
}

/* Enhanced Type Selection Cards */
#bugReportModal .type-box {
    background: var(--color-val-rgba-30-41-59-0-5) !important;
    border: 2px solid var(--color-val-rgba-255-255-255-0-08) !important;
    transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) !important;
    position: relative !important;
    overflow: hidden !important;
}

#bugReportModal .type-box::before {
    content: '' !important;
    position: absolute !important;
    top: 50% !important;
    left: 50% !important;
    width: 0 !important;
    height: 0 !important;
    border-radius: 50% !important;
    background: radial-gradient(circle, var(--color-val-rgba-59-130-246-0-2), transparent 70%) !important;
    transform: translate(-50%, -50%) !important;
    transition: width 0.6s ease, height 0.6s ease !important;
}

#bugReportModal .type-box:hover::before {
    width: 200px !important;
    height: 200px !important;
}

#bugReportModal .type-box:hover {
    transform: translateY(-5px) scale(1.02) !important;
    border-color: var(--color-val-rgba-59-130-246-0-3) !important;
    box-shadow: 0 10px 30px var(--color-val-rgba-59-130-246-0-15) !important;
}

#bugReportModal .type-radio input:checked+.type-box {
    background: linear-gradient(135deg,
            var(--color-val-rgba-59-130-246-0-2) 0%,
            var(--color-val-rgba-147-51-234-0-15) 100%) !important;
    border: 2px solid var(--color-val-hex-3b82f6) !important;
    box-shadow:
        0 0 30px var(--color-val-rgba-59-130-246-0-3),
        inset 0 0 20px var(--color-val-rgba-59-130-246-0-1) !important;
    transform: translateY(-3px) scale(1.05) !important;
}

#bugReportModal .type-radio input:checked+.type-box i {
    color: var(--color-val-hex-60a5fa) !important;
    filter: drop-shadow(0 0 10px var(--color-val-rgba-96-165-250-0-6)) !important;
    animation: selectedPulse 2s ease-in-out infinite !important;
}

@keyframes selectedPulse {

    0%,
    100% {
        transform: scale(1);
    }

    50% {
        transform: scale(1.1);
    }
}

/* Enhanced Severity Badges */
#bugReportModal .severity-radio {
    transition: all 0.3s ease !important;
}

#bugReportModal .severity-radio .badge {
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1) !important;
    position: relative !important;
    overflow: hidden !important;
}

#bugReportModal .severity-radio input:checked+.badge {
    transform: scale(1.1) !important;
    box-shadow: 0 0 20px currentColor !important;
}

#bugReportModal .severity-radio.medium input:checked+.badge {
    background: linear-gradient(135deg, var(--color-val-hex-f59e0b), var(--color-val-hex-d97706)) !important;
    animation: badgeGlow 2s ease-in-out infinite !important;
}

@keyframes badgeGlow {

    0%,
    100% {
        box-shadow: 0 0 15px var(--color-val-rgba-245-158-11-0-5);
    }

    50% {
        box-shadow: 0 0 25px var(--color-val-rgba-245-158-11-0-8);
    }
}

/* Enhanced Input Fields */
#bugReportModal input[type="text"],
#bugReportModal textarea {
    transition: all 0.3s ease !important;
    position: relative !important;
}

#bugReportModal input[type="text"]:focus,
#bugReportModal textarea:focus {
    transform: translateY(-2px) !important;
    box-shadow:
        0 0 0 3px var(--color-val-rgba-59-130-246-0-15),
        0 10px 30px var(--color-val-rgba-59-130-246-0-1) !important;
}

/* Enhanced Buttons */
#bugReportModal .btn-submit {
    position: relative !important;
    overflow: hidden !important;
}

#bugReportModal .btn-submit::before {
    content: '' !important;
    position: absolute !important;
    top: 50% !important;
    left: 50% !important;
    width: 0 !important;
    height: 0 !important;
    border-radius: 50% !important;
    background: var(--color-val-rgba-255-255-255-0-3) !important;
    transform: translate(-50%, -50%) !important;
    transition: width 0.6s ease, height 0.6s ease !important;
}

#bugReportModal .btn-submit:hover::before {
    width: 300px !important;
    height: 300px !important;
}

#bugReportModal .btn-submit:active {
    transform: translateY(0px) scale(0.98) !important;
}

#bugReportModal .btn-cancel:hover {
    transform: translateY(-2px) !important;
    box-shadow: 0 5px 15px var(--color-val-rgba-255-255-255-0-1) !important;
}

/* Modal Animation */
#bugReportModal.active .modal-content {
    animation: modalBounceIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) !important;
}

@keyframes modalBounceIn {
    0% {
        opacity: 0;
        transform: scale(0.8) translateY(50px);
    }

    60% {
        transform: scale(1.05) translateY(-10px);
    }

    100% {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

/* Preview State Enhancement */
#bugReportModal .preview-box {
    background: var(--color-val-rgba-15-23-42-0-6) !important;
    border: 1px solid var(--color-val-rgba-59-130-246-0-2) !important;
    border-radius: 16px !important;
    padding: 20px !important;
    box-shadow: inset 0 0 20px var(--color-val-rgba-59-130-246-0-05) !important;
}

#bugReportModal .chat-bubble {
    background: linear-gradient(135deg,
            var(--color-val-rgba-37-211-102-0-1) 0%,
            var(--color-val-rgba-37-211-102-0-05) 100%) !important;
    border-left: 3px solid var(--color-val-hex-25d366) !important;
    padding: 15px !important;
    border-radius: 12px !important;
    box-shadow: 0 5px 15px var(--color-val-rgba-37-211-102-0-1) !important;
}

/* Success State Animation */
#bugReportModal .success-animation {
    animation: successBounce 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) !important;
}

@keyframes successBounce {
    0% {
        transform: scale(0);
        opacity: 0;
    }

    50% {
        transform: scale(1.2);
    }

    100% {
        transform: scale(1);
        opacity: 1;
    }
}

#bugReportModal .success-animation i {
    color: var(--color-val-hex-25d366) !important;
    filter: drop-shadow(0 0 20px var(--color-val-rgba-37-211-102-0-6)) !important;
    animation: successPulse 2s ease-in-out infinite !important;
}

@keyframes successPulse {

    0%,
    100% {
        transform: scale(1);
    }

    50% {
        transform: scale(1.1);
        filter: drop-shadow(0 0 30px var(--color-val-rgba-37-211-102-0-8));
    }
}

/* Mobile Responsive */
@media (max-width: 768px) {
    #bugReportModal .modal-header h2 {
        font-size: 22px !important;
    }

    #bugReportModal .type-box {
        height: 110px !important;
    }
}

/* Header Logo Styling */
.site-title {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 15px;
}

.header-logo-svg {
    width: 60px;
    height: 60px;
    display: block;
    object-fit: contain;
}

.header-logo-svg:hover {
    transform: none;
}

/* Header Subtitle & Badge */
.site-title {
    flex-direction: row;
    align-items: center;
}

.title-wrapper {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2px;
}

.main-title-row {
    display: flex;
    align-items: center;
    gap: 8px;
    /* Reduced gap */
}

.version-badge {
    font-size: 0.38em;
    /* Slightly larger for readability */
    background: var(--color-val-rgba-59-158-255-0-1);
    color: var(--color-val-hex-ffd700);
    padding: 2px 8px;
    border-radius: 12px;
    /* Pill shape */
    border: 1px solid var(--color-val-rgba-59-158-255-0-2);
    letter-spacing: 0.5px;
    align-self: center;
    /* Center vertically with title */
    margin-top: 5px;
    /* Optical adjustment */
}

.site-subtitle {
    font-size: 0.55em;
    color: var(--text-light);
    /* Changed from muted to light for better visibility */
    font-weight: normal;
    opacity: 1;
    margin-top: 2px;
    white-space: nowrap;
    /* Prevent wrapping issues */
}

/* Logo Wrapper for Badge */
.logo-wrapper {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2px;
    /* Close spacing between logo and badge */
}

.version-badge {
    align-self: center !important;
    /* Override previous flex-end */
    margin-top: 0 !important;
    margin-left: 0 !important;
    margin-bottom: 0 !important;
}


.app-header .candles-layer {
    position: absolute;
    inset: 0;
    z-index: 1;

    pointer-events: none;
    overflow: hidden;
}

.app-header .header-inner {
    position: relative;
    z-index: 3;
}

/* ستايل مشترك */
.app-header .candles-layer::before,
.app-header .candles-layer::after {
    content: "";
    position: absolute;
    top: 0;
    bottom: 0;

    width: 26%;
    max-width: 320px;
    min-width: 220px;

    background-repeat: no-repeat;
    background-size: auto 100%;
    opacity: 0.14;
    filter: contrast(120%);
}

/* LEFT */
.app-header .candles-layer::before {
    left: 0;
    background-position: left center;

    -webkit-mask-image: linear-gradient(to right, black 0%, black 55%, transparent 100%);
    mask-image: linear-gradient(to right, black 0%, black 55%, transparent 100%);


    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 260 120'%3E%3Cstyle%3E.g%7Bfill:%2300d4aa;%7D.r%7Bfill:%23ff4757;%7D.w%7Bstroke-width:1;stroke-opacity:0.6;%7D.wg%7Bstroke:%2300d4aa;%7D.wr%7Bstroke:%23ff4757;%7D%3C/style%3E%3Crect x='10' y='60' width='8' height='30' class='r'/%3E%3Cline x1='14' y1='55' x2='14' y2='95' class='wr w'/%3E%3Crect x='30' y='50' width='8' height='20' class='g'/%3E%3Cline x1='34' y1='45' x2='34' y2='75' class='wg w'/%3E%3Crect x='50' y='40' width='8' height='40' class='g'/%3E%3Cline x1='54' y1='35' x2='54' y2='85' class='wg w'/%3E%3Crect x='70' y='55' width='8' height='15' class='r'/%3E%3Cline x1='74' y1='50' x2='74' y2='80' class='wr w'/%3E%3Crect x='90' y='45' width='8' height='35' class='g'/%3E%3Cline x1='94' y1='40' x2='94' y2='85' class='wg w'/%3E%3C/svg%3E");
}

/* RIGHT (نفس SVG لكن مقلوب أفقياً) */
.app-header .candles-layer::after {
    right: 0;
    background-position: left center;

    transform: scaleX(-1);
    transform-origin: center;

    -webkit-mask-image: linear-gradient(to right, black 0%, black 55%, transparent 100%);
    mask-image: linear-gradient(to right, black 0%, black 55%, transparent 100%);

    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 260 120'%3E%3Cstyle%3E.g%7Bfill:%2300d4aa;%7D.r%7Bfill:%23ff4757;%7D.w%7Bstroke-width:1;stroke-opacity:0.6;%7D.wg%7Bstroke:%2300d4aa;%7D.wr%7Bstroke:%23ff4757;%7D%3C/style%3E%3Crect x='10' y='60' width='8' height='30' class='r'/%3E%3Cline x1='14' y1='55' x2='14' y2='95' class='wr w'/%3E%3Crect x='30' y='50' width='8' height='20' class='g'/%3E%3Cline x1='34' y1='45' x2='34' y2='75' class='wg w'/%3E%3Crect x='50' y='40' width='8' height='40' class='g'/%3E%3Cline x1='54' y1='35' x2='54' y2='85' class='wg w'/%3E%3Crect x='70' y='55' width='8' height='15' class='r'/%3E%3Cline x1='74' y1='50' x2='74' y2='80' class='wr w'/%3E%3Crect x='90' y='45' width='8' height='35' class='g'/%3E%3Cline x1='94' y1='40' x2='94' y2='85' class='wg w'/%3E%3C/svg%3E");
}

/* Responsive */
@media (max-width: 768px) {

    .app-header .candles-layer::before,
    .app-header .candles-layer::after {
        width: 22%;
        opacity: 0.10;
    }
}

/* ===========================================
   MOBILE HEADER LAYOUT (MATCHES YOUR IMAGE)
   Structure: .site-title > .logo-wrapper + .title-wrapper
   =========================================== */
@media (max-width: 480px) {

    /* الهيدر يتنفس وما يقطعش المحتوى */
    .app-header {
        height: auto !important;
        min-height: 86px !important;
        padding: 14px 14px !important;
    }


    /* نخلي H1 هو الـ grid container */
    .app-header .site-title {
        display: block !important;
        /* Changed from grid to block for full centering */
        text-align: center !important;
        margin: 0 !important;
        width: 100%;
    }

    /* إخفاء اللوجو والإصدار */
    .app-header .logo-wrapper {
        display: none !important;
    }

    /* SVG */
    .app-header .header-logo-svg,
    .app-header .logo-wrapper svg {
        width: 44px !important;
        height: 44px !important;
        display: block !important;
        max-width: 44px !important;
    }

    /* badge */
    .app-header .version-badge {
        justify-self: end !important;
        font-size: 11px !important;
        padding: 4px 9px !important;
        border-radius: 10px !important;
        white-space: nowrap !important;
        margin: 0 !important;
    }

    /* النص يسار */
    .app-header .title-wrapper,
    .app-header .header-center {
        grid-column: 1;
        grid-row: 1 / span 2;
        min-width: 0 !important;
        text-align: center;
        /* Ensure RTL alignment */
    }

    .app-header .title-text {
        display: block !important;
        font-size: 16px !important;
        /* Reduced to fit single line */
        line-height: 1.2 !important;
        white-space: nowrap !important;
        /* Force single line */
        letter-spacing: -0.5px !important;
        /* Tighten to fit */
        overflow: visible !important;
        text-overflow: unset !important;
    }

    .app-header .site-subtitle {
        display: block !important;
        margin-top: 6px !important;
        font-size: 13px !important;
        line-height: 1.35 !important;
        white-space: normal !important;
    }
}

/* أصغر بزاف: نقص شوية من العنوان */
@media (max-width: 360px) {
    .app-header .title-text {
        font-size: 20px !important;
    }

    .app-header .header-logo-svg,
    .app-header .logo-wrapper svg {
        width: 40px !important;
        height: 40px !important;
    }
}

/* =========================================
   SELL SECTION & NEW LAYOUT STYLES
   ========================================= */

.trade-actions-row {
    display: flex;
    gap: 20px;
    width: 100%;
    margin-bottom: 25px;
}

.trade-actions-row .section {
    flex: 1;
    min-width: 0;
    /* Prevents overflow in flex items */
    margin-bottom: 0;
    /* Remove bottom margin as row handles gap */
    display: flex;
    flex-direction: column;
}

/* Ensure both sections have same height */
.section-repurchase,
.section-sell {
    height: 100%;
}

/* Sell Controls Wrapper */
.sell-controls-wrapper {
    background: linear-gradient(145deg, var(--color-val-rgba-30-41-59-0-7) 0%, var(--color-val-rgba-15-23-42-0-4) 100%);
    padding: 15px;
    border-radius: 10px;
    border: 1px solid var(--border-color);
    margin-bottom: 15px;
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
}

.sell-controls-wrapper .sell-actions {
    grid-column: span 2;
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 10px;
    border-top: 1px solid var(--border-color);
    padding-top: 10px;
}

.sell-preview {
    font-size: 0.95em;
    color: var(--text-light);
    font-weight: 600;
}

.sell-preview .pnl-preview-positive {
    color: var(--positive-color);
}

.sell-preview .pnl-preview-negative {
    color: var(--negative-color);
}

.btn-add-sell {
    padding: 8px 20px;
    font-size: 0.9em;
    border-radius: 6px;
    background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
    color: white;
    border: none;
    cursor: pointer;
    transition: all 0.3s ease;
}

.btn-add-sell:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px var(--color-val-rgba-59-158-255-0-4);
}

/* Sell Table Specifics */
.sell-table-container {
    background: transparent;
    border: 1px solid var(--color-val-rgba-255-255-255-0-1);
    border-radius: 12px;
    padding: 0;
    box-shadow: none;
    overflow-x: auto;
    overflow-y: hidden;
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
    scrollbar-width: thin;
    scrollbar-color: var(--primary-color) rgb(0 0 0 / 0.1);
}

.sell-table-container::-webkit-scrollbar {
    height: 10px;
}

.sell-table-container::-webkit-scrollbar-track {
    background: var(--bg-color);
    border-radius: 5px;
    margin: 0 10px;
}

.sell-table-container::-webkit-scrollbar-thumb {
    background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
    border-radius: 5px;
    border: 2px solid var(--bg-color);
    transition: all 0.3s ease;
}

.sell-table-container::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(90deg, var(--secondary-color), var(--color-val-hex-ffb733));
    transform: scaleY(1.2);
}

.sell-table {
    border-collapse: separate;
    border-spacing: 0;
    min-width: 760px;
}

.sell-table th {
    background-color: var(--color-val-rgba-0-0-0-0-2);
    color: var(--text-light);
    padding: 12px 10px;
    font-size: 0.85em;
    border: 1px solid var(--color-val-rgba-255-255-255-0-05);
    position: sticky;
    top: 0;
    z-index: 2;
    backdrop-filter: blur(8px);
}

.sell-table td {
    vertical-align: middle;
    padding: 12px 10px;
    background-color: transparent;
    border-bottom: 1px solid var(--border-color);
    transition: border-color 0.3s ease, background-color 0.2s ease;
}

.sell-empty-row .sell-empty-cell {
    color: var(--text-muted);
    font-style: italic;
    text-align: center;
    opacity: 0.7;
    letter-spacing: 1px;
}

.sell-empty-row td:first-child {
    font-style: normal;
    color: var(--text-color);
    opacity: 0.8;
    letter-spacing: 0;
}

.sell-empty-row td {
    background: linear-gradient(90deg, var(--color-val-rgba-15-23-42-0-55), var(--color-val-rgba-2-6-23-0-6));
    border-bottom: 1px solid var(--color-val-rgba-148-163-184-0-15);
}

.sell-table tbody tr.sell-empty-row:hover td {
    background: linear-gradient(90deg, var(--color-val-rgba-15-23-42-0-55), var(--color-val-rgba-2-6-23-0-6));
    box-shadow: none;
}

html[data-theme="light"] body .sell-empty-row td {
    background: linear-gradient(90deg, var(--color-val-rgba-248-250-252-0-9), var(--color-val-rgba-241-245-249-0-95));
    border-bottom-color: var(--color-val-rgba-148-163-184-0-2);
}

.sell-table tbody tr:nth-child(even) td {
    background-color: transparent;
}

.sell-table tbody tr:hover td {
    background-color: var(--hover-bg);
    box-shadow: inset 0 0 0 1px var(--primary-color);
}

.sell-table td:nth-child(5) {
    color: var(--text-color);
    font-weight: 600;
}

/* Match repurchase table logic for # column */
.sell-table th:nth-child(1),
.sell-table td:nth-child(1) {
    min-width: 28px;
    width: 36px;
    padding: 4px 2px;
    text-align: center;
}

/* Specific width for Date column */
.sell-table th:nth-child(2),
.sell-table td:nth-child(2) {
    width: 130px;
    font-size: 0.85em;
    white-space: nowrap;
}

/* Ensure realized profit column fits */
.sell-table th:nth-child(6),
.sell-table td:nth-child(6) {
    min-width: 140px;
    white-space: nowrap;
    display: table-cell;
    position: sticky;
    left: 0;
    z-index: 1;
    background-color: var(--section-bg);
    box-shadow: 2px 0 6px var(--color-val-rgba-0-0-0-0-15);
}

.sell-table th:nth-child(6) {
    z-index: 3;
    background-color: var(--color-val-rgba-0-0-0-0-2);
}

.sell-table tbody tr:hover td:nth-child(6) {
    background-color: var(--hover-bg);
}

.btn-delete-sell {
    color: var(--text-muted);
    background: transparent;
    border: none;
    cursor: pointer;
    transition: color 0.2s;
}

.btn-delete-sell:hover {
    color: var(--negative-color);
}

html[data-theme="light"] body .sell-table-container {
    background: transparent;
    border: 1px solid var(--primary-color) !important;
    box-shadow: 0 2px 4px var(--color-val-rgba-0-0-0-0-05) !important;
}

html[data-theme="light"] body .sell-table th {
    background-color: var(--color-val-rgba-59-130-246-0-04);
    color: var(--color-val-hex-1e293b);
    border-color: var(--color-val-rgba-59-130-246-0-1);
}

html[data-theme="light"] body .sell-table td:nth-child(6) {
    background-color: var(--color-val-hex-ffffff);
    box-shadow: 2px 0 6px var(--color-val-rgba-0-0-0-0-08);
}

html[data-theme="light"] body .sell-table th:nth-child(6) {
    background-color: var(--color-val-rgba-59-130-246-0-06);
}

html[data-theme="light"] body .sell-table td {
    background-color: transparent;
    border-bottom: 1px solid var(--primary-color) !important;
}

html[data-theme="light"] body .sell-table tbody tr:nth-child(even) td {
    background-color: transparent;
}

html[data-theme="light"] body .sell-table tbody tr:hover td {
    background-color: var(--color-val-hex-f8f9fa);
}

/* Mobile Responsiveness */
@media (max-width: 900px) {
    .trade-actions-row {
        flex-direction: column;
    }

    .sell-controls-wrapper {
        grid-template-columns: 1fr;
    }

    .sell-controls-wrapper .sell-actions {
        grid-column: span 1;
        flex-direction: column;
        gap: 10px;
        align-items: stretch;
        text-align: center;
    }

    .sell-preview {
        margin-bottom: 5px;
    }
}

@media (max-width: 768px) {

    .sell-table th,
    .sell-table td {
        padding: 10px 8px;
        font-size: 0.82em;
    }
}


/* FORCE ORDERING OF SECTIONS */
.details-content-wrapper {
    display: flex;
    flex-direction: column;
}

.section-initial-and-targets {
    order: 1;
}

.trade-actions-row {
    order: 2;
}

.section-portfolio-stats {
    order: 3;
}


/* =========================================
   COMPACT DASHBOARD STYLES
   ========================================= */

.dashboard-container {
    display: grid;
    grid-template-columns: 1.2fr 1.6fr 1.2fr;
    /* Middle card slightly wider */
    gap: 15px;
    margin-bottom: 5px;
}

.dashboard-card {
    margin-top: 10px;
    background: var(--color-val-rgba-0-0-0-0-2);
    border: 1px solid var(--border-color);
    border-radius: 10px;
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

.card-header {
    margin-top: 10px;
    background: var(--color-val-rgba-59-158-255-0-1);
    padding: 8px 12px;
    font-size: 0.9em;
    font-weight: 600;
    color: var(--primary-color);
    border-bottom: 1px solid var(--border-color);
    display: flex;
    align-items: center;
    gap: 8px;
}

.card-content {
    margin-top: 10px;
    padding: 12px;
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
}

/* Card 1: Entry Input Styles */
.compact-form-group {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
    background-color: var(--input-bg);
    padding: 10px;
    border-radius: 8px;
    border: 1px solid var(--border-color);
    box-shadow: 0 2px 4px var(--shadow-color);
    transition: all 0.3s ease;
}

.compact-form-group:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px var(--shadow-color);
    border-color: var(--primary-color);
}

.compact-form-group label {
    font-size: 0.85em;
    color: var(--text-muted);
}

.compact-form-group input {
    width: 60%;
    padding: 4px 8px;
    font-size: 0.9em;
    border-radius: 4px;
    background: var(--input-bg);
    border: 1px solid var(--input-border);
    color: var(--text-color);
    text-align: left;
    direction: ltr;
    /* Ensure numbers align correctly */
}

.compact-summary-row {
    margin-top: 10px;
    padding-top: 5px;
    border-top: none;
    display: flex;
    justify-content: space-between;
    font-size: 0.9em;
    font-weight: 600;
    background-color: var(--input-bg);
    padding: 10px;
    border-radius: 8px;
    border: 1px solid var(--border-color);
    box-shadow: 0 2px 4px var(--shadow-color);
    transition: all 0.3s ease;
    align-items: center;
}

.compact-summary-row:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px var(--shadow-color);
    border-color: var(--primary-color);
}

.mono-font {
    font-family: 'Courier New', monospace;
    color: var(--text-light);
}

/* Card 2: Hero Stats */
.hero-stats {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 10px;
    margin-bottom: 12px;
    border-bottom: 1px solid var(--border-color);
    padding-bottom: 12px;
}

.hero-item {
    text-align: center;
    background-color: var(--input-bg);
    padding: 15px 10px;
    border-radius: 12px;
    border: 1px solid var(--border-color);
    box-shadow: 0 2px 5px var(--shadow-color);
    transition: all 0.3s ease;
}

.hero-item:hover {
    transform: translateY(-3px);
    box-shadow: 0 5px 15px var(--shadow-color);
    border-color: var(--primary-color);
}

.hero-label {
    font-size: 0.8em;
    color: var(--text-muted);
    margin-bottom: 2px;
}

.hero-value {
    font-size: 1.4em;
    font-weight: 700;
    color: var(--text-light);
}

#marketPriceDisplay {
    color: var(--text-light);
}

.hero-sub {
    font-size: 0.8em;
    font-weight: 600;
}

.stats-grid-compact {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
}

.stat-item {
    display: flex;
    justify-content: space-between;
    font-size: 0.8em;
    background: var(--color-val-rgba-255-255-255-0-03);
    padding: 4px 6px;
    border-radius: 4px;
}

.stat-label {
    color: var(--text-muted);
}

.stat-val {
    color: var(--text-light);
    font-weight: 600;
}

/* Card 3: Strategy */
.strategy-row {
    display: grid;
    grid-template-columns: 1.2fr 1fr;
    gap: 8px;
    align-items: center;
    margin-bottom: 6px;
}

.strategy-row:last-child {
    margin-bottom: 0;
}

.strategy-input {
    display: flex;
    align-items: center;
    gap: 5px;
}

.strategy-input label {
    font-size: 0.8em;
    white-space: nowrap;
    min-width: 45px;
}

.strategy-input input {
    width: 100%;
    padding: 2px 6px;
    font-size: 0.85em;
    border-radius: 4px;
    background: var(--input-bg);
    border: 1px solid var(--input-border);
    color: var(--text-color);
    text-align: center;
}

.strategy-output {
    font-size: 0.85em;
    text-align: left;
    color: var(--text-muted);
    background: var(--color-val-rgba-0-0-0-0-1);
    padding: 2px 5px;
    border-radius: 3px;
    direction: ltr;
}

.sl-row-compact input {
    border-color: var(--color-val-rgba-220-53-69-0-4);
    color: var(--color-val-hex-ff6b6b);
}

.sl-text span {
    color: var(--color-val-hex-ff6b6b);
}

/* Light Mode Overrides for Dashboard */
html[data-theme="light"] body .dashboard-card {
    background: var(--color-val-hex-ffffff);
    box-shadow: 0 2px 4px var(--color-val-rgba-0-0-0-0-05);
}

html[data-theme="light"] body .card-header {
    background: var(--color-val-hex-f1f5f9);
    color: var(--color-val-hex-475569);
}

html[data-theme="light"] body .stat-item {
    background: var(--color-val-hex-f8fafc);
}

html[data-theme="light"] body .strategy-output {
    background: var(--color-val-hex-f1f5f9);
    color: var(--color-val-hex-475569);
}

/* Mobile Responsiveness for Dashboard */
@media (max-width: 900px) {
    .dashboard-container {
        grid-template-columns: 1fr;
        /* Stack vertically on mobile */
    }
}


/* Force LTR for numbers with symbols to ensure correct order (100 $) */
.ltr-text {
    direction: ltr;
    unicode-bidi: embed;
    /* Ensures the isolation of the LTR segment */
}

/* Adjust alignment for LTR blocks inside the dashboard cards */
.hero-value.ltr-text {
    text-align: center;
}

/* PROFESSIONAL SELL SECTION OVERRIDES */
.section-sell {
    background: linear-gradient(145deg, var(--color-val-rgba-30-41-59-0-7) 0%, var(--color-val-rgba-15-23-42-0-4) 100%);
    border: 1px solid var(--border-color);
    box-shadow: 0 4px 20px var(--color-val-rgba-0-0-0-0-2);
}

.sell-controls-wrapper {
    margin-top: 10px;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    align-items: end;
    margin-bottom: 20px;
}

.section-sell .form-group {
    margin-top: 10px;
    background: var(--color-val-rgba-0-0-0-0-2);
    padding: 15px;
    border-radius: 12px;
    border: 1px solid var(--border-color);
    transition: all 0.3s ease;
}

.section-sell .form-group:hover,
.section-sell .form-group:focus-within {
    border-color: var(--primary-color);
    box-shadow: 0 0 15px var(--color-val-rgba-59-158-255-0-1);
    transform: translateY(-2px);
}

.section-sell label {
    display: block;
    margin-bottom: 10px;
    font-size: 0.9em;
    color: var(--text-muted);
    font-weight: 600;
}

.section-sell input {
    width: 100%;
    height: 45px;
    background-color: var(--bg-color);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 0 15px;
    color: var(--text-color);
    font-size: 1.1em;
    font-weight: 500;
    transition: all 0.3s ease;
}

.section-sell input:focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px var(--color-val-rgba-59-158-255-0-2);
    outline: none;
}

/* Make Date input full width if needed, or fit in grid */
.section-sell .form-group.full-width-mobile {
    grid-column: span 2;
}

.sell-actions {
    grid-column: span 2;
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 10px;
    padding-top: 15px;
    border-top: 1px solid var(--border-color);
}

.btn-add-sell {
    height: 48px;
    padding: 0 30px;
    font-size: 1em;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    border-radius: 8px;
    background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
    box-shadow: 0 4px 15px var(--color-val-rgba-59-158-255-0-3);
}

.btn-add-sell:hover {
    box-shadow: 0 6px 20px var(--color-val-rgba-59-158-255-0-5);
    transform: translateY(-2px);
}

.sell-preview {
    font-size: 1.1em;
    padding: 10px 20px;
    background: var(--color-val-rgba-255-255-255-0-05);
    border-radius: 8px;
    border-right: 3px solid var(--primary-color);
}


/* PROFESSIONAL TARGETS SECTION OVERRIDES */
.card-strategy .strategy-row {
    background-color: var(--input-bg);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 8px 12px;
    margin-bottom: 10px;
    transition: all 0.3s ease;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.card-strategy .strategy-row:hover {
    border-color: var(--primary-color);
    box-shadow: 0 4px 10px var(--color-val-rgba-0-0-0-0-1);
    transform: translateX(-2px);
}

.card-strategy .strategy-row.sl-row-compact {
    border-color: var(--color-val-rgba-220-53-69-0-3);
}

.card-strategy .strategy-row.sl-row-compact:hover {
    border-color: var(--negative-color);
    box-shadow: 0 4px 10px var(--color-val-rgba-220-53-69-0-15);
}

.strategy-input {
    flex: 1;
    display: flex;
    align-items: center;
    gap: 10px;
}

.strategy-input label {
    font-size: 0.8em;
    font-weight: 700;
    color: var(--text-muted);
    background: var(--color-val-rgba-255-255-255-0-05);
    padding: 4px 8px;
    border-radius: 4px;
    min-width: 50px;
    text-align: center;
}

.strategy-input input {
    width: 80px;
    height: 32px;
    background-color: var(--bg-color);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    padding: 0 8px;
    color: var(--text-color);
    text-align: center;
    font-weight: 600;
    transition: all 0.2s;
}

.strategy-input input:focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 2px var(--color-val-rgba-59-158-255-0-2);
}

.strategy-output {
    font-family: 'Courier New', monospace;
    font-weight: 700;
    font-size: 1em;
    color: var(--text-light);
    background: transparent;
    padding: 0;
    text-align: left;
    min-width: 80px;
}

.sl-text .ltr-text {
    color: var(--negative-color);
}


/* LIGHT MODE COMPATIBILITY FOR PROFESSIONAL SECTIONS */
html[data-theme="light"] body .section-sell {
    background: linear-gradient(145deg, var(--color-val-hex-ffffff), var(--color-val-hex-f1f5f9));
    border-color: var(--color-val-hex-e2e8f0);
    box-shadow: 0 4px 15px var(--color-val-rgba-0-0-0-0-05);
}

html[data-theme="light"] body .section-sell .form-group {
    background: var(--color-val-hex-ffffff);
    border-color: var(--color-val-hex-e2e8f0);
    box-shadow: 0 2px 5px var(--color-val-rgba-0-0-0-0-05);
}

html[data-theme="light"] body .section-sell .form-group:hover,
html[data-theme="light"] body .section-sell .form-group:focus-within {
    border-color: var(--primary-color);
    box-shadow: 0 4px 12px var(--color-val-rgba-59-158-255-0-15);
}

html[data-theme="light"] body .section-sell label {
    color: var(--color-val-hex-475569);
}

html[data-theme="light"] body .section-sell input {
    background-color: var(--color-val-hex-f8fafc);
    border-color: var(--color-val-hex-cbd5e1);
    color: var(--color-val-hex-1e293b);
}

html[data-theme="light"] body .section-sell input:focus {
    background-color: var(--color-val-hex-ffffff);
}

html[data-theme="light"] body .card-strategy .strategy-row {
    background-color: var(--color-val-hex-f8fafc);
    border-color: var(--color-val-hex-e2e8f0);
}

html[data-theme="light"] body .card-strategy .strategy-row:hover {
    background-color: var(--color-val-hex-ffffff);
    box-shadow: 0 4px 10px var(--color-val-rgba-0-0-0-0-05);
}

html[data-theme="light"] body .strategy-input label {
    background: var(--color-val-hex-e2e8f0);
    color: var(--color-val-hex-475569);
}

html[data-theme="light"] body .strategy-input input {
    background-color: var(--color-val-hex-ffffff);
    border-color: var(--color-val-hex-cbd5e1);
    color: var(--color-val-hex-1e293b);
}

html[data-theme="light"] body .strategy-output {
    color: var(--color-val-hex-334155);
}

html[data-theme="light"] body .hero-item,
html[data-theme="light"] body .compact-form-group,
html[data-theme="light"] body .compact-summary-row {
    background-color: var(--color-val-hex-ffffff);
    border-color: var(--color-val-hex-e2e8f0);
    box-shadow: 0 2px 5px var(--color-val-rgba-0-0-0-0-05);
}

html[data-theme="light"] body .hero-label,
html[data-theme="light"] body .compact-form-group label {
    color: var(--color-val-hex-64748b);
}

html[data-theme="light"] body .hero-value,
html[data-theme="light"] body .stat-val,
html[data-theme="light"] body .compact-summary-row span {
    color: var(--color-val-hex-1e293b);
}

/* =========================================
   Principal Cash Balance Management Styles
   ========================================= */

.section-financial-overview {
    margin-bottom: 20px;
}

.financial-cards-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
    margin-bottom: 15px;
}

.financial-card {
    background: linear-gradient(145deg, var(--color-val-rgba-30-41-59-0-8), var(--color-val-rgba-15-23-42-0-5));
    border: 1px solid var(--color-val-rgba-59-158-255-0-25);
    border-radius: 10px;
    padding: 16px 18px;
    cursor: pointer;
    transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex;
    flex-direction: column;
    min-height: 75px;
    position: relative;
    overflow: hidden;
    backdrop-filter: blur(10px);
}

.financial-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, var(--color-val-rgba-59-158-255-0-08) 0%, transparent 60%);
    opacity: 0;
    transition: opacity 0.35s ease;
    pointer-events: none;
}

.financial-card:hover::before {
    opacity: 1;
}

.financial-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px var(--color-val-rgba-59-158-255-0-3);
    border-color: var(--color-val-rgba-59-158-255-0-5);
}

.principal-card {
    border-left: 3px solid var(--color-val-hex-3b9eff);
}

.principal-card:hover {
    box-shadow: 0 6px 20px var(--color-val-rgba-59-158-255-0-35);
}

.profit-card {
    border-left: 3px solid var(--color-val-hex-00d4aa);
    cursor: default;
}

.profit-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px var(--color-val-rgba-0-212-170-0-3);
    border-color: var(--color-val-rgba-0-212-170-0-5);
}

.loss-card {
    border-left: 3px solid var(--color-val-hex-ff4757);
    cursor: default;
}

.loss-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px var(--color-val-rgba-255-71-87-0-3);
    border-color: var(--color-val-rgba-255-71-87-0-5);
}

.card-content-left {
    width: 100%;
    text-align: right;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.card-label {
    font-size: 0.78em;
    color: var(--text-muted);
    margin-bottom: 0;
    font-weight: 500;
    opacity: 0.85;
    letter-spacing: 0.3px;
    transition: opacity 0.3s ease;
    line-height: 1.3;
}

.financial-card:hover .card-label {
    opacity: 1;
}

.card-value {
    font-size: 1.65em;
    font-weight: 700;
    color: var(--text-light);
    font-family: 'Courier New', monospace;
    direction: ltr;
    text-align: right;
    line-height: 1;
    text-shadow: 0 2px 4px var(--color-val-rgba-0-0-0-0-1);
    transition: transform 0.3s ease;
    margin: 0;
}

.financial-card:hover .card-value {
    transform: scale(1.02);
}

.profit-value {
    color: var(--color-val-hex-00d4aa);
    text-shadow: 0 2px 8px var(--color-val-rgba-0-212-170-0-3);
}

.loss-value {
    color: var(--color-val-hex-ff4757);
    text-shadow: 0 2px 8px var(--color-val-rgba-255-71-87-0-3);
}

.card-icon-circle {
    width: 42px;
    height: 42px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2em;
    flex-shrink: 0;
    transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
}

.card-icon-circle::before {
    content: '';
    position: absolute;
    inset: -2px;
    border-radius: 50%;
    background: inherit;
    filter: blur(8px);
    opacity: 0;
    transition: opacity 0.35s ease;
}

.financial-card:hover .card-icon-circle::before {
    opacity: 0.6;
}

.principal-icon {
    background: linear-gradient(135deg, var(--color-val-hex-3b9eff), var(--color-val-hex-2d7dd2));
    color: white;
    box-shadow: 0 3px 12px var(--color-val-rgba-59-158-255-0-4);
}

.profit-icon {
    background: linear-gradient(135deg, var(--color-val-hex-00d4aa), var(--color-val-hex-00b894));
    color: white;
    box-shadow: 0 3px 12px var(--color-val-rgba-0-212-170-0-4);
}

.loss-icon {
    background: linear-gradient(135deg, var(--color-val-hex-ff4757), var(--color-val-hex-ff6b81));
    color: white;
    box-shadow: 0 3px 12px var(--color-val-rgba-255-71-87-0-4);
}

.financial-card:hover .card-icon-circle {
    transform: scale(1.08) rotate(5deg);
}

.btn-transfer-inline {
    margin-top: 0;
    padding: 8px 14px;
    background: linear-gradient(135deg, var(--color-val-rgba-0-212-170-0-15) 0%, var(--color-val-rgba-0-184-148-0-15) 100%);
    color: var(--color-val-hex-00d4aa);
    border: 1.5px solid var(--color-val-rgba-0-212-170-0-4);
    border-radius: 6px;
    font-size: 0.72em;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 0 0 var(--color-val-rgba-0-212-170-0);
    width: 100%;
    letter-spacing: 0.3px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    position: relative;
    overflow: hidden;
    backdrop-filter: blur(5px);
}

.btn-transfer-inline:hover:not(:disabled) {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px var(--color-val-rgba-0-212-170-0-45);
    background: linear-gradient(135deg, var(--color-val-hex-00b894), var(--color-val-hex-00d4aa));
}

.btn-transfer-inline:active:not(:disabled) {
    transform: translateY(0);
}

.btn-transfer-inline:disabled {
    opacity: 0.4;
    cursor: not-allowed;
    transform: none;
    filter: grayscale(0.3);
}

/* Principal Modal */
.principal-modal-content {
    max-width: 500px;
}

.current-balance-info {
    display: flex;
    justify-content: space-between;
    padding: 12px;
    background: var(--color-val-rgba-59-158-255-0-1);
    border-radius: 8px;
    margin-top: 16px;
    font-weight: 600;
    border: 1px solid var(--color-val-rgba-59-158-255-0-2);
}

.current-balance-info span:last-child {
    color: var(--primary-color);
    font-family: 'Courier New', monospace;
}

/* Modal Overlay Base */
.modal-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--color-val-rgba-0-0-0-0-7);
    backdrop-filter: blur(5px);
    z-index: 10000;
    justify-content: center;
    align-items: center;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.modal-overlay.active {
    display: flex;
    opacity: 1;
}

.modal-content {
    background: var(--section-bg);
    border-radius: 16px;
    padding: 0;
    max-width: 90%;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: 0 20px 60px var(--color-val-rgba-0-0-0-0-5);
    border: 1px solid var(--color-val-rgba-59-158-255-0-3);
    transform: scale(0.9);
    transition: transform 0.3s ease;
}

.modal-overlay.active .modal-content {
    transform: scale(1);
}

.modal-header {
    padding: 20px 24px;
    border-bottom: 1px solid var(--border-color);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.modal-header h3 {
    margin: 0;
    color: var(--text-light);
    font-size: 1.3em;
}

.close-modal {
    background: none;
    border: none;
    font-size: 1.8em;
    color: var(--text-muted);
    cursor: pointer;
    transition: color 0.2s ease;
    padding: 0;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.close-modal:hover {
    color: var(--negative-color);
}

.modal-body {
    padding: 24px;
}

.modal-footer {
    padding: 16px 24px;
    border-top: 1px solid var(--border-color);
    display: flex;
    gap: 12px;
    justify-content: flex-end;
}

.btn-save {
    padding: 10px 24px;
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    color: white;
    border: none;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
}

.btn-save:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px var(--color-val-rgba-59-158-255-0-4);
}

.btn-cancel {
    padding: 10px 24px;
    background: var(--input-bg);
    color: var(--text-color);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
}

.btn-cancel:hover {
    background: var(--hover-bg);
    border-color: var(--primary-color);
}

.btn-danger {
    padding: 10px 24px;
    background: linear-gradient(135deg, var(--color-val-hex-ff4757), var(--color-val-hex-ff6b81));
    color: white;
    border: none;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
}

.btn-danger:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px var(--color-val-rgba-255-71-87-0-4);
}

/* ===============================
   Crypto Support Modal Styles
   =============================== */
#donateModal .donate-modal {
    direction: rtl;
    background: linear-gradient(150deg, var(--color-val-rgba-15-23-42-0-98), var(--color-val-rgba-10-16-28-0-92));
    border-radius: 24px;
    border: 1px solid var(--color-val-rgba-59-158-255-0-25);
    box-shadow: 0 24px 60px var(--color-val-rgba-2-6-23-0-6), inset 0 1px 0 var(--color-val-rgba-255-255-255-0-04);
    overflow: hidden;
    max-width: min(95vw, 900px);
}

#donateModal .donate-modal {
    max-height: min(92vh, 860px);
    display: flex;
    flex-direction: column;
}

#donateModal .donate-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 20px 24px;
    border-bottom: 1px solid var(--color-val-rgba-148-163-184-0-12);
    gap: 16px;
}

#donateModal .donate-title-wrap {
    display: flex;
    align-items: center;
    gap: 12px;
}

#donateModal .donate-icon {
    width: 44px;
    height: 44px;
    border-radius: 14px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, var(--color-val-rgba-251-191-36-0-25), var(--color-val-rgba-249-115-22-0-25));
    color: var(--color-val-hex-fbbf24);
    box-shadow: 0 8px 18px var(--color-val-rgba-249-115-22-0-2);
    font-size: 1.1em;
}

#donateModal .donate-header h3 {
    margin: 0;
    font-size: 1.35em;
    color: var(--color-val-hex-fbbf24);
}

#donateModal .donate-intro {
    margin: 0;
    color: var(--text-muted);
    font-size: 0.9em;
    line-height: 1.7;
    background: var(--color-val-rgba-59-158-255-0-08);
    border-radius: 12px;
    padding: 10px 12px;
    border: 1px solid var(--color-val-rgba-148-163-184-0-12);
}

#donateModal .donate-close {
    background: var(--color-val-rgba-15-23-42-0-6);
    border: 1px solid var(--color-val-rgba-148-163-184-0-15);
    color: var(--text-muted);
    width: 36px;
    height: 36px;
    border-radius: 12px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
}

#donateModal .donate-close:hover {
    color: var(--color-val-hex-f87171);
    border-color: var(--color-val-rgba-248-113-113-0-5);
}

#donateModal .donate-body {
    padding: 22px 24px 24px;
    display: flex;
    flex-direction: column;
    gap: 16px;
    overflow-y: auto;
    overflow-x: hidden;
}

#donateModal .donate-tabs {
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap: 8px;
}

#donateModal .donate-tab {
    border-radius: 12px;
    border: 1px solid var(--color-val-rgba-148-163-184-0-2);
    background: var(--color-val-rgba-15-23-42-0-6);
    color: var(--text-muted);
    padding: 10px 12px;
    font-weight: 600;
    font-size: 0.9em;
    transition: all 0.2s ease;
}

#donateModal .donate-tab.active {
    background: linear-gradient(135deg, var(--color-val-hex-fbbf24), var(--color-val-hex-f59e0b));
    color: var(--color-val-hex-1f2937);
    border-color: var(--color-val-rgba-251-191-36-0-8);
    box-shadow: 0 8px 18px var(--color-val-rgba-249-115-22-0-25);
}

#donateModal .donate-tab:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

#donateModal .donate-layout {
    display: grid;
    grid-template-columns: 1fr;
    gap: 16px;
    align-items: start;
    min-width: 0;
}

#donateModal .donate-panel {
    display: flex;
    flex-direction: column;
    gap: 12px;
    min-width: 0;
}

#donateModal .donate-panel--right {
    gap: 12px;
}

#donateModal .donate-platform--top {
    background: var(--color-val-rgba-15-23-42-0-6);
    border: 1px solid var(--color-val-rgba-148-163-184-0-16);
    border-radius: 14px;
    padding: 10px;
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 10px;
}

#donateModal .donate-coins {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 8px;
}

#donateModal .donate-coin {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 10px 12px;
    border-radius: 12px;
    border: 1px solid var(--color-val-rgba-148-163-184-0-2);
    background: var(--color-val-rgba-15-23-42-0-6);
    color: var(--text-light);
    font-weight: 600;
    font-size: 0.9em;
    line-height: 1;
    transition: all 0.2s ease;
}

#donateModal .donate-coin-logo {
    display: block;
    width: 22px;
    height: 22px;
    border-radius: 50%;
    object-fit: contain;
    background: var(--color-val-rgba-255-255-255-0-9);
    padding: 2px;
}

#donateModal .donate-coin:hover {
    border-color: var(--color-val-rgba-59-158-255-0-6);
    transform: translateY(-1px);
}

#donateModal .donate-coin.active {
    background: linear-gradient(135deg, var(--color-val-rgba-59-158-255-0-3), var(--color-val-rgba-59-158-255-0-08));
    border-color: var(--color-val-rgba-59-158-255-0-8);
    color: var(--color-val-hex-ffffff);
    box-shadow: 0 10px 20px var(--color-val-rgba-59-158-255-0-2);
}

#donateModal .donate-coin-dot {
    width: 8px;
    height: 8px;
    border-radius: 999px;
    background: var(--color-val-hex-60a5fa);
    box-shadow: 0 0 8px var(--color-val-rgba-96-165-250-0-8);
}

#donateModal .donate-card {
    background: linear-gradient(145deg, var(--color-val-rgba-6-12-26-0-78), var(--color-val-rgba-10-18-34-0-6));
    border: 1px solid var(--color-val-rgba-148-163-184-0-18);
    border-radius: 18px;
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 12px;
    box-shadow: inset 0 1px 0 var(--color-val-rgba-255-255-255-0-04);
    min-width: 0;
}

#donateModal .donate-card-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 12px;
    align-items: start;
}

#donateModal .donate-card-main {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

#donateModal .donate-network-address {
    display: grid;
    grid-template-columns: minmax(150px, 190px) minmax(220px, 1fr);
    gap: 12px;
    align-items: end;
}

#donateModal .donate-network-row {
    margin: 0;
}

#donateModal .donate-address {
    margin: 0;
    flex: 1;
}

@media (max-width: 900px) {
    #donateModal .donate-network-address {
        grid-template-columns: 1fr;
    }
}

#donateModal .donate-network-row {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

#donateModal .donate-network-row label {
    font-size: 0.78em;
    color: var(--text-muted);
    font-weight: 600;
}

#donateModal .donate-network-row select {
    height: 38px;
    border-radius: 12px;
    border: 1px solid var(--color-val-rgba-148-163-184-0-2);
    background: var(--color-val-rgba-15-23-42-0-6);
    color: var(--text-light);
    padding: 0 12px 0 36px;
    font-size: 0.82em;
    appearance: none;
    -webkit-appearance: none;
    background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 20 20' fill='%2394a3b8'><path d='M5.5 7.5l4.5 5 4.5-5' stroke='%2394a3b8' stroke-width='1.8' stroke-linecap='round' stroke-linejoin='round' fill='none'/></svg>");
    background-repeat: no-repeat;
    background-position: left 12px center;
    background-size: 12px;
}

#donateModal .donate-network-row select:focus {
    outline: none;
    border-color: var(--color-val-rgba-59-158-255-0-7);
    box-shadow: 0 0 0 3px var(--color-val-rgba-59-158-255-0-2);
}

#donateModal .donate-card-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    padding-bottom: 8px;
    border-bottom: 1px dashed var(--color-val-rgba-148-163-184-0-2);
}

#donateModal .donate-coin-label {
    font-weight: 700;
    color: var(--text-light);
    font-size: 0.95em;
    padding: 4px 10px;
    border-radius: 999px;
    background: var(--color-val-rgba-59-158-255-0-18);
    border: 1px solid var(--color-val-rgba-59-158-255-0-35);
}

#donateModal .donate-network {
    padding: 4px 10px;
    border-radius: 999px;
    background: var(--color-val-rgba-15-23-42-0-6);
    color: var(--color-val-hex-cbd5f5);
    font-size: 0.72em;
    font-weight: 600;
}

#donateModal .donate-network-wrap {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    flex-wrap: wrap;
}

#donateModal .donate-recommended {
    display: inline-flex;
    align-items: center;
    padding: 2px 8px;
    border-radius: 999px;
    background: var(--color-val-rgba-16-185-129-0-2);
    color: var(--color-val-hex-86efac);
    border: 1px solid var(--color-val-rgba-16-185-129-0-4);
    font-size: 0.7em;
    font-weight: 700;
}

#donateModal .donate-recommended.hidden {
    display: none;
}

#donateModal .donate-address {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 3px 7px;
    border-radius: 12px;
    border: 1px solid var(--color-val-rgba-148-163-184-0-18);
    background: var(--color-val-rgba-15-23-42-0-7);
    min-width: 0;
}

#donateModal .donate-address input {
    flex: 1;
    min-width: 0;
    background: transparent;
    border: none;
    color: var(--color-val-hex-e2e8f0);
    font-family: 'Roboto Mono', 'Consolas', 'Monaco', monospace;
    font-size: 0.8em;
    outline: none;
    direction: ltr;
    text-align: left;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

#donateModal .donate-copy-btn {
    background: linear-gradient(135deg, var(--color-val-rgba-59-158-255-0-9), var(--color-val-rgba-37-99-235-0-9));
    color: var(--color-val-hex-ffffff);
    border: none;
    border-radius: 10px;
    padding: 6px 10px;
    font-size: 0.72em;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.2s ease;
}

#donateModal .donate-address .donate-copy-btn.icon-only {
    width: 32px;
    height: 32px;
    min-width: 32px;
    min-height: 32px;
    max-width: 32px;
    max-height: 32px;
    aspect-ratio: 1 / 1;
    padding: 0;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

#donateModal .donate-copy-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 8px 16px var(--color-val-rgba-59-158-255-0-3);
}

#donateModal .donate-copy-btn.copied {
    background: linear-gradient(135deg, var(--color-val-rgba-16-185-129-0-9), var(--color-val-rgba-5-150-105-0-9));
}

#donateModal .donate-memo {
    font-size: 0.8em;
    color: var(--text-muted);
    display: flex;
    align-items: center;
    gap: 8px;
    flex-wrap: wrap;
}

#donateModal .donate-memo.is-required {
    color: var(--color-val-hex-fecaca);
}

#donateModal .donate-memo .memo-badge {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 3px 8px;
    border-radius: 999px;
    background: var(--color-val-rgba-239-68-68-0-2);
    color: var(--color-val-rgba-239-68-68-0-45);
    border: 1px solid var(--color-val-rgba-239-68-68-0-45);
    font-size: 0.72em;
    font-weight: 700;
}

#donateModal .donate-platform {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

#donateModal .donate-platform-item {
    display: flex;
    align-items: center;
    gap: 8px;
    flex-wrap: wrap;
    min-width: 0;
}

#donateModal .donate-platform--top {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 10px;
}

#donateModal .donate-platform-label {
    font-size: 0.78em;
    color: var(--text-muted);
    font-weight: 600;
}

#donateModal .donate-platform-badge {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 3px 8px;
    border-radius: 999px;
    background: var(--color-val-rgba-59-158-255-0-18);
    color: var(--color-val-hex-93c5fd);
    border: 1px solid var(--color-val-rgba-59-158-255-0-35);
    font-size: 0.72em;
    letter-spacing: 0.2px;
    margin-bottom: 0;
}

#donateModal .donate-platform-icon {
    width: 32px;
    height: 32px;
    border-radius: 10px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

#donateModal .donate-platform-icon img {
    width: 18px;
    height: 18px;
    display: block;
}

#donateModal .donate-platform-icon--binance {
    background: var(--color-val-hex-f0b90b);
    box-shadow: 0 6px 14px var(--color-val-rgba-240-185-11-0-25);
}

#donateModal .donate-platform-icon--bybit {
    background: var(--color-val-hex-ffffff);
    box-shadow: 0 6px 14px var(--color-val-rgba-247-166-0-0-25);
}

#donateModal .donate-platform-label--spaced {
    margin-top: 8px;
}

#donateModal .donate-address.donate-address--compact {
    padding: 6px 8px;
    margin-bottom: 0;
    gap: 6px;
    align-items: center;
    flex: 1 1 160px;
}

#donateModal .donate-address--inline {
    flex-wrap: nowrap;
    gap: 8px;
    min-height: 38px;
}

#donateModal .donate-address--inline .donate-platform-badge {
    margin-bottom: 0;
    font-size: 0.7em;
    padding: 3px 8px;
    white-space: nowrap;
    flex-shrink: 0;
}

#donateModal .donate-address--inline input {
    flex: 1;
    min-width: 0;
}

#donateModal .donate-address--inline .donate-copy-btn.icon-only {
    width: 32px;
    height: 32px;
    padding: 0;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

#donateModal .donate-address.donate-address--compact input {
    font-size: 0.8em;
}

#donateModal .donate-address.donate-address--compact .donate-copy-btn {
    padding: 6px 10px;
    font-size: 0.72em;
    border-radius: 8px;
    min-height: 30px;
}

#donateModal .donate-note {
    font-size: 0.85em;
    color: var(--text-muted);
    background: var(--color-val-rgba-59-158-255-0-08);
    border-radius: 12px;
    padding: 10px 12px;
    border-right: 3px solid var(--color-val-rgba-59-158-255-0-6);
}

#donateModal .donate-warning-full {
    width: 100%;
}

#donateModal .donate-list {
    display: block;
    column-count: 2;
    column-gap: 12px;
    max-height: none;
    overflow-y: visible;
    padding: 6px;
    scrollbar-width: thin;
    direction: ltr;
}

#donateModal .donate-group {
    background: var(--color-val-rgba-15-23-42-0-55);
    border: 1px solid var(--color-val-rgba-148-163-184-0-16);
    border-radius: 18px;
    padding: 6px;
    display: inline-block;
    width: 100%;
    margin: 0 0 8px;
    break-inside: avoid;
    -webkit-column-break-inside: avoid;
    page-break-inside: avoid;
    direction: rtl;
}

#donateModal .donate-group-header {
    display: inline-flex;
    align-items: center;
    gap: 8px;
}

#donateModal .donate-group-title {
    font-weight: 700;
    color: var(--text-light);
    font-size: 0.95em;
    letter-spacing: 0.3px;
}

#donateModal .donate-group-rows {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

#donateModal .donate-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
    padding: 6px 10px;
    border-radius: 18px;
    border: 1px solid var(--color-val-rgba-148-163-184-0-18);
    background: var(--color-val-rgba-15-23-42-0-68);
    cursor: pointer;
    transition: all 0.2s ease;
    direction: rtl;
}

#donateModal .donate-row:hover {
    border-color: var(--color-val-rgba-59-158-255-0-5);
    box-shadow: 0 10px 24px var(--color-val-rgba-15-23-42-0-35);
    transform: translateY(-1px);
}

#donateModal .donate-row.is-active {
    border-color: var(--color-val-rgba-59-158-255-0-85);
    background: linear-gradient(135deg, var(--color-val-rgba-59-158-255-0-22), var(--color-val-rgba-59-158-255-0-08));
    box-shadow: 0 12px 26px var(--color-val-rgba-59-158-255-0-2);
}

#donateModal .donate-row-content {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    min-width: 0;
    flex: 1;
    justify-content: space-between;
}

#donateModal .donate-row-title {
    font-weight: 700;
    color: var(--text-light);
    font-size: 0.75em;
    letter-spacing: 0.3px;
}

#donateModal .donate-row-badge,
#donateModal .donate-details-badge {
    border-radius: 999px;
    background: var(--color-val-rgba-251-191-36-0-2);
    color: var(--color-val-hex-fde68a);
    border-color: var(--color-val-rgba-251-191-36-0-45);
    height: 22px;
    min-width: 44px;
    padding: 0 8px;
    font-size: 0.68em;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
}

#donateModal .donate-row-copy {
    width: 32px;
    height: 32px;
    padding: 0;
    border-radius: 10px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    min-width: 32px;
    min-height: 32px;
    max-width: 32px;
    max-height: 32px;
    aspect-ratio: 1 / 1;
}

#donateModal .donate-row-copy:hover {
    background: var(--color-val-rgba-59-158-255-0-32);
}

#donateModal .donate-row-icon {
    width: 22px;
    height: 22px;
    border-radius: 50%;
    object-fit: contain;
    background: var(--color-val-rgba-255-255-255-0-92);
    padding: 1px;
}

#donateModal .donate-details {
    background: linear-gradient(145deg, var(--color-val-rgba-6-12-26-0-78), var(--color-val-rgba-10-18-34-0-6));
    border: 1px solid var(--color-val-rgba-148-163-184-0-18);
    border-radius: 18px;
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 12px;
    min-width: 0;
}

#donateModal .donate-details-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 10px;
}

#donateModal .donate-details-title {
    font-weight: 800;
    font-size: 1em;
    color: var(--text-light);
    padding: 4px 10px;
    border-radius: 999px;
    background: var(--color-val-rgba-59-158-255-0-18);
    border: 1px solid var(--color-val-rgba-59-158-255-0-35);
}

#donateModal .donate-details-badge {
    padding: 4px 10px;
    border-radius: 999px;
    background: var(--color-val-rgba-15-23-42-0-6);
    color: var(--color-val-hex-cbd5f5);
    font-size: 0.72em;
    font-weight: 700;
    border: 1px solid var(--color-val-rgba-148-163-184-0-25);
}

#donateModal .donate-address-box {
    display: flex;
    align-items: center;
    gap: 10px;
    background: var(--color-val-rgba-15-23-42-0-7);
    border-radius: 16px;
    border: 1px solid var(--color-val-rgba-148-163-184-0-18);
    padding: 10px 12px;
}

#donateModal .donate-address-value {
    font-family: 'Roboto Mono', 'Consolas', 'Monaco', monospace;
    font-size: 0.82em;
    color: var(--color-val-hex-e2e8f0);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    direction: ltr;
    text-align: left;
    flex: 1;
    min-width: 0;
}

#donateModal .donate-copy-btn--big {
    align-self: center;
    width: 32px;
    height: 32px;
    padding: 0;
    font-size: 0.75em;
    border-radius: 10px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 32px;
    min-height: 32px;
    max-width: 32px;
    max-height: 32px;
    aspect-ratio: 1 / 1;
}

@media (max-width: 600px) {
    #donateModal .donate-platform--top {
        grid-template-columns: 1fr;
    }

    #donateModal .donate-list {
        column-count: 2;
        column-gap: 8px;
        max-height: none;
    }

    #donateModal .donate-row-badge,
    #donateModal .donate-details-badge {
        height: 20px;
        min-width: 40px;
        padding: 0 6px;
        font-size: 0.6em;
    }
}

html[data-theme="light"] body #donateModal .donate-modal {
    background: var(--color-val-hex-ffffff);
    border-color: var(--color-val-rgba-59-130-246-0-2);
    box-shadow: 0 20px 50px var(--color-val-rgba-15-23-42-0-12);
}

html[data-theme="light"] body #donateModal .donate-header h3 {
    color: var(--color-val-hex-0f172a);
}

html[data-theme="light"] body #donateModal .donate-tab {
    background: var(--color-val-hex-f8fafc);
    color: var(--color-val-hex-475569);
    border-color: var(--color-val-rgba-59-130-246-0-15);
}

html[data-theme="light"] body #donateModal .donate-coin {
    background: var(--color-val-hex-f8fafc);
    color: var(--color-val-hex-0f172a);
}

html[data-theme="light"] body #donateModal .donate-card {
    background: var(--color-val-hex-f8fafc);
}

html[data-theme="light"] body #donateModal .donate-address {
    background: var(--color-val-hex-ffffff);
}

html[data-theme="light"] body #donateModal .donate-platform--top {
    background: var(--color-val-hex-f8fafc);
}

html[data-theme="light"] body #donateModal .donate-network-row select {
    background: var(--color-val-hex-ffffff);
    color: var(--color-val-hex-0f172a);
    background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 20 20' fill='%2364748b'><path d='M5.5 7.5l4.5 5 4.5-5' stroke='%2364748b' stroke-width='1.8' stroke-linecap='round' stroke-linejoin='round' fill='none'/></svg>");
}

@media (max-width: 900px) {
    #donateModal .donate-layout {
        grid-template-columns: 1fr;
    }

    #donateModal .donate-coins {
        grid-template-columns: repeat(3, minmax(0, 1fr));
    }

    #donateModal .donate-platform--top {
        order: -1;
    }

    #donateModal .donate-platform--top {
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 10px;
    }

    #donateModal .donate-platform--top .donate-platform-label {
        margin-top: 0;
    }

    #donateModal .donate-platform--top .donate-platform-label--spaced {
        margin-top: 0;
    }

    #donateModal .donate-card-grid {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 600px) {
    #donateModal .donate-tabs {
        grid-template-columns: 1fr;
    }

    #donateModal .donate-coins {
        grid-template-columns: repeat(2, minmax(0, 1fr));
    }

    #donateModal .donate-address:not(.donate-address--inline) {
        flex-direction: row;
        align-items: center;
    }

    #donateModal .donate-address--inline {
        flex-direction: row;
        align-items: center;
    }

    #donateModal .donate-platform--top {
        grid-template-columns: 1fr;
    }

    #donateModal .donate-modal {
        max-height: 95vh;
    }

    #donateModal .donate-body {
        padding: 16px;
        gap: 12px;
    }

    #donateModal .donate-intro {
        font-size: 0.82em;
        line-height: 1.6;
    }

    #donateModal .donate-coin {
        font-size: 0.82em;
        padding: 8px 10px;
    }

    #donateModal .donate-coin-logo {
        width: 18px;
        height: 18px;
    }

    #donateModal .donate-card {
        padding: 12px;
        gap: 10px;
    }

    #donateModal .donate-qr {
        width: 120px;
        margin-inline-start: auto;
        margin-inline-end: auto;
    }
}

@media (max-width: 480px) {
    #donateModal .donate-platform--top {
        grid-template-columns: 1fr;
    }
}

/* Light Mode Adjustments */
html[data-theme="light"] body .financial-card {
    background: linear-gradient(145deg, var(--color-val-hex-ffffff), var(--color-val-hex-f8fafc));
    border: 1px solid var(--color-val-hex-e2e8f0);
    box-shadow: 0 2px 8px var(--color-val-rgba-0-0-0-0-04);
}

html[data-theme="light"] body .financial-card::before {
    background: linear-gradient(135deg, var(--color-val-rgba-59-158-255-0-05) 0%, transparent 60%);
}

html[data-theme="light"] body .financial-card:hover {
    box-shadow: 0 8px 28px var(--color-val-rgba-59-158-255-0-15);
    border-color: var(--color-val-hex-cbd5e1);
}

html[data-theme="light"] body .principal-card:hover {
    box-shadow: 0 8px 28px var(--color-val-rgba-59-158-255-0-18);
}

html[data-theme="light"] body .profit-card:hover {
    box-shadow: 0 8px 28px var(--color-val-rgba-0-212-170-0-15);
}

html[data-theme="light"] body .loss-card:hover {
    box-shadow: 0 8px 28px var(--color-val-rgba-255-71-87-0-15);
}

html[data-theme="light"] body .card-value {
    color: var(--color-val-hex-1e293b);
    text-shadow: 0 1px 2px var(--color-val-rgba-0-0-0-0-05);
}

html[data-theme="light"] body .profit-value {
    color: var(--color-val-hex-00b894);
    text-shadow: 0 2px 6px var(--color-val-rgba-0-212-170-0-15);
}

html[data-theme="light"] body .loss-value {
    color: var(--color-val-hex-d63031);
    text-shadow: 0 2px 6px var(--color-val-rgba-255-71-87-0-15);
}

html[data-theme="light"] body .principal-icon {
    background: linear-gradient(135deg, var(--color-val-hex-3b9eff), var(--color-val-hex-2d7dd2));
    box-shadow: 0 4px 16px var(--color-val-rgba-59-158-255-0-3);
}

html[data-theme="light"] body .profit-icon {
    background: linear-gradient(135deg, var(--color-val-hex-00d4aa), var(--color-val-hex-00b894));
    box-shadow: 0 4px 16px var(--color-val-rgba-0-212-170-0-3);
}

html[data-theme="light"] body .loss-icon {
    background: linear-gradient(135deg, var(--color-val-hex-ff4757), var(--color-val-hex-ff6b81));
    box-shadow: 0 4px 16px var(--color-val-rgba-255-71-87-0-3);
}

html[data-theme="light"] body .current-balance-info {
    background: var(--color-val-hex-f0f9ff);
    color: var(--color-val-hex-0c4a6e);
    border-color: var(--color-val-hex-bae6fd);
}

html[data-theme="light"] body .current-balance-info span:last-child {
    color: var(--color-val-hex-0369a1);
}

html[data-theme="light"] body .modal-content {
    background: var(--color-val-hex-ffffff);
    border-color: var(--color-val-hex-e2e8f0);
}

html[data-theme="light"] body .modal-header {
    border-bottom-color: var(--color-val-hex-e2e8f0);
}

html[data-theme="light"] body .modal-header h3 {
    color: var(--color-val-hex-1e293b);
}

html[data-theme="light"] body .modal-footer {
    border-top-color: var(--color-val-hex-e2e8f0);
}

html[data-theme="light"] body .btn-cancel {
    background: var(--color-val-hex-f8fafc);
    color: var(--color-val-hex-475569);
    border: 1px solid var(--color-val-hex-cbd5e1);
}

html[data-theme="light"] body .btn-cancel:hover {
    background: var(--color-val-hex-f1f5f9);
    border-color: var(--color-val-hex-3b9eff);
}

/* Mobile Responsive */
@media (max-width: 768px) {
    .financial-cards-grid {
        grid-template-columns: 1fr;
        gap: 10px;
    }

    .financial-card {
        padding: 14px 16px;
        min-height: 70px;
    }

    .card-label {
        font-size: 0.75em;
    }

    .card-value {
        font-size: 1.5em;
    }

    .btn-transfer-inline {
        padding: 7px 12px;
        font-size: 0.7em;
    }

    .modal-content {
        max-width: 95%;
    }

    .modal-footer {
        flex-direction: column-reverse;
    }

    .modal-footer button {
        width: 100%;
    }
}

@media (max-width: 480px) {
    .financial-card {
        padding: 12px 14px;
        min-height: 65px;
    }

    .card-label {
        font-size: 0.72em;
    }

    .card-value {
        font-size: 1.35em;
    }

    .btn-transfer-inline {
        padding: 6px 10px;
        font-size: 0.68em;
    }
}


/* Light Mode Adjustments */
html[data-theme="light"] body .financial-card {
    background: linear-gradient(145deg, var(--color-val-hex-ffffff), var(--color-val-hex-f8fafc));
    border: 1px solid var(--color-val-hex-e2e8f0);
    box-shadow: 0 2px 8px var(--color-val-rgba-0-0-0-0-04);
}

html[data-theme="light"] body .financial-card::before {
    background: linear-gradient(135deg, var(--color-val-rgba-59-158-255-0-05) 0%, transparent 60%);
}

html[data-theme="light"] body .financial-card:hover {
    box-shadow: 0 8px 28px var(--color-val-rgba-59-158-255-0-15);
    border-color: var(--color-val-hex-cbd5e1);
}

html[data-theme="light"] body .principal-card:hover {
    box-shadow: 0 8px 28px var(--color-val-rgba-59-158-255-0-18);
}

html[data-theme="light"] body .profit-card:hover {
    box-shadow: 0 8px 28px var(--color-val-rgba-0-212-170-0-15);
}

html[data-theme="light"] body .loss-card:hover {
    box-shadow: 0 8px 28px var(--color-val-rgba-255-71-87-0-15);
}

html[data-theme="light"] body .card-value {
    color: var(--color-val-hex-1e293b);
    text-shadow: 0 1px 2px var(--color-val-rgba-0-0-0-0-05);
}

html[data-theme="light"] body .profit-value {
    color: var(--color-val-hex-00b894);
    text-shadow: 0 2px 6px var(--color-val-rgba-0-212-170-0-15);
}

html[data-theme="light"] body .loss-value {
    color: var(--color-val-hex-d63031);
    text-shadow: 0 2px 6px var(--color-val-rgba-255-71-87-0-15);
}

html[data-theme="light"] body .principal-icon {
    background: linear-gradient(135deg, var(--color-val-hex-3b9eff), var(--color-val-hex-2d7dd2));
    box-shadow: 0 4px 16px var(--color-val-rgba-59-158-255-0-3);
}

html[data-theme="light"] body .profit-icon {
    background: linear-gradient(135deg, var(--color-val-hex-00d4aa), var(--color-val-hex-00b894));
    box-shadow: 0 4px 16px var(--color-val-rgba-0-212-170-0-3);
}

html[data-theme="light"] body .loss-icon {
    background: linear-gradient(135deg, var(--color-val-hex-ff4757), var(--color-val-hex-ff6b81));
    box-shadow: 0 4px 16px var(--color-val-rgba-255-71-87-0-3);
}

html[data-theme="light"] body .current-balance-info {
    background: var(--color-val-hex-f0f9ff);
    color: var(--color-val-hex-0c4a6e);
    border-color: var(--color-val-hex-bae6fd);
}

html[data-theme="light"] body .current-balance-info span:last-child {
    color: var(--color-val-hex-0369a1);
}

html[data-theme="light"] body .modal-content {
    background: var(--color-val-hex-ffffff);
    border-color: var(--color-val-hex-e2e8f0);
}

html[data-theme="light"] body .modal-header {
    border-bottom-color: var(--color-val-hex-e2e8f0);
}

html[data-theme="light"] body .modal-header h3 {
    color: var(--color-val-hex-1e293b);
}

html[data-theme="light"] body .modal-footer {
    border-top-color: var(--color-val-hex-e2e8f0);
}

html[data-theme="light"] body .btn-cancel {
    background: var(--color-val-hex-f8fafc);
    color: var(--color-val-hex-475569);
    border: 1px solid var(--color-val-hex-cbd5e1);
}

html[data-theme="light"] body .btn-cancel:hover {
    background: var(--color-val-hex-f1f5f9);
    border-color: var(--color-val-hex-3b9eff);
}

/* Mobile Responsive */
@media (max-width: 768px) {
    .financial-cards-grid {
        grid-template-columns: 1fr;
        gap: 10px;
    }

    .financial-card {
        padding: 14px 16px;
        min-height: 70px;
    }

    .card-label {
        font-size: 0.75em;
    }

    .card-value {
        font-size: 1.5em;
    }

    .btn-transfer-inline {
        padding: 7px 12px;
        font-size: 0.7em;
    }

    .modal-content {
        max-width: 95%;
    }

    .modal-footer {
        flex-direction: column-reverse;
    }

    .modal-footer button {
        width: 100%;
    }
}

@media (max-width: 480px) {
    .financial-card {
        padding: 12px 14px;
        min-height: 65px;
    }

    .card-label {
        font-size: 0.72em;
    }

    .card-value {
        font-size: 1.35em;
    }

    .btn-transfer-inline {
        padding: 6px 10px;
        font-size: 0.68em;
    }
}

/* =========================================
   Unified Confirm Modal & Inline Buttons
   ========================================= */

/* Unified Confirm Modal Buttons */
.confirm-btn {
    padding: 10px 24px;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    border: none;
    color: white;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

.confirm-btn-yes {
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    box-shadow: 0 4px 15px var(--color-val-rgba-59-158-255-0-3);
}

.confirm-btn-yes:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px var(--color-val-rgba-59-158-255-0-4);
}

.confirm-btn-no {
    background: var(--color-val-rgba-255-255-255-0-1);
    border: 1px solid var(--color-val-rgba-255-255-255-0-2);
    color: var(--text-color);
}

.confirm-btn-no:hover {
    background: var(--color-val-rgba-255-255-255-0-15);
    border-color: var(--text-color);
}

/* Light Mode for Confirm Buttons */
html[data-theme="light"] body .confirm-btn-no {
    background: var(--color-val-hex-f1f5f9);
    border-color: var(--color-val-hex-cbd5e1);
    color: var(--color-val-hex-475569);
}

html[data-theme="light"] body .confirm-btn-no:hover {
    background: var(--color-val-hex-e2e8f0);
    border-color: var(--color-val-hex-94a3b8);
}

/* Inline Transfer Button - Neon Style */
.btn-transfer-inline {
    background: var(--color-val-rgba-0-212-170-0-1);
    color: var(--color-val-hex-00d4aa);
    border: 1px solid var(--color-val-rgba-0-212-170-0-2);
    padding: 6px 12px;
    border-radius: 6px;
    font-size: 0.8em;
    cursor: pointer;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    gap: 5px;
    text-decoration: none;
}

.btn-transfer-inline:hover {
    background: var(--color-val-rgba-0-212-170-0-2);
    box-shadow: 0 0 10px var(--color-val-rgba-0-212-170-0-2);
    transform: translateY(-1px);
    color: var(--color-val-hex-00f6cc);
}

.btn-reset-loss {
    background: var(--color-val-rgba-255-71-87-0-1);
    color: var(--color-val-hex-ff4757);
    border-color: var(--color-val-rgba-255-71-87-0-2);
}

.btn-reset-loss:hover {
    background: var(--color-val-rgba-255-71-87-0-2);
    box-shadow: 0 0 10px var(--color-val-rgba-255-71-87-0-2);
    color: var(--color-val-hex-ff7777);
}

/* Light Mode Overrides for Inline Buttons */
html[data-theme="light"] body .btn-transfer-inline {
    background: var(--color-val-rgba-0-212-170-0-1);
    border-color: var(--color-val-rgba-0-212-170-0-3);
    color: var(--color-val-hex-059669);
}

html[data-theme="light"] body .btn-transfer-inline:hover {
    background: var(--color-val-rgba-0-212-170-0-2);
}

html[data-theme="light"] body .btn-reset-loss {
    background: var(--color-val-rgba-255-71-87-0-1);
    border-color: var(--color-val-rgba-255-71-87-0-3);
    color: var(--color-val-hex-dc2626);
}

html[data-theme="light"] body .btn-reset-loss:hover {
    background: var(--color-val-rgba-255-71-87-0-2);
}

/* =========================================
   Application Footer Styles
   ========================================= */

/* Footer styles moved to Tailwind & Flowbite in index.html */

@keyframes toast-progress {
    from {
        width: 100%;
    }

    to {
        width: 0%;
    }
}

/* Modal Animations & Logic */
#principalModal.active,
#bugReportModal.active,
#donateModal.active,
#validationModal.active {
    display: flex !important;
}

#principalModal.active .modal-content-anim,
#bugReportModal.active .modal-content-anim,
#donateModal.active .modal-content-anim,
#validationModal.active .modal-content-anim {
    opacity: 1 !important;
    transform: scale(1) !important;
}

.modal-content-anim {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* =========================================
   Responsive Layout System (Large -> Small)
   ========================================= */
:root {
    --layout-max-width: 100%;
    --layout-gutter: clamp(4px, 0.6vw, 12px);
    --layout-section-pad: clamp(14px, 1.2vw, 26px);
    --layout-gap: clamp(12px, 1.2vw, 22px);
    --layout-card-gap: clamp(10px, 0.9vw, 14px);
    --layout-section-gap: clamp(18px, 1.6vw, 26px);
    --layout-radius: clamp(12px, 1vw, 20px);
    --layout-font-base: clamp(0.95rem, 0.2vw + 0.9rem, 1.05rem);
    --layout-table-font: clamp(0.85rem, 0.15vw + 0.82rem, 0.98rem);
    --layout-h1: clamp(1.7rem, 1.1vw + 1.2rem, 2.4rem);
    --layout-h2: clamp(1.2rem, 0.6vw + 1rem, 1.6rem);
    --layout-h3: clamp(1.05rem, 0.4vw + 0.9rem, 1.35rem);
}

body {
    font-size: var(--layout-font-base);
}

h1 {
    font-size: var(--layout-h1);
}

h2 {
    font-size: var(--layout-h2);
}

h3 {
    font-size: var(--layout-h3);
}

.container {
    max-width: var(--layout-max-width);
    margin-inline: auto;
    padding-left: var(--layout-gutter);
    padding-right: var(--layout-gutter);
}

.container>*+* {
    margin-top: var(--layout-section-gap);
}

.app-header {
    width: calc(100% - (var(--layout-gutter) * 2));
    max-width: var(--layout-max-width);
    margin-left: auto;
    margin-right: auto;
}

.section,
.overall-summary-section {
    padding: var(--layout-section-pad);
    border-radius: var(--layout-radius);
}

.details-content-wrapper {
    display: grid;
    gap: var(--layout-section-gap);
    grid-template-columns: minmax(0, 1fr) minmax(0, 1.4fr);
    grid-template-areas:
        "initial trade"
        "portfolio trade";
    align-items: start;
}

.details-content-wrapper>* {
    min-width: 0;
}

.section-initial-and-targets {
    grid-area: initial;
    order: 0;
}

.trade-actions-row {
    grid-area: trade;
    order: 0;
}

.section-portfolio-stats {
    grid-area: portfolio;
    order: 0;
}

.dashboard-container {
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: var(--layout-card-gap);
}

.trade-actions-row {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(360px, 1fr));
    gap: clamp(14px, 2vw, 24px);
    align-items: start;
}

.trade-actions-row .section {
    min-width: 0;
}

.financial-cards-grid {
    gap: var(--layout-card-gap);
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
}

.summary-table,
.repurchase-table {
    font-size: var(--layout-table-font);
}

.summary-table th,
.summary-table td,
.repurchase-table th,
.repurchase-table td {
    padding: clamp(8px, 0.6vw, 12px) clamp(8px, 0.8vw, 14px);
}

.summary-table-container {
    border-radius: var(--layout-radius);
    scrollbar-gutter: stable both-edges;
}

.professional-toolbar {
    gap: clamp(10px, 1.2vw, 16px);
}

.toolbar-controls {
    flex-wrap: wrap;
}

.toolbar-controls>* {
    flex: 1 1 auto;
}

.toolbar-controls>button {
    flex: 0 0 auto;
}

@media (min-width: 1920px) {
    :root {
        --layout-max-width: 100%;
        --layout-gap: clamp(16px, 1.4vw, 28px);
        --layout-section-pad: clamp(18px, 1.4vw, 30px);
    }

    .details-content-wrapper {
        grid-template-columns: minmax(0, 1fr) minmax(0, 1.6fr);
    }

    .dashboard-container {
        grid-template-columns: minmax(260px, 1fr) minmax(320px, 1.2fr) minmax(260px, 1fr);
    }
}

@media (max-width: 1400px) {
    .details-content-wrapper {
        grid-template-columns: minmax(0, 1fr) minmax(0, 1.25fr);
    }
}

@media (max-width: 1200px) {
    :root {
        --layout-gap: clamp(14px, 1.2vw, 22px);
    }

    .details-content-wrapper {
        grid-template-columns: 1fr;
        grid-template-areas:
            "initial"
            "trade"
            "portfolio";
    }

    .dashboard-container {
        grid-template-columns: repeat(2, minmax(0, 1fr));
    }
}

@media (max-width: 992px) {
    :root {
        --layout-section-pad: clamp(14px, 1.6vw, 24px);
    }

    .details-content-wrapper {
        grid-template-columns: 1fr;
        gap: var(--layout-section-gap);
    }

    .toolbar-controls>* {
        flex: 1 1 100%;
    }

    .toolbar-controls>button {
        width: 100%;
        justify-content: center;
    }
}

@media (max-width: 900px) {
    .trade-actions-row {
        flex-direction: column;
    }

    .dashboard-container {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 768px) {
    :root {
        --layout-gutter: 10px;
        --layout-section-pad: 16px;
        --layout-gap: 18px;
    }

    .financial-cards-grid {
        grid-template-columns: 1fr;
    }

    .summary-table,
    .repurchase-table {
        font-size: 0.82rem;
    }
}

@media (max-width: 600px) {
    :root {
        --layout-gutter: 8px;
        --layout-section-pad: 14px;
    }

    .summary-table th,
    .summary-table td,
    .repurchase-table th,
    .repurchase-table td {
        padding: 8px 8px;
    }
}

@media (max-width: 480px) {
    :root {
        --layout-gutter: 10px;
        --layout-font-base: 0.95rem;
    }

    .professional-toolbar {
        padding: 12px;
    }
}

@media (max-width: 360px) {
    :root {
        --layout-gutter: 8px;
    }
}

/* Force full-width layout (fix side gaps on large screens) */
html,
body {
    width: 100%;
}

.container {
    width: 100% !important;
    max-width: none !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
}

.section,
.overall-summary-section {
    width: 100%;
}

.app-header {
    width: 100% !important;
    max-width: none !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
}

/* Layout: Dashboard on top, Repurchase + Sell below */
.details-content-wrapper {
    display: flex !important;
    flex-direction: column !important;
    gap: var(--layout-gap);
}

.section-initial-and-targets {
    order: 1;
    width: 100%;
}

.trade-actions-row {
    order: 2;
    width: 100%;
}

.section-portfolio-stats {
    order: 3;
    width: 100%;
}


/* Live Performance card refinements */
.dashboard-card.card-stats {
    overflow: hidden;
}

.dashboard-card.card-stats .card-header {
    justify-content: center;
    text-align: center;
}

.dashboard-card.card-stats .card-content {
    min-width: 0;
}

/* Top 3 stats (price / PnL / percent) */
.dashboard-card.card-stats .card-content>.grid.grid-cols-3 {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
    gap: clamp(6px, 0.8vw, 12px);
    padding: clamp(10px, 1vw, 14px);
    border-radius: 14px;
}

.dashboard-card.card-stats .card-content>.grid.grid-cols-3>div {
    min-width: 0;
    padding: clamp(8px, 0.7vw, 12px);
    border-radius: 12px;
    display: grid;
    gap: 4px;
    place-items: center;
    text-align: center;
    overflow: hidden;
}

.dashboard-card.card-stats .card-content>.grid.grid-cols-3>div>div:first-child {
    font-size: clamp(0.62rem, 0.25vw + 0.55rem, 0.78rem);
    line-height: 1.2;
    max-width: 100%;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    opacity: 0.9;
}

.dashboard-card.card-stats #marketPriceDisplay,
.dashboard-card.card-stats #pnlAmount,
.dashboard-card.card-stats #pnlPercent {
    font-size: clamp(0.95rem, 0.55vw + 0.7rem, 1.2rem);
    line-height: 1.2;
    max-width: 100%;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    font-variant-numeric: tabular-nums;
}

.dashboard-card.card-stats .card-content>.grid.grid-cols-3>.border-x {
    border-left: 1px solid var(--color-val-rgba-148-163-184-0-25);
    border-right: 1px solid var(--color-val-rgba-148-163-184-0-25);
}

/* Detailed metrics grid */
.dashboard-card.card-stats .card-content>.grid.grid-cols-2 {
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: clamp(10px, 1vw, 14px);
}

.dashboard-card.card-stats .card-content>.grid.grid-cols-2>div {
    min-width: 0;
    flex-wrap: wrap;
    gap: 4px 8px;
}

.dashboard-card.card-stats .card-content>.grid.grid-cols-2>div span {
    min-width: 0;
    max-width: 100%;
    overflow-wrap: anywhere;
    word-break: break-word;
}

.dashboard-card.card-stats .card-content>.grid.grid-cols-2>div span:last-child {
    text-align: left;
    direction: ltr;
    unicode-bidi: isolate;
}

@media (max-width: 600px) {
    .dashboard-card.card-stats .card-content>.grid.grid-cols-3 {
        grid-template-columns: 1fr;
    }

    .dashboard-card.card-stats .card-content>.grid.grid-cols-3>.border-x {
        border-left: none;
        border-right: none;
    }

    .dashboard-card.card-stats .card-content>.grid.grid-cols-2 {
        grid-template-columns: 1fr;
    }
}

/* Sell section layout polish (remove empty left area) */
.section-sell .sell-controls-wrapper {
    display: block !important;
    width: 100%;
    padding: 18px;
    border-radius: 16px;
    background: linear-gradient(145deg, var(--color-val-rgba-15-23-42-0-65), var(--color-val-rgba-30-41-59-0-35));
    border: 1px solid var(--color-val-rgba-255-255-255-0-08);
    box-shadow: inset 0 0 0 1px var(--color-val-rgba-255-255-255-0-02);
}

.section-sell .sell-controls-wrapper>.grid {
    width: 100%;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 16px;
    align-items: end;
}

.section-sell .sell-controls-wrapper>.grid>div {
    min-width: 0;
}

.section-sell .sell-controls-wrapper label {
    font-size: 0.78rem;
    letter-spacing: 0.2px;
}

.section-sell #sellPreviewText {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

@media (max-width: 900px) {
    .section-sell .sell-controls-wrapper>.grid {
        grid-template-columns: 1fr;
    }
}

/* =========================================
   Crypto Ticker Styles
   ========================================= */
.crypto-ticker-wrap {
    width: 100%;
    overflow: hidden;
    background: var(--color-val-rgba-15-23-42-0-95);
    /* Deep dark background */
    border-bottom: 1px solid var(--color-val-rgba-59-130-246-0-1);
    height: 48px;
    display: flex;
    align-items: center;
    position: relative;
    z-index: 50;
    margin-bottom: 0;
    backdrop-filter: blur(10px);
    box-shadow: 0 4px 20px var(--color-val-rgba-0-0-0-0-2);
}

.crypto-ticker-wrap::before,
.crypto-ticker-wrap::after {
    content: '';
    position: absolute;
    top: 0;
    bottom: 0;
    width: 50px;
    z-index: 2;
    pointer-events: none;
}

.crypto-ticker-wrap::before {
    left: 0;
    background: linear-gradient(to right, var(--color-val-rgba-15-23-42-1), transparent);
}

.crypto-ticker-wrap::after {
    right: 0;
    background: linear-gradient(to left, var(--color-val-rgba-15-23-42-1), transparent);
}

.ticker-scroll {
    display: flex;
    align-items: center;
    white-space: nowrap;
    animation: tickerScroll 60s linear infinite;
    /* Ensure hardware acceleration */
    transform: translate3d(0, 0, 0);
    will-change: transform;
}

.ticker-scroll:hover {
    animation-play-state: paused;
}

.ticker-item {
    display: inline-flex;
    align-items: center;
    padding: 0 25px;
    font-size: 0.85rem;
    color: var(--color-val-hex-e2e8f0);
    border-right: 1px solid var(--color-val-rgba-255-255-255-0-05);
    height: 30px;
}

.ticker-item:last-child {
    border-right: none;
}

.ticker-item .coin-icon {
    width: 20px;
    height: 20px;
    margin-right: 8px;
    border-radius: 50%;
}

.ticker-item .coin-symbol {
    font-weight: 700;
    margin-right: 6px;
    color: var(--color-val-hex-fff);
}

.ticker-item .coin-price {
    font-family: 'Roboto Mono', monospace;
    font-weight: 500;
    margin-right: 8px;
    color: var(--color-val-hex-94a3b8);
}

.ticker-item .coin-change {
    font-size: 0.75rem;
    font-weight: 700;
    padding: 2px 6px;
    border-radius: 4px;
    display: flex;
    align-items: center;
}

.ticker-item .coin-change.positive {
    color: var(--color-val-hex-10b981);
    background: var(--color-val-rgba-16-185-129-0-1);
}

.ticker-item .coin-change.negative {
    color: var(--color-val-hex-ef4444);
    background: var(--color-val-rgba-239-68-68-0-1);
}

/* Skeleton Loading for Ticker */
.ticker-skeleton {
    display: inline-flex;
    align-items: center;
    padding: 0 20px;
    opacity: 0.5;
}

.skeleton-icon {
    width: 20px;
    height: 20px;
    background: var(--color-val-rgba-255-255-255-0-1);
    border-radius: 50%;
    margin-right: 8px;
}

.skeleton-text {
    height: 12px;
    background: var(--color-val-rgba-255-255-255-0-1);
    border-radius: 4px;
    margin-right: 6px;
}

@keyframes tickerScroll {
    0% {
        transform: translate3d(0, 0, 0);
    }

    100% {
        transform: translate3d(calc(-50%), 0, 0);
    }

    /* Assuming content is duplicated once */
}

/* Light Mode Overrides */
html[data-theme="light"] .crypto-ticker-wrap {
    background: var(--color-val-rgba-255-255-255-0-9);
    border-bottom: 1px solid var(--color-val-rgba-0-0-0-0-05);
}

html[data-theme="light"] .crypto-ticker-wrap::before {
    background: linear-gradient(to right, var(--color-val-rgba-255-255-255-1), transparent);
}

html[data-theme="light"] .crypto-ticker-wrap::after {
    background: linear-gradient(to left, var(--color-val-rgba-255-255-255-1), transparent);
}

html[data-theme="light"] .ticker-item {
    color: var(--color-val-hex-475569);
    border-right: 1px solid var(--color-val-rgba-0-0-0-0-05);
}

html[data-theme="light"] .ticker-item .coin-symbol {
    color: var(--color-val-hex-0f172a);
}

/* =========================================
           Footer Enhancements
           ========================================= */
.app-footer {
    margin-top: var(--layout-section-gap);
}

.footer-card {
    position: relative;
    overflow: hidden;
}

.footer-card::before {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(circle at 15% 10%, var(--color-val-rgba-59-130-246-0-12), transparent 45%),
        radial-gradient(circle at 90% 80%, var(--color-val-rgba-14-165-233-0-08), transparent 40%);
    pointer-events: none;
    opacity: 0.7;
}

html[data-theme="light"] body .footer-card::before {
    background: radial-gradient(circle at 10% 15%, var(--color-val-rgba-59-130-246-0-08), transparent 45%),
        radial-gradient(circle at 85% 80%, var(--color-val-rgba-14-165-233-0-05), transparent 40%);
}

.footer-top {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 24px;
    flex-wrap: wrap;
}

.footer-brand {
    display: flex;
    align-items: center;
    gap: 5px;
}

.footer-brand-text {
    display: flex;
    flex-direction: column;
    gap: 6px;
    text-align: right;
}

.footer-brand-name {
    color: var(--text-light);
    font-size: clamp(1.15rem, 1.5vw, 1.45rem);
    font-weight: 800;
    line-height: 1.35;
    letter-spacing: 0.2px;
}

.footer-brand-tag {
    color: var(--text-muted);
    font-size: 0.9em;
    line-height: 1.6;
    max-width: 360px;
    margin: 0;
}

.footer-highlights {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 6px;
}

.footer-chip {
    padding: 6px 10px;
    border-radius: 999px;
    background: var(--color-val-rgba-59-130-246-0-12);
    border: 1px solid var(--color-val-rgba-59-130-246-0-25);
    color: var(--primary-color);
    font-size: 0.78em;
    font-weight: 600;
}

html[data-theme="light"] body .footer-chip {
    background: var(--color-val-rgba-59-130-246-0-08);
    border-color: var(--color-val-rgba-59-130-246-0-18);
}

.footer-links {
    display: flex;
    align-items: flex-start;
    gap: 18px;
    flex-wrap: wrap;
}

.footer-group {
    min-width: 160px;
}

.footer-title {
    font-size: 0.95em;
    font-weight: 700;
    color: var(--text-light);
    margin-bottom: 10px;
}

.footer-list {
    list-style: none;
    margin: 0;
    padding: 0;
    display: grid;
    gap: 8px;
}

.footer-list a {
    color: var(--color-val-hex-3b82f6);
    text-decoration: none;
    transition: color 0.2s ease;
}

.footer-list a:hover {
    color: var(--primary-color);
    text-decoration: underline;
}

.footer-divider {
    width: 1px;
    height: 84px;
    background: var(--border-color);
    opacity: 0.6;
    align-self: center;
}

.footer-bottom {
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap;
    gap: 12px;
    font-size: 0.85em;
    color: var(--text-muted);
}

.footer-note {
    font-weight: 600;
    color: var(--text-color);
}

.footer-meta {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 12px;
}

.footer-meta span {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 4px 10px;
    border-radius: 999px;
    background: var(--color-val-rgba-148-163-184-0-1);
    border: 1px solid var(--color-val-rgba-148-163-184-0-2);
    font-size: 0.78em;
    color: var(--text-muted);
}

.footer-meta i {
    color: var(--primary-color);
}

html[data-theme="light"] body .footer-note {
    color: var(--color-val-hex-334155);
}

html[data-theme="light"] body .footer-meta span {
    background: var(--color-val-rgba-59-130-246-0-06);
    border-color: var(--color-val-rgba-59-130-246-0-12);
    color: var(--color-val-hex-475569);
}

@media (max-width: 768px) {
    .footer-divider {
        display: none;
    }

    .footer-top {
        gap: 16px;
    }

    .footer-brand {
        width: 100%;
    }

    .footer-links {
        width: 100%;
        justify-content: space-between;
    }

    .footer-bottom {
        flex-direction: column;
        align-items: flex-start;
    }

    .footer-meta {
        width: 100%;
        justify-content: flex-start;
    }
}

@media (max-width: 600px) {
    .app-footer {
        padding-left: 12px;
        padding-right: 12px;
    }

    .footer-card {
        padding: 18px 16px;
    }

    .footer-top {
        flex-direction: column;
        align-items: stretch;
        gap: 18px;
    }

    .footer-brand {
        justify-content: center;
        text-align: center;
        gap: 6px;
    }

    .footer-brand-text {
        align-items: center;
        text-align: center;
    }

    .footer-brand-name {
        font-size: 1.2rem;
    }

    .footer-brand-tag {
        max-width: 100%;
    }

    .footer-highlights {
        justify-content: center;
    }

    .footer-links {
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 12px 16px;
        align-items: start;
    }

    .footer-group {
        padding-inline: 10px;
    }

    .footer-group:nth-child(2) {
        border-inline-start: 1px solid var(--color-val-rgba-148-163-184-0-25);
    }

    .footer-group {
        min-width: auto;
        text-align: right;
    }

    .footer-list {
        justify-items: start;
    }

    .footer-bottom {
        align-items: center;
        text-align: center;
        gap: 10px;
    }

    .footer-meta {
        justify-content: center;
    }
}

/* =========================================
           Portfolio Stats Enhancements
           ========================================= */
.section-portfolio-stats .distribution-area {
    position: relative;
    padding: 28px;
    border: 1px solid var(--color-val-rgba-59-130-246-0-12);
    background: linear-gradient(145deg, var(--color-val-rgba-2-6-23-0-9) 0%, var(--color-val-rgba-15-23-42-0-75) 100%);
    box-shadow:
        inset 0 1px 0 var(--color-val-rgba-255-255-255-0-04),
        0 20px 50px var(--color-val-rgba-2-6-23-0-45);
    overflow: hidden;
}

.section-portfolio-stats .distribution-area::before {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(circle at 15% 20%, var(--color-val-rgba-59-130-246-0-18), transparent 45%),
        radial-gradient(circle at 85% 80%, var(--color-val-rgba-14-165-233-0-12), transparent 40%);
    pointer-events: none;
    opacity: 0.7;
}

.section-portfolio-stats .distribution-area .chart-container {
    margin-bottom: 18px;
}

.section-portfolio-stats .coins-legend {
    grid-template-columns: repeat(auto-fit, minmax(clamp(120px, 14vw, 170px), 1fr));
    gap: 10px;
    padding-top: 16px;
    border-top: 1px solid var(--color-val-rgba-148-163-184-0-18);
}

.section-portfolio-stats .legend-item {
    padding: 10px 12px;
    border-radius: 12px;
    background: var(--color-val-rgba-15-23-42-0-68);
    border: 1px solid var(--color-val-rgba-59-130-246-0-18);
    box-shadow:
        inset 0 1px 0 var(--color-val-rgba-255-255-255-0-05),
        0 8px 16px var(--color-val-rgba-2-6-23-0-35);
    gap: 8px;
    min-height: 50px;
    transition: transform 0.25s ease, border-color 0.25s ease, background 0.25s ease;
    overflow: visible !important;
}

.section-portfolio-stats .legend-item:hover {
    background: var(--color-val-rgba-30-41-59-0-9);
    border-color: var(--color-val-rgba-59-130-246-0-35);
    transform: translateY(-2px);
}

.section-portfolio-stats .legend-item .coin-icon {
    width: 26px;
    height: 26px;
    margin-left: 0;
    padding: 1px;
}

.section-portfolio-stats .legend-item .coin-icon-fallback {
    width: 26px;
    height: 26px;
    margin-left: 0;
    font-size: 12px;
}

.section-portfolio-stats .legend-item .coin-icon-pair {
    width: 30px;
    height: 30px;
    margin-left: 0;
    flex-shrink: 0;
}

.section-portfolio-stats .legend-item .coin-icon-pair .coin-icon-base-wrap {
    width: 24px;
    height: 24px;
}

.section-portfolio-stats .legend-item .coin-icon-pair .coin-icon-quote-wrap {
    width: 14px;
    height: 14px;
}

.section-portfolio-stats .legend-item .coin-icon-pair .coin-icon-quote-wrap>.coin-icon-fallback {
    font-size: 8px !important;
}

.section-portfolio-stats .legend-item .coin-icon:hover,
.section-portfolio-stats .legend-item .coin-icon-fallback:hover,
.section-portfolio-stats .legend-item .coin-icon-pair:hover {
    transform: none !important;
}

.section-portfolio-stats .legend-content {
    gap: 2px;
}

.section-portfolio-stats .legend-name {
    color: var(--text-light);
    font-size: 0.78em;
    letter-spacing: 0.3px;
}

.section-portfolio-stats .legend-percent {
    font-size: 0.82em;
    text-shadow: none;
}

html[data-theme="light"] body .section-portfolio-stats .distribution-area {
    background: linear-gradient(145deg, var(--color-val-rgba-255-255-255-0-98) 0%, var(--color-val-rgba-248-250-252-0-95) 100%);
    border-color: var(--color-val-rgba-59-130-246-0-15);
    box-shadow: 0 12px 30px var(--color-val-rgba-15-23-42-0-08);
}

html[data-theme="light"] body .section-portfolio-stats .distribution-area::before {
    opacity: 0.4;
}

html[data-theme="light"] body .section-portfolio-stats .legend-item {
    background: var(--color-val-rgba-255-255-255-0-9);
    border-color: var(--color-val-rgba-59-130-246-0-15);
    box-shadow: 0 8px 18px var(--color-val-rgba-15-23-42-0-08);
}

html[data-theme="light"] body .section-portfolio-stats .legend-name {
    color: var(--color-val-hex-1e293b);
}

@media (max-width: 768px) {
    .section-portfolio-stats .distribution-area {
        padding: 20px;
    }

    .section-portfolio-stats .coins-legend {
        grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
        gap: 8px;
    }

    .section-portfolio-stats .legend-item .coin-icon {
        width: 30px;
        height: 30px;
    }

    .section-portfolio-stats .legend-item .coin-icon-fallback {
        width: 30px;
        height: 30px;
        font-size: 13px;
    }
}

@media (max-width: 480px) {
    .section-portfolio-stats .coins-legend {
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    }

    .section-portfolio-stats .legend-item {
        justify-content: center;
    }

    .section-portfolio-stats .legend-content {
        align-items: center;
    }

    .section-portfolio-stats .legend-item .coin-icon {
        width: 32px;
        height: 32px;
    }

    .section-portfolio-stats .legend-item .coin-icon-fallback {
        width: 32px;
        height: 32px;
        font-size: 14px;
    }
}

/* Section spacing normalization */
.section,
.overall-summary-section,
.controls-bar {
    margin-bottom: 0;
}

.section-portfolio-stats {
    margin: 0 !important;
}

.details-content-wrapper {
    gap: var(--layout-section-gap);
}

/* ========================================
   CONTROLS BAR - MAIN TOOLBAR REFINEMENTS
   ======================================== */
.controls-bar.controls-main {
    display: grid;
    grid-template-columns: 1fr;
    align-items: center;
    justify-content: stretch;
    gap: 16px 18px;
    padding: 18px 20px;
    border-radius: 22px;
    background: linear-gradient(135deg, var(--color-val-rgba-15-23-42-0-9) 0%, var(--color-val-rgba-10-16-28-0-85) 100%);
    border: 1px solid var(--color-val-rgba-148-163-184-0-12);
    box-shadow: 0 18px 40px var(--color-val-rgba-2-6-23-0-45), inset 0 1px 0 var(--color-val-rgba-255-255-255-0-03);
    position: relative;
    overflow: hidden;
}

.controls-bar.controls-main::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    padding: 1px;
    background: linear-gradient(135deg, var(--color-val-rgba-59-158-255-0-22), var(--color-val-rgba-59-158-255-0-02));
    -webkit-mask: linear-gradient(var(--color-val-hex-fff) 0 0) content-box, linear-gradient(var(--color-val-hex-fff) 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    opacity: 0.7;
    pointer-events: none;
}

.controls-bar.controls-main .controls-left {
    margin-bottom: 0 !important;
    display: grid;
    grid-template-columns: repeat(2, minmax(200px, 1fr));
    gap: 12px;
    align-items: end;
    width: 100%;
    grid-column: 1 / -1;
}

.controls-bar.controls-main .controls-left>div {
    min-width: 0;
}

.controls-bar.controls-main .controls-right {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    justify-content: flex-start;
    gap: 6px;
    width: 100%;
    min-width: 0;
    grid-column: 1 / -1;
    justify-self: stretch;
}

.controls-bar.controls-main select,
.controls-bar.controls-main input[type="text"] {
    height: 44px;
    border-radius: 14px;
    border: 1px solid var(--color-val-rgba-148-163-184-0-2);
    background: var(--color-val-rgba-15-23-42-0-65);
    box-shadow: inset 0 1px 0 var(--color-val-rgba-255-255-255-0-04);
    transition: all 0.25s ease;
}

.controls-bar.controls-main select:hover,
.controls-bar.controls-main input[type="text"]:hover {
    border-color: var(--color-val-rgba-59-158-255-0-5);
}

.controls-bar.controls-main select:focus,
.controls-bar.controls-main input[type="text"]:focus {
    outline: none;
    border-color: var(--color-val-rgba-59-158-255-0-85);
    box-shadow: 0 0 0 3px var(--color-val-rgba-59-158-255-0-18), inset 0 1px 0 var(--color-val-rgba-255-255-255-0-06);
}

.controls-bar.controls-main button {
    min-height: 40px;
    border-radius: 12px;
}

.controls-bar.controls-main .controls-toggles {
    display: inline-flex;
    flex-wrap: wrap;
    align-items: center;
    justify-content: flex-start;
    gap: 6px;
    padding: 6px;
    border-radius: 14px;
    background: var(--color-val-rgba-15-23-42-0-45);
    border: 1px solid var(--color-val-rgba-148-163-184-0-12);
    max-width: 100%;
    flex: 0 1 auto;
}

.controls-bar.controls-main .controls-toggle {
    height: 40px;
    border-radius: 12px;
    background: var(--color-val-rgba-15-23-42-0-7);
    border-color: var(--color-val-rgba-148-163-184-0-18);
    min-width: 0;
    width: auto;
    max-width: 100%;
    display: inline-flex;
    align-items: center;
    justify-content: flex-start;
    gap: 8px;
    direction: rtl;
    flex: 0 1 auto;
}

.controls-bar.controls-main .controls-toggle label {
    line-height: 1.1;
    direction: rtl;
    text-align: right;
    margin-top: 0 !important;
    margin-inline-start: 6px;
    align-self: center;
}

.controls-bar.controls-main .controls-toggle input[type="checkbox"] {
    width: 16px !important;
    height: 16px !important;
    min-width: 16px;
    min-height: 16px;
    max-width: 16px;
    max-height: 16px;
    flex: 0 0 16px;
    aspect-ratio: 1 / 1;
    align-self: center;
}

html[data-theme="light"] body .controls-bar.controls-main {
    background: linear-gradient(135deg, var(--color-val-rgba-248-250-252-0-98) 0%, var(--color-val-rgba-241-245-249-0-95) 100%);
    border-color: var(--color-val-rgba-59-130-246-0-15);
    box-shadow: 0 16px 30px var(--color-val-rgba-15-23-42-0-08), inset 0 1px 0 var(--color-val-rgba-255-255-255-0-7);
}

html[data-theme="light"] body .controls-bar.controls-main select,
html[data-theme="light"] body .controls-bar.controls-main input[type="text"] {
    background: var(--color-val-hex-ffffff);
    border-color: var(--color-val-rgba-59-130-246-0-2);
}

html[data-theme="light"] body .controls-bar.controls-main .controls-toggles {
    background: var(--color-val-rgba-226-232-240-0-7);
    border-color: var(--color-val-rgba-59-130-246-0-15);
}

html[data-theme="light"] body .controls-bar.controls-main .controls-toggle {
    background: var(--color-val-hex-f8fafc);
    border-color: var(--color-val-rgba-59-130-246-0-2);
}

@media (max-width: 1200px) {
    .controls-bar.controls-main {
        grid-template-columns: 1fr;
    }
}

@media (min-width: 1200px) {
    .controls-bar.controls-main {
        grid-template-columns: 1fr;
        gap: 14px;
    }

    .controls-bar.controls-main .controls-left {
        justify-self: stretch;
    }

    .controls-bar.controls-main .controls-right {
        justify-self: stretch;
        justify-content: flex-start;
        gap: 6px;
    }

    .controls-bar.controls-main .controls-toggles {
        flex: 0 0 auto;
    }
}

.controls-bar.controls-main .controls-right>button {
    flex: 1 1 0;
    min-width: 140px;
}

@media (max-width: 900px) {
    .controls-bar.controls-main .controls-left {
        grid-template-columns: 1fr;
    }

    .controls-bar.controls-main button {
        flex: 1 1 auto;
        min-width: 120px;
    }

    .controls-bar.controls-main .controls-toggles {
        width: 100%;
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 6px;
    }

    .controls-bar.controls-main .controls-toggle {
        width: 100%;
        justify-content: flex-start;
    }

    .controls-bar.controls-main .controls-right {
        width: 100%;
        justify-self: stretch;
    }
}

@media (max-width: 600px) {
    .controls-bar.controls-main {
        padding: 12px 14px;
    }

    .controls-bar.controls-main select,
    .controls-bar.controls-main input[type="text"] {
        height: 42px;
    }

    .controls-bar.controls-main .controls-toggles {
        width: 100%;
    }

    .controls-bar.controls-main .controls-right>button {
        flex: 0 1 auto;
        min-width: 120px;
    }
}

@media (max-width: 480px) {
    .controls-bar.controls-main .controls-toggles {
        grid-template-columns: 1fr;
    }
}

/* =========================================
   Coin Badge Styles - Premium UI
   ========================================= */
.coin-badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 6px 14px;
    border-radius: 9999px;
    /* Pill shape */
    font-size: 0.9em;
    font-weight: 700;
    margin-right: 12px;
    letter-spacing: 0.5px;
    font-family: 'Roboto Mono', monospace;
    /* Tech feel */

    /* Modern Gradient Background - Blue/Indigo/Purple subtle mix */
    background: linear-gradient(135deg, var(--color-val-rgba-59-130-246-0-1), var(--color-val-rgba-99-102-241-0-1));
    border: 1px solid var(--color-val-rgba-59-130-246-0-3);
    color: var(--primary-color);

    box-shadow: 0 4px 6px -1px var(--color-val-rgba-0-0-0-0-05), 0 2px 4px -1px var(--color-val-rgba-0-0-0-0-03);
    backdrop-filter: blur(8px);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);

    /* Ensure span behaves correctly */
    vertical-align: middle;
    line-height: normal;
}

/* Dark mode adjustments */
html[data-theme="dark"] body .coin-badge,
.dark .coin-badge {
    background: linear-gradient(135deg, var(--color-val-rgba-30-41-59-0-8), var(--color-val-rgba-15-23-42-0-8));
    /* Deep Slate */
    border-color: var(--color-val-rgba-59-130-246-0-4);
    /* Blue border */
    color: var(--color-val-hex-60a5fa);
    /* Blue-400 */
    box-shadow: 0 4px 6px -1px var(--color-val-rgba-0-0-0-0-3), 0 2px 4px -1px var(--color-val-rgba-0-0-0-0-1);
    text-shadow: 0 0 10px var(--color-val-rgba-96-165-250-0-3);
    /* Glowing text effect */
}

/* Hover effect */
.coin-badge:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 15px -3px var(--color-val-rgba-59-130-246-0-2), 0 4px 6px -2px var(--color-val-rgba-59-130-246-0-1);
    border-color: var(--primary-color);
    background: linear-gradient(135deg, var(--color-val-rgba-59-130-246-0-2), var(--color-val-rgba-99-102-241-0-2));
}

html[data-theme="dark"] body .coin-badge:hover {
    background: linear-gradient(135deg, var(--color-val-rgba-30-41-59-1), var(--color-val-rgba-15-23-42-1));
    border-color: var(--color-val-hex-60a5fa);
    box-shadow: 0 0 15px var(--color-val-rgba-96-165-250-0-4);
}

/* Empty state styling */
.coin-badge:empty,
.coin-badge:contains("---") {
    opacity: 0.5;
    background: var(--color-val-rgba-148-163-184-0-1);
    border-color: var(--color-val-rgba-148-163-184-0-2);
    color: var(--text-muted);
    box-shadow: none;
}

/* =========================================
   Section Header & Badge Alignment
   ========================================= */
.section h2 {
    display: flex;
    align-items: center;
    /* justify-content: space-between; REMOVED to keep Icon+Text together */
    flex-wrap: wrap;
    width: 100%;
    gap: 10px;
    /* Add gap between flex items (Icon and Text) */
}

.section h2 i {
    margin-left: 2px;
    /* Ensure specific spacing for the icon if gap doesn't cover text node specifically */
}

/* Target the specific coin badges if needed, or simply ensure the badge is pushed */
.section h2 .coin-badge {
    /* Push to the opposite end (Left in RTL) */
    /* In RTL, margin-right is the 'Start' side (closest to text). Auto margin here pushes it away to the End (Left). */
    margin-right: auto;
    margin-left: 0;
}

/* 
   ==========================================================================
   Hiding Percentage Drop Column (Repurchase Table)
   ========================================================================== 
*/
.repurchase-table:not(.sell-table) th:nth-child(2),
.repurchase-table:not(.sell-table) td:nth-child(2) {
    display: none !important;
}

/* --- DCA Table Specific Styles (User Requested) --- */
#dca-table {
    width: 100%;
    table-layout: fixed;
    border-collapse: collapse;
}

#dca-table th,
#dca-table td {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 0;
    padding: 8px;
    font-size: clamp(12px, 1.2vw, 14px);
}

.dca-table-container {
    width: 100%;
    max-width: 100%;
    overflow: hidden;
    border-radius: 8px;
    border: 1px solid var(--border-color);
}

html,
body {
    max-width: 100%;
    overflow-x: hidden;
}

@media (max-width: 768px) {

    #dca-table th,
    #dca-table td {
        padding: 6px;
        font-size: 12px;
    }
}

@media (max-width: 480px) {

    #dca-table th,
    #dca-table td {
        padding: 4px;
        font-size: 11px;
    }
}

/* Immutable ledger styles (merged) */
/* =========================================
   Immutable Ledger Badge & Note Styles
   ========================================= */

.immutable-badge {
    display: inline-flex;
    align-items: center;
    gap: 5px;
    margin-right: 10px;
    padding: 4px 10px;
    background: linear-gradient(135deg, var(--color-val-rgba-255-193-7-0-15), var(--color-val-rgba-255-152-0-0-15));
    border: 1.5px solid var(--color-val-rgba-255-193-7-0-5);
    border-radius: 12px;
    font-size: 0.75em;
    font-weight: 600;
    color: var(--color-val-hex-ffc107);
    letter-spacing: 0.5px;
    cursor: help;
    transition: all 0.3s ease;
    box-shadow: 0 2px 8px var(--color-val-rgba-255-193-7-0-2);
}

.immutable-badge:hover {
    background: linear-gradient(135deg, var(--color-val-rgba-255-193-7-0-25), var(--color-val-rgba-255-152-0-0-25));
    border-color: var(--color-val-rgba-255-193-7-0-7);
    box-shadow: 0 4px 12px var(--color-val-rgba-255-193-7-0-35);
    transform: translateY(-1px);
}

.immutable-badge i {
    font-size: 0.9em;
}

.immutable-note {
    margin-top: 12px;
    padding: 10px 14px;
    background: linear-gradient(135deg, var(--color-val-rgba-33-150-243-0-08), var(--color-val-rgba-3-169-244-0-08));
    border-right: 3px solid var(--color-val-rgba-33-150-243-0-5);
    border-radius: 6px;
    font-size: 0.82em;
    color: var(--text-muted);
    line-height: 1.5;
    display: flex;
    align-items: flex-start;
    gap: 8px;
}

.immutable-note i {
    color: var(--color-val-hex-2196f3);
    margin-top: 2px;
    flex-shrink: 0;
}

/* Light Mode */
html[data-theme="light"] .immutable-badge {
    background: linear-gradient(135deg, var(--color-val-rgba-255-193-7-0-2), var(--color-val-rgba-255-152-0-0-2));
    border-color: var(--color-val-rgba-255-152-0-0-6);
    color: var(--color-val-hex-f57c00);
}

html[data-theme="light"] .immutable-badge:hover {
    background: linear-gradient(135deg, var(--color-val-rgba-255-193-7-0-3), var(--color-val-rgba-255-152-0-0-3));
    border-color: var(--color-val-rgba-255-152-0-0-8);
}

html[data-theme="light"] .immutable-note {
    background: linear-gradient(135deg, var(--color-val-rgba-33-150-243-0-12), var(--color-val-rgba-3-169-244-0-12));
    border-right-color: var(--color-val-rgba-33-150-243-0-6);
}

/* Hide delete column in sell table */
.sell-table th:last-child {
    display: none;
}

/* Hide delete buttons only (not skeleton rows) */
.sell-table tr:not(.skeleton-row) td:last-child {
    display: none;
}

/* Skeleton Loading Styles */
.skeleton-row {
    animation: skeleton-pulse 1.5s ease-in-out infinite;
}

.skeleton {
    background: linear-gradient(90deg,
            var(--color-val-rgba-255-255-255-0-05) 25%,
            var(--color-val-rgba-255-255-255-0-1) 50%,
            var(--color-val-rgba-255-255-255-0-05) 75%);
    background-size: 200% 100%;
    animation: skeleton-shimmer 1.5s ease-in-out infinite;
    border-radius: 4px;
    height: 16px;
    width: 100%;
}

.skeleton-text {
    height: 14px;
    width: 80%;
    margin: 0 auto;
}

@keyframes skeleton-shimmer {
    0% {
        background-position: 200% 0;
    }

    100% {
        background-position: -200% 0;
    }
}

@keyframes skeleton-pulse {

    0%,
    100% {
        opacity: 1;
    }

    50% {
        opacity: 0.6;
    }
}

/* Light Mode Skeleton */
html[data-theme="light"] .skeleton {
    background: linear-gradient(90deg,
            var(--color-val-rgba-0-0-0-0-05) 25%,
            var(--color-val-rgba-0-0-0-0-1) 50%,
            var(--color-val-rgba-0-0-0-0-05) 75%);
    background-size: 200% 100%;
}
